import{j as s,n as S,X as Re,M as ir,L as ot,a as cr,U as Ot,P as ve,S as Et,C as lr,B as dr,T as ur,R as mr,b as He,c as hr,d as Mt,e as fr,f as Be,g as gr,h as xr,i as pr,A as Tt,k as Ue,l as br,m as yr,o as wr,p as vr,q as it,I as jr}from"./ui-d4LXDG1v.js";import{a as Nr,r as g,N as Rt,O as Wt,b as ct,R as It,u as Dt,c as Pr,H as Sr,d as Cr,e as ce}from"./vendor-DkOrtBC1.js";import{i as kr,g as Or,a as Er,o as Mr,r as W,b as Oe,p as Fe,u as $t,c as Ve,d as me,q as Qe,e as Xe,f as Je,s as We}from"./firebase-BEzlT3k2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Lt,lt=Nr;Lt=lt.createRoot,lt.hydrateRoot;const Tr={apiKey:"AIzaSyBopcfbHLrWQZOsgitRYWk5h26ipYbD-hE",authDomain:"nrd-ordenes-prod.firebaseapp.com",databaseURL:"https://nrd-ordenes-prod-default-rtdb.firebaseio.com",projectId:"nrd-ordenes-prod",storageBucket:"nrd-ordenes-prod.firebasestorage.app",messagingSenderId:"766340976237",appId:"1:766340976237:web:e7123eedb37568a2f9b964"},Ft=kr(Tr),ke=Or(Ft),Rr=async(e,t)=>{const r={uid:"demo-user",email:e,displayName:"Demo User"};return ke.currentUser=r,Promise.resolve({user:r})};ke.signInWithEmailAndPassword=Rr;const I=Er(Ft),At=g.createContext(void 0);function Wr({children:e}){const[t,r]=g.useState(null),[n,a]=g.useState(!0);g.useEffect(()=>Mr(ke,d=>{r(d),a(!1)}),[]);const i={user:t,loading:n,signIn:async(l,d)=>{try{await ke.signInWithEmailAndPassword(l,d),S.success("¡Bienvenido!")}catch(u){throw console.error("Sign in error:",u),S.error("Error al iniciar sesión"),u}},signOut:async()=>{try{await ke.signOut(),S.success("Sesión cerrada")}catch(l){throw console.error("Sign out error:",l),S.error("Error al cerrar sesión"),l}}};return s.jsx(At.Provider,{value:i,children:!n&&e})}function Ke(){const e=g.useContext(At);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Ir(){const{user:e}=Ke();return e?s.jsx(Wt,{}):s.jsx(Rt,{to:"/login",replace:!0})}function Y(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ae(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Dr(e,t){const r=Y(e);return isNaN(t)?ae(e,NaN):(r.setDate(r.getDate()+t),r)}const zt=6048e5,$r=864e5;let Lr={};function Ae(){return Lr}function Ee(e,t){var i,l,d,u;const r=Ae(),n=(t==null?void 0:t.weekStartsOn)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Y(e),o=a.getDay(),c=(o<n?7:0)+o-n;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function Le(e){return Ee(e,{weekStartsOn:1})}function qt(e){const t=Y(e),r=t.getFullYear(),n=ae(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Le(n),o=ae(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const c=Le(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function Ye(e){const t=Y(e);return t.setHours(0,0,0,0),t}function dt(e){const t=Y(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Fr(e,t){const r=Ye(e),n=Ye(t),a=+r-dt(r),o=+n-dt(n);return Math.round((a-o)/$r)}function Ar(e){const t=qt(e),r=ae(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Le(r)}function zr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function qr(e){if(!zr(e)&&typeof e!="number")return!1;const t=Y(e);return!isNaN(Number(t))}function _r(e){const t=Y(e);return t.setHours(23,59,59,999),t}function Yr(e){const t=Y(e),r=ae(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Gr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hr=(e,t,r)=>{let n;const a=Gr[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function pe(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Br={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ur={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Qr={date:pe({formats:Br,defaultWidth:"full"}),time:pe({formats:Ur,defaultWidth:"full"}),dateTime:pe({formats:Vr,defaultWidth:"full"})},Xr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Jr=(e,t,r,n)=>Xr[e];function X(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,i=r!=null&&r.width?String(r.width):c;a=e.formattingValues[i]||e.formattingValues[c]}else{const c=e.defaultWidth,i=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[i]||e.values[c]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const Kr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Zr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},es={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ts={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ss={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ns=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},as={ordinalNumber:ns,era:X({values:Kr,defaultWidth:"wide"}),quarter:X({values:Zr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:X({values:es,defaultWidth:"wide"}),day:X({values:ts,defaultWidth:"wide"}),dayPeriod:X({values:rs,defaultWidth:"wide",formattingValues:ss,defaultFormattingWidth:"wide"})};function J(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const c=o[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?is(i,m=>m.test(c)):os(i,m=>m.test(c));let d;d=e.valueCallback?e.valueCallback(l):l,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(c.length);return{value:d,rest:u}}}function os(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function is(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function _t(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],o=t.match(e.parsePattern);if(!o)return null;let c=e.valueCallback?e.valueCallback(o[0]):o[0];c=r.valueCallback?r.valueCallback(c):c;const i=t.slice(a.length);return{value:c,rest:i}}}const cs=/^(\d+)(th|st|nd|rd)?/i,ls=/\d+/i,ds={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},us={any:[/^b/i,/^(a|c)/i]},ms={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hs={any:[/1/i,/2/i,/3/i,/4/i]},fs={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xs={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ps={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ys={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ws={ordinalNumber:_t({matchPattern:cs,parsePattern:ls,valueCallback:e=>parseInt(e,10)}),era:J({matchPatterns:ds,defaultMatchWidth:"wide",parsePatterns:us,defaultParseWidth:"any"}),quarter:J({matchPatterns:ms,defaultMatchWidth:"wide",parsePatterns:hs,defaultParseWidth:"any",valueCallback:e=>e+1}),month:J({matchPatterns:fs,defaultMatchWidth:"wide",parsePatterns:gs,defaultParseWidth:"any"}),day:J({matchPatterns:xs,defaultMatchWidth:"wide",parsePatterns:ps,defaultParseWidth:"any"}),dayPeriod:J({matchPatterns:bs,defaultMatchWidth:"any",parsePatterns:ys,defaultParseWidth:"any"})},vs={code:"en-US",formatDistance:Hr,formatLong:Qr,formatRelative:Jr,localize:as,match:ws,options:{weekStartsOn:0,firstWeekContainsDate:1}};function js(e){const t=Y(e);return Fr(t,Yr(t))+1}function Ns(e){const t=Y(e),r=+Le(t)-+Ar(t);return Math.round(r/zt)+1}function Yt(e,t){var u,m,f,x;const r=Y(e),n=r.getFullYear(),a=Ae(),o=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(f=a.locale)==null?void 0:f.options)==null?void 0:x.firstWeekContainsDate)??1,c=ae(e,0);c.setFullYear(n+1,0,o),c.setHours(0,0,0,0);const i=Ee(c,t),l=ae(e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const d=Ee(l,t);return r.getTime()>=i.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function Ps(e,t){var i,l,d,u;const r=Ae(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=Yt(e,t),o=ae(e,0);return o.setFullYear(a,0,n),o.setHours(0,0,0,0),Ee(o,t)}function Ss(e,t){const r=Y(e),n=+Ee(r,t)-+Ps(r,t);return Math.round(n/zt)+1}function k(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Z={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return k(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):k(r+1,2)},d(e,t){return k(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return k(e.getHours()%12||12,t.length)},H(e,t){return k(e.getHours(),t.length)},m(e,t){return k(e.getMinutes(),t.length)},s(e,t){return k(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return k(a,t.length)}},xe={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ut={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Z.y(e,t)},Y:function(e,t,r,n){const a=Yt(e,n),o=a>0?a:1-a;if(t==="YY"){const c=o%100;return k(c,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):k(o,t.length)},R:function(e,t){const r=qt(e);return k(r,t.length)},u:function(e,t){const r=e.getFullYear();return k(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return k(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return k(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Z.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return k(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=Ss(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):k(a,t.length)},I:function(e,t,r){const n=Ns(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):k(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Z.d(e,t)},D:function(e,t,r){const n=js(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):k(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return k(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return k(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return k(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=xe.noon:n===0?a=xe.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=xe.evening:n>=12?a=xe.afternoon:n>=4?a=xe.morning:a=xe.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Z.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Z.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):k(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):k(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Z.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Z.s(e,t)},S:function(e,t){return Z.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return ht(n);case"XXXX":case"XX":return le(n);case"XXXXX":case"XXX":default:return le(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return ht(n);case"xxxx":case"xx":return le(n);case"xxxxx":case"xxx":default:return le(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+mt(n,":");case"OOOO":default:return"GMT"+le(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+mt(n,":");case"zzzz":default:return"GMT"+le(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return k(n,t.length)},T:function(e,t,r){const n=e.getTime();return k(n,t.length)}};function mt(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),o=n%60;return o===0?r+String(a):r+String(a)+t+k(o,2)}function ht(e,t){return e%60===0?(e>0?"-":"+")+k(Math.abs(e)/60,2):le(e,t)}function le(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=k(Math.trunc(n/60),2),o=k(n%60,2);return r+a+t+o}const ft=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Gt=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Cs=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return ft(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",ft(n,t)).replace("{{time}}",Gt(a,t))},ks={p:Gt,P:Cs},Os=/^D+$/,Es=/^Y+$/,Ms=["D","DD","YY","YYYY"];function Ts(e){return Os.test(e)}function Rs(e){return Es.test(e)}function Ws(e,t,r){const n=Is(e,t,r);if(console.warn(n),Ms.includes(e))throw new RangeError(n)}function Is(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ds=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$s=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ls=/^'([^]*?)'?$/,Fs=/''/g,As=/[a-zA-Z]/;function be(e,t,r){var u,m,f,x,h,b,y,w;const n=Ae(),a=(r==null?void 0:r.locale)??n.locale??vs,o=(r==null?void 0:r.firstWeekContainsDate)??((m=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(f=n.locale)==null?void 0:f.options)==null?void 0:x.firstWeekContainsDate)??1,c=(r==null?void 0:r.weekStartsOn)??((b=(h=r==null?void 0:r.locale)==null?void 0:h.options)==null?void 0:b.weekStartsOn)??n.weekStartsOn??((w=(y=n.locale)==null?void 0:y.options)==null?void 0:w.weekStartsOn)??0,i=Y(e);if(!qr(i))throw new RangeError("Invalid time value");let l=t.match($s).map(p=>{const v=p[0];if(v==="p"||v==="P"){const j=ks[v];return j(p,a.formatLong)}return p}).join("").match(Ds).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const v=p[0];if(v==="'")return{isToken:!1,value:zs(p)};if(ut[v])return{isToken:!0,value:p};if(v.match(As))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(l=a.localize.preprocessor(i,l));const d={firstWeekContainsDate:o,weekStartsOn:c,locale:a};return l.map(p=>{if(!p.isToken)return p.value;const v=p.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Rs(v)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Ts(v))&&Ws(v,t,String(e));const j=ut[v[0]];return j(i,v,a.localize,d)}).join("")}function zs(e){const t=e.match(Ls);return t?t[1].replace(Fs,"'"):e}function gt(e,t){return Dr(e,-t)}const qs={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},_s=(e,t,r)=>{let n;const a=qs[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"en "+n:"hace "+n:n},Ys={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Gs={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Hs={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Bs={date:pe({formats:Ys,defaultWidth:"full"}),time:pe({formats:Gs,defaultWidth:"full"}),dateTime:pe({formats:Hs,defaultWidth:"full"})},Us={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Vs={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Qs=(e,t,r,n)=>t.getHours()!==1?Vs[e]:Us[e],Xs={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Js={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Ks={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Zs={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},en={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},tn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},rn=(e,t)=>Number(e)+"º",sn={ordinalNumber:rn,era:X({values:Xs,defaultWidth:"wide"}),quarter:X({values:Js,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:X({values:Ks,defaultWidth:"wide"}),day:X({values:Zs,defaultWidth:"wide"}),dayPeriod:X({values:en,defaultWidth:"wide",formattingValues:tn,defaultFormattingWidth:"wide"})},nn=/^(\d+)(º)?/i,an=/\d+/i,on={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},cn={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},ln={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},dn={any:[/1/i,/2/i,/3/i,/4/i]},un={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},mn={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},hn={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},fn={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},gn={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},xn={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},pn={ordinalNumber:_t({matchPattern:nn,parsePattern:an,valueCallback:function(e){return parseInt(e,10)}}),era:J({matchPatterns:on,defaultMatchWidth:"wide",parsePatterns:cn,defaultParseWidth:"any"}),quarter:J({matchPatterns:ln,defaultMatchWidth:"wide",parsePatterns:dn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:J({matchPatterns:un,defaultMatchWidth:"wide",parsePatterns:mn,defaultParseWidth:"any"}),day:J({matchPatterns:hn,defaultMatchWidth:"wide",parsePatterns:fn,defaultParseWidth:"any"}),dayPeriod:J({matchPatterns:gn,defaultMatchWidth:"any",parsePatterns:xn,defaultParseWidth:"any"})},Me={code:"es",formatDistance:_s,formatLong:Bs,formatRelative:Qs,localize:sn,match:pn,options:{weekStartsOn:1,firstWeekContainsDate:1}};function ue(e){return new Intl.NumberFormat("es-UY",{style:"currency",currency:"UYU"}).format(e)}function Ht(e){const t=e.replace(/\D/g,""),r=t.startsWith("598")?t.slice(3):t;return r.length>=8?`+598 ${[r.slice(0,2),r.slice(2,5),r.slice(5)].join(" ")}`:`+598 ${r}`}function xt(e){const t=e.replace(/\D/g,""),r=t.startsWith("598")?t.slice(3):t;return/^[0-9]{8,9}$/.test(r)}function Bt(e,t){const r=e.replace(/\D/g,"");return`https://wa.me/${r.startsWith("598")?r:`598${r}`}?text=${encodeURIComponent(t)}`}function Ut(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Ut(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function bn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Ut(e))&&(n&&(n+=" "),n+=t);return n}const Ze="-",yn=e=>{const t=vn(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:c=>{const i=c.split(Ze);return i[0]===""&&i.length!==1&&i.shift(),Vt(i,t)||wn(c)},getConflictingClassGroupIds:(c,i)=>{const l=r[c]||[];return i&&n[c]?[...l,...n[c]]:l}}},Vt=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Vt(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(Ze);return(c=t.validators.find(({validator:i})=>i(o)))==null?void 0:c.classGroupId},pt=/^\[(.+)\]$/,wn=e=>{if(pt.test(e)){const t=pt.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},vn=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Nn(Object.entries(e.classGroups),r).forEach(([o,c])=>{Ge(c,n,o,t)}),n},Ge=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:bt(t,a);o.classGroupId=r;return}if(typeof a=="function"){if(jn(a)){Ge(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,c])=>{Ge(c,bt(t,o),r,n)})})},bt=(e,t)=>{let r=e;return t.split(Ze).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},jn=e=>e.isThemeGetter,Nn=(e,t)=>t?e.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([c,i])=>[t+c,i])):o);return[r,a]}):e,Pn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(o,c)=>{r.set(o,c),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let c=r.get(o);if(c!==void 0)return c;if((c=n.get(o))!==void 0)return a(o,c),c},set(o,c){r.has(o)?r.set(o,c):a(o,c)}}},Qt="!",Sn=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],o=t.length,c=i=>{const l=[];let d=0,u=0,m;for(let y=0;y<i.length;y++){let w=i[y];if(d===0){if(w===a&&(n||i.slice(y,y+o)===t)){l.push(i.slice(u,y)),u=y+o;continue}if(w==="/"){m=y;continue}}w==="["?d++:w==="]"&&d--}const f=l.length===0?i:i.substring(u),x=f.startsWith(Qt),h=x?f.substring(1):f,b=m&&m>u?m-u:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:h,maybePostfixModifierPosition:b}};return r?i=>r({className:i,parseClassName:c}):c},Cn=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},kn=e=>({cache:Pn(e.cacheSize),parseClassName:Sn(e),...yn(e)}),On=/\s+/,En=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,o=[],c=e.trim().split(On);let i="";for(let l=c.length-1;l>=0;l-=1){const d=c[l],{modifiers:u,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:x}=r(d);let h=!!x,b=n(h?f.substring(0,x):f);if(!b){if(!h){i=d+(i.length>0?" "+i:i);continue}if(b=n(f),!b){i=d+(i.length>0?" "+i:i);continue}h=!1}const y=Cn(u).join(":"),w=m?y+Qt:y,p=w+b;if(o.includes(p))continue;o.push(p);const v=a(b,h);for(let j=0;j<v.length;++j){const D=v[j];o.push(w+D)}i=d+(i.length>0?" "+i:i)}return i};function Mn(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Xt(t))&&(n&&(n+=" "),n+=r);return n}const Xt=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Xt(e[n]))&&(r&&(r+=" "),r+=t);return r};function Tn(e,...t){let r,n,a,o=c;function c(l){const d=t.reduce((u,m)=>m(u),e());return r=kn(d),n=r.cache.get,a=r.cache.set,o=i,i(l)}function i(l){const d=n(l);if(d)return d;const u=En(l,r);return a(l,u),u}return function(){return o(Mn.apply(null,arguments))}}const T=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Jt=/^\[(?:([a-z-]+):)?(.+)\]$/i,Rn=/^\d+\/\d+$/,Wn=new Set(["px","full","screen"]),In=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Dn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$n=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Ln=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,K=e=>ye(e)||Wn.has(e)||Rn.test(e),ee=e=>je(e,"length",Bn),ye=e=>!!e&&!Number.isNaN(Number(e)),qe=e=>je(e,"number",ye),Pe=e=>!!e&&Number.isInteger(Number(e)),An=e=>e.endsWith("%")&&ye(e.slice(0,-1)),N=e=>Jt.test(e),te=e=>In.test(e),zn=new Set(["length","size","percentage"]),qn=e=>je(e,zn,Kt),_n=e=>je(e,"position",Kt),Yn=new Set(["image","url"]),Gn=e=>je(e,Yn,Vn),Hn=e=>je(e,"",Un),Se=()=>!0,je=(e,t,r)=>{const n=Jt.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},Bn=e=>Dn.test(e)&&!$n.test(e),Kt=()=>!1,Un=e=>Ln.test(e),Vn=e=>Fn.test(e),Qn=()=>{const e=T("colors"),t=T("spacing"),r=T("blur"),n=T("brightness"),a=T("borderColor"),o=T("borderRadius"),c=T("borderSpacing"),i=T("borderWidth"),l=T("contrast"),d=T("grayscale"),u=T("hueRotate"),m=T("invert"),f=T("gap"),x=T("gradientColorStops"),h=T("gradientColorStopPositions"),b=T("inset"),y=T("margin"),w=T("opacity"),p=T("padding"),v=T("saturate"),j=T("scale"),D=T("sepia"),G=T("skew"),he=T("space"),E=T("translate"),R=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",N,t],P=()=>[N,t],_=()=>["",K,ee],H=()=>["auto",ye,N],fe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ge=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",N],De=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[ye,N];return{cacheSize:500,separator:":",theme:{colors:[Se],spacing:[K,ee],blur:["none","",te,N],brightness:U(),borderColor:[e],borderRadius:["none","","full",te,N],borderSpacing:P(),borderWidth:_(),contrast:U(),grayscale:L(),hueRotate:U(),invert:L(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[An,ee],inset:q(),margin:q(),opacity:U(),padding:P(),saturate:U(),scale:U(),sepia:L(),skew:U(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",N]}],container:["container"],columns:[{columns:[te]}],"break-after":[{"break-after":De()}],"break-before":[{"break-before":De()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...fe(),N]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pe,N]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",N]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Pe,N]}],"grid-cols":[{"grid-cols":[Se]}],"col-start-end":[{col:["auto",{span:["full",Pe,N]},N]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Se]}],"row-start-end":[{row:["auto",{span:[Pe,N]},N]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",N]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",N]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[he]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[he]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",N,t]}],"min-w":[{"min-w":[N,t,"min","max","fit"]}],"max-w":[{"max-w":[N,t,"none","full","min","max","fit","prose",{screen:[te]},te]}],h:[{h:[N,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[N,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[N,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[N,t,"auto","min","max","fit"]}],"font-size":[{text:["base",te,ee]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qe]}],"font-family":[{font:[Se]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",N]}],"line-clamp":[{"line-clamp":["none",ye,qe]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",K,N]}],"list-image":[{"list-image":["none",N]}],"list-style-type":[{list:["none","disc","decimal",N]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",K,ee]}],"underline-offset":[{"underline-offset":["auto",K,N]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",N]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",N]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...fe(),_n]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qn]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Gn]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...ge(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:ge()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...ge()]}],"outline-offset":[{"outline-offset":[K,N]}],"outline-w":[{outline:[K,ee]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:_()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[K,ee]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",te,Hn]}],"shadow-color":[{shadow:[Se]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",te,N]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[v]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",N]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",N]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",N]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Pe,N]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[G]}],"skew-y":[{"skew-y":[G]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",N]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",N]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",N]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[K,ee,qe]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Xn=Tn(Qn);function A(...e){return Xn(bn(e))}const V=[{code:"GRL",name:"General"},{code:"GFR",name:"Granja Fresco"},{code:"GRE",name:"Granja Refrigerado"},{code:"GTM",name:"Granja Terminado"},{code:"GPA",name:"Granja Panadería"},{code:"GSC",name:"Granja Seco"},{code:"HEL",name:"Heladería"},{code:"REF",name:"Refrigerado"},{code:"CON",name:"Congelado"},{code:"FRU",name:"Frutas"}],Jn=["CAJA","BOLSA","PAQUETE","KILO"],yt={name:"Panadería Nueva Río D'or",owner:"TEJAS DE LA CRUZ YOSBANY"};function se(e){const t=e.toString().padStart(5,"0"),r=parseInt(t.slice(0,2))-1;return r>=0&&r<V.length?V[r].code:V[0].code}function B(e){const t=e.toString().padStart(5,"0");return parseInt(t.slice(2))}function de(e,t){const r=V.findIndex(n=>n.code===e)+1;return parseInt(`${r.toString().padStart(2,"0")}${t.toString().padStart(3,"0")}`)}const wt=[{name:"Dashboard",to:"/",icon:cr},{name:"Proveedores",to:"/providers",icon:Ot},{name:"Productos",to:"/products",icon:ve},{name:"Órdenes",to:"/orders",icon:Et}];function Kn(){const{signOut:e}=Ke(),[t,r]=g.useState(!1);return s.jsx("header",{className:"bg-white border-b border-gray-200",children:s.jsxs("div",{className:"mx-auto px-4",children:[s.jsxs("div",{className:"flex h-16 items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-900 mr-4 whitespace-nowrap",children:"Gestión de Compras"}),s.jsx("button",{onClick:()=>r(!t),className:"md:hidden ml-2 p-2 rounded-md hover:bg-gray-100",children:t?s.jsx(Re,{className:"h-6 w-6"}):s.jsx(ir,{className:"h-6 w-6"})})]}),s.jsxs("nav",{className:"hidden md:flex space-x-4",children:[wt.map(n=>s.jsxs(ct,{to:n.to,className:({isActive:a})=>A("inline-flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",a?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[s.jsx(n.icon,{className:"mr-2 h-5 w-5"}),n.name]},n.name)),s.jsxs("button",{onClick:()=>e(),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors",children:[s.jsx(ot,{className:"mr-2 h-5 w-5"}),"Cerrar Sesión"]})]})]}),t&&s.jsxs("nav",{className:"md:hidden py-4 space-y-2",children:[wt.map(n=>s.jsxs(ct,{to:n.to,onClick:()=>r(!1),className:({isActive:a})=>A("flex items-center px-3 py-2 text-base font-medium rounded-md w-full transition-colors",a?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[s.jsx(n.icon,{className:"mr-3 h-5 w-5"}),n.name]},n.name)),s.jsxs("button",{onClick:()=>e(),className:"flex items-center px-3 py-2 text-base font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md w-full transition-colors",children:[s.jsx(ot,{className:"mr-3 h-5 w-5"}),"Cerrar Sesión"]})]})]})})}function Zn(){return s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(Kn,{}),s.jsx("main",{className:"flex-1 overflow-auto bg-gray-100 p-8",children:s.jsx(Wt,{})})]})}const C=({className:e,variant:t="primary",size:r="md",isLoading:n,children:a,...o})=>{const c="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",i={primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"hover:bg-gray-100 hover:text-gray-900"},l={sm:"h-9 px-3 text-sm",md:"h-10 px-4",lg:"h-11 px-8"};return s.jsxs("button",{className:A(c,i[t],l[r],e),disabled:n,...o,children:[n?s.jsx("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,a]})},F=It.forwardRef(({className:e,label:t,error:r,value:n,type:a,onChange:o,isCurrency:c,...i},l)=>{const[d,u]=g.useState(""),m=y=>{const w=y.toFixed(2).split(".");return w[0]=w[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),w.join(",")};g.useEffect(()=>{c&&typeof n=="number"&&u(m(n))},[n,c]);const f=y=>{var w;if(c){let p=y.target.value.replace(/[^\d.,]/g,"");if(p=p.replace(/,/g,"."),p.split(".").length-1>1){const G=p.split(".");p=G[0]+"."+G.slice(1).join("")}const j=p.split(".");((w=j[1])==null?void 0:w.length)>2&&(j[1]=j[1].slice(0,2),p=j.join("."));const D=parseFloat(p)||0;u(m(D)),o==null||o({...y,target:{...y.target,value:D.toString()}})}else if(a==="number"){const p=y.target.value;(p===""||!isNaN(Number(p)))&&(o==null||o(y))}else o==null||o(y)},x=y=>{var w;c&&typeof n=="number"&&u(n.toFixed(2).replace(".",",")),(w=i.onFocus)==null||w.call(i,y)},h=y=>{var w;c&&typeof n=="number"&&u(m(n)),(w=i.onBlur)==null||w.call(i,y)},b=c?d:a==="number"&&n===0&&!i.min?"":n;return s.jsxs("div",{className:"space-y-2",children:[t&&s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t}),s.jsxs("div",{className:"relative",children:[c&&s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),s.jsx("input",{className:A("block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500","focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500","disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",r&&"border-red-500 focus:border-red-500 focus:ring-red-500",c&&"pl-7 text-right",e),ref:l,value:b,onChange:f,onFocus:x,onBlur:h,type:c?"text":a,inputMode:c?"decimal":void 0,...i})]}),r&&s.jsx("p",{className:"text-sm text-red-600",children:r})]})});F.displayName="Input";function ea(){const{user:e,signIn:t}=Ke(),[r,n]=g.useState(!1),[a,o]=g.useState(""),[c,i]=g.useState("");if(e)return s.jsx(Rt,{to:"/",replace:!0});const l=async d=>{d.preventDefault(),n(!0);try{await t(a,c),S.success("¡Bienvenido!")}catch{S.error("Credenciales inválidas")}finally{n(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Órdenes de Compra"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicia sesión para continuar"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:l,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(F,{label:"Correo electrónico",type:"email",value:a,onChange:d=>o(d.target.value),required:!0,autoComplete:"email"}),s.jsx(F,{label:"Contraseña",type:"password",value:c,onChange:d=>i(d.target.value),required:!0,autoComplete:"current-password"})]}),s.jsx(C,{type:"submit",className:"w-full",isLoading:r,children:"Iniciar sesión"})]})]})})}function Ie(){const[e,t]=g.useState([]),[r,n]=g.useState(!0);return g.useEffect(()=>{const l=W(I,"providers"),d=Oe(l,u=>{const m=u.val(),f=m?Object.entries(m).map(([x,h])=>({id:x,...h})):[];t(f),n(!1)});return()=>d()},[]),{providers:e,loading:r,addProvider:async l=>{const d=W(I,"providers");await Fe(d,l)},updateProvider:async(l,d)=>{const u=W(I,`providers/${l}`);await $t(u,d)},deleteProvider:async l=>{const d=W(I,`providers/${l}`);await Ve(d)},getProvider:async l=>{const d=W(I,`providers/${l}`),u=await me(d);return u.exists()?{id:l,...u.val()}:null}}}function O({children:e,className:t,isSelected:r,onClick:n}){return s.jsx("div",{className:A("bg-white rounded-lg transition-all duration-200 h-full",r?"border-2 border-blue-500 shadow-sm ring-2 ring-blue-100 bg-blue-50":"border border-gray-200 shadow-sm hover:border-gray-300 hover:shadow",n&&"cursor-pointer",t),onClick:n,children:e})}O.Header=function({children:t,className:r}){return s.jsx("div",{className:A("p-3 sm:p-4 space-y-2",r),children:t})};O.Content=function({children:t,className:r}){return s.jsx("div",{className:A("px-3 sm:px-4 pb-3 sm:pb-4",r),children:t})};O.Footer=function({children:t,className:r}){return s.jsx("div",{className:A("px-3 sm:px-4 py-2 sm:py-3 border-t bg-gray-50/50 rounded-b-lg",r),children:t})};O.Title=function({children:t,className:r}){return s.jsx("h3",{className:A("text-base sm:text-lg font-semibold text-gray-900 line-clamp-2",r),children:t})};O.Grid=function({children:t,className:r}){return s.jsx("div",{className:A("grid grid-cols-2 gap-2 text-sm text-gray-600",r),children:t})};async function ta(e,t){const r=W(I,e),n=Fe(r);return await We(n,t),n.key}async function ra(e,t,r){const n=W(I,`${e}/${t}`);await We(n,r)}async function sa(e,t){const r=W(I,`${e}/${t}`);await Ve(r)}async function Te(e){const t=W(I,e),r=await me(t);return r.exists()?Object.entries(r.val()).map(([n,a])=>({id:n,...a})):[]}async function et(e,t,r){const n=W(I,e),a=Qe(n,Je(t),Xe(r)),o=await me(a);return o.exists()?Object.entries(o.val()).map(([c,i])=>({id:c,...i})):[]}const na=["orders","products","providers","packaging"];async function aa(e){try{const t=W(I,e),r=await me(t);return{name:e,exists:r.exists()}}catch(t){return{name:e,exists:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function oa(e){const t=W(I,e);await We(t,{})}async function ia(){try{console.log("Starting collections initialization...");const t=(await Promise.all(na.map(r=>aa(r)))).filter(r=>!r.exists).map(async({name:r})=>{try{await oa(r),console.log(`Collection "${r}" created successfully`)}catch(n){console.error(`Failed to create collection "${r}":`,n)}});await Promise.all(t),console.log("Collections initialization completed")}catch(e){throw console.error("Failed to initialize collections:",e),e}}ia().catch(e=>{console.error("Critical error during collections initialization:",e)});const re="orders",Ce={subscribeToProviderOrders(e,t){const r=W(I,re),n=Qe(r,Je("providerId"),Xe(e));return Oe(n,o=>{if(!o.exists()){t([]);return}const i=Object.entries(o.val()).map(([l,d])=>({id:l,...d})).sort((l,d)=>new Date(d.date).getTime()-new Date(l.date).getTime());t(i)})},async getByProvider(e){try{return(await et(re,"providerId",e)).sort((r,n)=>new Date(n.date).getTime()-new Date(r.date).getTime())}catch(t){return console.error("Error fetching provider orders:",t),[]}},async create(e){try{return await ta(re,e)}catch(t){throw console.error("Error creating order:",t),t}},async update(e,t){try{const r=W(I,`${re}/${e}`),n=await me(r);if(!n.exists())throw new Error("Order not found");const o={...n.val(),...t};await ra(re,e,o)}catch(r){throw console.error("Error updating order:",r),r}},async delete(e){try{await sa(re,e)}catch(t){throw console.error("Error deleting order:",t),t}}};async function ca(e){try{return(await et(re,"providerId",e)).sort((r,n)=>new Date(n.date).getTime()-new Date(r.date).getTime())}catch(t){return console.error("Error fetching provider orders:",t),[]}}async function la(e){try{const t=await et(re,"providerId",e),r=new Date;return r.setHours(0,0,0,0),t.filter(n=>{const a=new Date(n.date);return a.setHours(0,0,0,0),a.getTime()===r.getTime()}).length}catch(t){return console.error("Error fetching today orders count:",t),0}}function da(e){const[t,r]=g.useState(0),[n,a]=g.useState(!0),o=g.useCallback(async()=>{if(!e.length){r(0),a(!1);return}const c=e.filter(i=>i.id);if(!c.length){r(0),a(!1);return}try{const i=await Promise.all(c.map(l=>la(l.id)));r(i.reduce((l,d)=>l+d,0))}catch(i){console.error("Error fetching today orders count:",i),r(0)}finally{a(!1)}},[e]);return g.useEffect(()=>{let c=!0;return(async()=>{c&&await o()})(),()=>{c=!1}},[o]),{count:t,loading:n}}const tt="orders",Zt="products";async function ua(){try{const e=await Te(tt);if(!e||e.length===0)return console.warn("No se encontraron órdenes en la última semana"),[];const t=new Date,r=new Date(t.getTime()-7*24*60*60*1e3),a=e.filter(o=>{const c=new Date(o.date);return c>=r&&c<=t}).reduce((o,c)=>{const i=new Date(c.date).toISOString().split("T")[0];return o[i]=(o[i]||0)+1,o},{});return Object.entries(a).map(([o,c])=>({date:o,count:c})).sort((o,c)=>c.date.localeCompare(o.date))}catch(e){return console.error("Error al obtener el conteo semanal de órdenes:",e instanceof Error?e.message:e),[]}}async function ma(){try{const[e,t]=await Promise.all([Te(tt),Te(Zt)]);if(!e||e.length===0)return console.warn("No se encontraron órdenes"),[];if(!t||t.length===0)return console.warn("No se encontraron productos"),[];const r=new Map;return e.forEach(a=>{a.items.forEach(o=>{const c=r.get(o.productId)||{quantity:0,orders:new Set};c.quantity+=o.quantity,c.orders.add(a.id),r.set(o.productId,c)})}),Array.from(r.entries()).map(([a,o])=>{const c=t.find(i=>i.id===a);return c?{id:a,name:c.name,totalQuantity:o.quantity,orderCount:o.orders.size}:(console.warn(`Producto no encontrado para el ID: ${a}`),null)}).filter(a=>a!==null).sort((a,o)=>o.totalQuantity-a.totalQuantity).slice(0,10)}catch(e){return console.error("Error al obtener los productos más vendidos:",e instanceof Error?e.message:e),[]}}async function ha(){try{const[e,t]=await Promise.all([Te(tt),Te(Zt)]);if(!e||e.length===0)return console.warn("No se encontraron órdenes"),[];if(!t||t.length===0)return console.warn("No se encontraron productos"),[];const r=new Map;return e.forEach(a=>{new Set(a.items.map(c=>c.productId)).forEach(c=>{r.set(c,(r.get(c)||0)+1)})}),Array.from(r.entries()).map(([a,o])=>{const c=t.find(i=>i.id===a);return c?{id:a,name:c.name,frequency:o}:(console.warn(`Producto no encontrado para el ID: ${a}`),null)}).filter(a=>a!==null).sort((a,o)=>o.frequency-a.frequency).slice(0,10)}catch(e){return console.error("Error al obtener la frecuencia de productos:",e instanceof Error?e.message:e),[]}}function fa(){const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,o]=g.useState([]),[c,i]=g.useState(!0),[l,d]=g.useState(null);return g.useEffect(()=>{let u=!0;return(async()=>{try{i(!0);const[f,x,h]=await Promise.all([ua(),ma(),ha()]);if(!u)return;t(f),n(x),o(h),d(null)}catch(f){if(console.error("Error fetching analytics:",f),!u)return;d("Error al cargar los datos analíticos")}finally{u&&i(!1)}})(),()=>{u=!1}},[]),{weeklyOrders:e,topProducts:r,productFrequency:a,loading:c,error:l}}function _e({title:e,icon:t,children:r,loading:n,className:a,onClick:o}){return s.jsx(O,{className:a,onClick:o,children:s.jsx(O.Header,{className:"!p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:e}),n?s.jsx("div",{className:"h-6 w-24 bg-gray-200 rounded animate-pulse"}):s.jsx("div",{className:"break-words",children:r})]}),s.jsx("div",{className:"flex-shrink-0 p-2 bg-blue-100 rounded-lg",children:t})]})})})}function oe({isOpen:e,onClose:t,title:r,children:n,className:a}){return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:t}),s.jsxs("div",{className:A("relative transform overflow-hidden rounded-lg bg-white p-6 text-left shadow-xl transition-all w-full max-w-md",a),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:r}),s.jsx("button",{onClick:t,className:"rounded-full p-1 hover:bg-gray-100",children:s.jsx(Re,{className:"w-5 h-5"})})]}),n]})]})}):null}function ga({isOpen:e,onClose:t,products:r}){return s.jsx(oe,{isOpen:e,onClose:t,title:"Top 10 Productos Más Comprados",children:s.jsx("div",{className:"space-y-4",children:r.map((n,a)=>s.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white rounded-lg border transition-colors hover:bg-gray-50",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 font-bold",children:a+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium text-gray-900 truncate",children:n.name}),s.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ve,{className:"w-4 h-4"}),s.jsxs("span",{children:[n.totalQuantity," unidades"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"w-4 h-4"}),s.jsxs("span",{children:[n.orderCount," órdenes"]})]})]})]})]},n.id))})})}function er(e){const[t,r]=g.useState([]),[n,a]=g.useState(!0);return g.useEffect(()=>{let o=!0;return e?(async()=>{try{const i=await ca(e);o&&r(i)}catch(i){console.error("Error fetching provider orders:",i)}finally{o&&a(!1)}})():(r([]),a(!1)),()=>{o=!1}},[e]),{orders:t,loading:n}}function tr(e){return Ye(e)}function rr(e){return _r(e)}const xa=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function pa(e,t){if(!t.length)return e;let r=gt(e,1),n=7;for(;n>0;){const a=xa[r.getDay()];if(t.includes(a))return r;r=gt(r,1),n--}return e}function ba({provider:e}){const t=Dt(),{orders:r}=er(e.id),n=new Date,a=tr(n),o=rr(n),c=r.filter(l=>{const d=new Date(l.date);return d>=a&&d<=o}).length,i=()=>{c>0?t(`/orders?provider=${e.id}`):t(`/orders?provider=${e.id}&new=true`)};return s.jsx("li",{className:"py-3",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("button",{onClick:i,className:"font-medium text-gray-900 hover:text-blue-600 text-left transition-colors",children:e.legalName&&e.legalName!==e.commercialName?`${e.legalName} (${e.commercialName})`:e.commercialName}),s.jsx("div",{className:"flex items-center gap-3",children:c>0?s.jsxs("span",{className:"text-sm font-medium text-blue-600 whitespace-nowrap",children:[c," ",c===1?"pedido":"pedidos"]}):s.jsx("span",{className:"text-sm font-medium text-amber-600 whitespace-nowrap",children:"Pendiente"})})]})})}function ya({provider:e}){const{orders:t}=er(e.id),n=pa(new Date,e.orderDays||[]),a=t.filter(c=>{const i=new Date(c.date);return i>=tr(n)&&i<=rr(n)}),o=a.reduce((c,i)=>c+i.total,0);return s.jsx("li",{className:"py-3",children:s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:e.legalName&&e.legalName!==e.commercialName?`${e.legalName} (${e.commercialName})`:e.commercialName}),s.jsx("div",{className:"flex items-center gap-3",children:a.length>0?s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600",children:ue(o)}),s.jsx("div",{className:"text-xs text-gray-500",children:be(n,"d 'de' MMM",{locale:Me})})]}):s.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Sin pedidos previos"})})]})})}const wa={lunes:"monday",martes:"tuesday",miércoles:"wednesday",jueves:"thursday",viernes:"friday",sábado:"saturday",domingo:"sunday"};function va(){var b;const{providers:e}=Ie(),t=new Date,r=wa[be(t,"EEEE",{locale:Me})],{count:n,loading:a}=da(e),{weeklyOrders:o,topProducts:c,productFrequency:i,loading:l}=fa(),[d,u]=g.useState(!1),m=e.filter(y=>{var w;return(w=y.orderDays)==null?void 0:w.includes(r)}),f=((b=o[0])==null?void 0:b.count)||0,x=c[0],h=i[0];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[s.jsx(O,{children:s.jsx(O.Header,{className:"!p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Proveedores"}),s.jsx("h3",{className:"text-2xl font-bold mt-1",children:e.length})]}),s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(Ot,{className:"w-5 h-5 text-blue-600"})})]})})}),s.jsx(O,{children:s.jsx(O.Header,{className:"!p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pedidos Hoy"}),s.jsx("h3",{className:"text-2xl font-bold mt-1",children:a?s.jsx("span",{className:"text-gray-400",children:"..."}):n})]}),s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(ve,{className:"w-5 h-5 text-purple-600"})})]})})}),s.jsx(O,{children:s.jsx(O.Header,{className:"!p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold capitalize",children:be(t,"EEEE",{locale:Me})}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:be(t,"dd/MM/yyyy")})]}),s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(lr,{className:"w-5 h-5 text-orange-600"})})]})})}),s.jsx(_e,{title:"Órdenes Semanales",icon:s.jsx(dr,{className:"w-5 h-5 text-blue-600"}),loading:l,children:s.jsx("h3",{className:"text-2xl font-bold mt-1",children:f})}),s.jsx(_e,{title:"Producto Más Comprado",icon:s.jsx(ur,{className:"w-5 h-5 text-green-600"}),loading:l,className:"lg:col-span-2 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>u(!0),children:x&&s.jsxs("div",{className:"mt-1",children:[s.jsx("h3",{className:"text-lg font-bold break-words",children:x.name}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[x.totalQuantity," unidades en ",x.orderCount," órdenes"]})]})}),s.jsx(_e,{title:"Producto Más Frecuente",icon:s.jsx(mr,{className:"w-5 h-5 text-indigo-600"}),loading:l,className:"lg:col-span-2",children:h&&s.jsxs("div",{className:"mt-1",children:[s.jsx("h3",{className:"text-lg font-bold break-words",children:h.name}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Pedido ",h.frequency," veces"]})]})})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(O,{children:[s.jsx(O.Header,{children:s.jsx(O.Title,{children:"Hoy se deben realizar pedidos a:"})}),s.jsx(O.Content,{children:m.length>0?s.jsx("ul",{className:"divide-y",children:m.map(y=>s.jsx(ba,{provider:y},y.id))}):s.jsx("p",{className:"text-gray-500 py-3",children:"No hay pedidos programados para hoy"})})]}),s.jsxs(O,{children:[s.jsx(O.Header,{children:s.jsx(O.Title,{children:"Hoy se deben recibir pedidos de:"})}),s.jsx(O.Content,{children:m.length>0?s.jsx("ul",{className:"divide-y",children:m.map(y=>s.jsx(ya,{provider:y},y.id))}):s.jsx("p",{className:"text-gray-500 py-3",children:"No hay entregas programadas para hoy"})})]})]}),s.jsx(ga,{isOpen:d,onClose:()=>u(!1),products:c})]})}const vt=[{value:"monday",label:"Lunes"},{value:"tuesday",label:"Martes"},{value:"wednesday",label:"Miércoles"},{value:"thursday",label:"Jueves"},{value:"friday",label:"Viernes"},{value:"saturday",label:"Sábado"},{value:"sunday",label:"Domingo"}];function ja({initialData:e,onSubmit:t,onCancel:r,isLoading:n}){const[a,o]=It.useState({commercialName:(e==null?void 0:e.commercialName)||"",legalName:(e==null?void 0:e.legalName)||"",rut:(e==null?void 0:e.rut)||"",phone:(e==null?void 0:e.phone)||"",deliveryDays:(e==null?void 0:e.deliveryDays)||[],orderDays:(e==null?void 0:e.orderDays)||[]}),[c,i]=g.useState(""),l=f=>{let x=f.target.value;x=x.replace(/\D/g,""),x.startsWith("598")&&(x=x.slice(3)),x=x.slice(0,9),o(h=>({...h,phone:x})),x&&!xt(x)?i("Ingrese un número de celular válido de Uruguay (8 o 9 dígitos)"):i("")},d=async f=>{if(f.preventDefault(),a.phone&&!xt(a.phone)){i("Ingrese un número de celular válido de Uruguay (8 o 9 dígitos)");return}await t(a)},u=(f,x)=>{o(h=>{var b,y;return{...h,[x==="delivery"?"deliveryDays":"orderDays"]:(b=h[x==="delivery"?"deliveryDays":"orderDays"])!=null&&b.includes(f)?(y=h[x==="delivery"?"deliveryDays":"orderDays"])==null?void 0:y.filter(w=>w!==f):[...h[x==="delivery"?"deliveryDays":"orderDays"]||[],f]}})},m=a.phone?Ht(a.phone):"";return s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsx(F,{label:"Nombre comercial",value:a.commercialName,onChange:f=>o(x=>({...x,commercialName:f.target.value})),required:!0}),s.jsx(F,{label:"Razón social",value:a.legalName,onChange:f=>o(x=>({...x,legalName:f.target.value}))}),s.jsx(F,{label:"RUT",value:a.rut,onChange:f=>o(x=>({...x,rut:f.target.value}))}),s.jsxs("div",{children:[s.jsx(F,{label:"Celular",type:"tel",value:a.phone,onChange:l,error:c,placeholder:"93609319"}),a.phone&&s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Se guardará como: ",m]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Días de pedido"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-7 gap-2",children:vt.map(({value:f,label:x})=>{var h;return s.jsx("button",{type:"button",onClick:()=>u(f,"order"),className:`
                  px-3 py-2 text-sm font-medium rounded-md transition-colors
                  ${(h=a.orderDays)!=null&&h.includes(f)?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-gray-50 text-gray-600 hover:bg-gray-100"}
                `,children:x},f)})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Días de entrega"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-7 gap-2",children:vt.map(({value:f,label:x})=>{var h;return s.jsx("button",{type:"button",onClick:()=>u(f,"delivery"),className:`
                  px-3 py-2 text-sm font-medium rounded-md transition-colors
                  ${(h=a.deliveryDays)!=null&&h.includes(f)?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-50 text-gray-600 hover:bg-gray-100"}
                `,children:x},f)})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(C,{type:"button",variant:"outline",onClick:r,children:"Cancelar"}),s.jsxs(C,{type:"submit",isLoading:n,children:[e?"Actualizar":"Crear"," Proveedor"]})]})]})}function Na(){const{providers:e,loading:t,addProvider:r,updateProvider:n,deleteProvider:a}=Ie(),[o,c]=g.useState(!1),[i,l]=g.useState(null),[d,u]=g.useState(!1),[m,f]=g.useState(null),x=async v=>{u(!0);try{i?(await n(i.id,v),S.success("Proveedor actualizado exitosamente")):(await r(v),S.success("Proveedor creado exitosamente")),y()}catch{S.error("Ocurrió un error al guardar el proveedor")}finally{u(!1)}},h=async v=>{f(v)},b=async()=>{if(m)try{await a(m.id),S.success("Proveedor eliminado exitosamente"),f(null)}catch{S.error("Ocurrió un error al eliminar el proveedor")}},y=()=>{c(!1),l(null)},w=v=>{l(v),c(!0)},p=()=>{if(i){const v=oe({isOpen:!0,onClose:()=>{},title:"Advertencia",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-amber-600",children:"Hay un proveedor en edición. ¿Desea cancelar los cambios y crear uno nuevo?"}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(C,{variant:"outline",onClick:()=>v.close(),children:"Cancelar"}),s.jsx(C,{onClick:()=>{l(null),c(!0),v.close()},children:"Continuar"})]})]})})}else c(!0)};return t?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o||i?s.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4",children:[i?"Editar":"Nuevo"," Proveedor"]}),s.jsx(ja,{initialData:i||void 0,onSubmit:x,onCancel:y,isLoading:d})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-end",children:s.jsxs(C,{onClick:p,children:[s.jsx(He,{className:"w-4 h-4 mr-2"}),"Nuevo Proveedor"]})}),s.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(v=>s.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold break-words",children:v.commercialName}),v.legalName&&s.jsx("p",{className:"text-sm text-gray-600 break-words",children:v.legalName}),v.rut&&s.jsxs("p",{className:"text-sm text-gray-600",children:["RUT: ",v.rut]}),v.phone&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Celular: ",Ht(v.phone)]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(C,{variant:"outline",size:"sm",onClick:()=>w(v),children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),"Editar"]}),s.jsxs(C,{variant:"outline",size:"sm",onClick:()=>h(v),children:[s.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]}),v.phone&&s.jsx("a",{href:Bt(v.phone,""),target:"_blank",rel:"noopener noreferrer",children:s.jsx(C,{variant:"ghost",size:"sm",children:s.jsx(fr,{className:"w-4 h-4"})})})]})]},v.id))}),s.jsx(oe,{isOpen:!!m,onClose:()=>f(null),title:"Eliminar proveedor",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-amber-600",children:['¿Está seguro que desea eliminar el proveedor "',m==null?void 0:m.commercialName,'"?']}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(C,{variant:"outline",onClick:()=>f(null),children:"Cancelar"}),s.jsx(C,{onClick:b,children:"Eliminar"})]})]})})]})}function sr({options:e,value:t,onChange:r,placeholder:n="Seleccionar...",className:a}){const[o,c]=g.useState(!1),[i,l]=g.useState(""),d=g.useRef(null),u=g.useRef(null);g.useEffect(()=>{const h=b=>{d.current&&!d.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const m=e.filter(h=>h.label.toLowerCase().includes(i.toLowerCase())),f=e.find(h=>h.value===t),x=h=>{r(h.value),l(""),c(!1)};return s.jsxs("div",{className:A("relative",a),ref:d,children:[s.jsx("div",{className:A("flex items-center border rounded-md bg-white",o?"border-blue-500 ring-2 ring-blue-200":"border-gray-300","cursor-pointer"),onClick:()=>{c(!o),!o&&u.current&&u.current.focus()},children:o?s.jsxs("div",{className:"flex-1 flex items-center px-3",children:[s.jsx(Be,{className:"w-4 h-4 text-gray-400 mr-2"}),s.jsx("input",{ref:u,type:"text",className:"w-full py-2 outline-none",value:i,onChange:h=>l(h.target.value),placeholder:"Buscar...",onClick:h=>h.stopPropagation()})]}):s.jsx("div",{className:"flex-1 p-2 px-3",children:f?f.label:n})}),o&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:m.length>0?m.map(h=>s.jsx("div",{className:A("px-3 py-2 cursor-pointer hover:bg-gray-100",h.value===t&&"bg-blue-50"),onClick:()=>x(h),children:h.label},h.value)):s.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No se encontraron resultados"})})]})}function rt(e){const[t,r]=g.useState([]),[n,a]=g.useState(!0);return g.useEffect(()=>{if(!e){r([]),a(!1);return}const l=W(I,"products"),d=Qe(l,Je("providerId"),Xe(e)),u=Oe(d,m=>{const f=m.val(),x=f?Object.entries(f).map(([h,b])=>({id:h,...b})):[];r(x),a(!1)});return()=>u()},[e]),{products:t,loading:n,addProduct:async l=>{const d=W(I,"products");await Fe(d,l)},updateProduct:async(l,d)=>{const u=W(I,`products/${l}`);await $t(u,d)},deleteProduct:async l=>{const d=W(I,`products/${l}`);await Ve(d)}}}function Q(e){const t=e.toString().padStart(5,"0"),r=parseInt(t.slice(0,2))-1;return r>=0&&r<V.length?V[r].code:V[0].code}function ne(e){const t=e.toString().padStart(5,"0");return parseInt(t.slice(2))}function st(e,t){const r=V.findIndex(n=>n.code===e)+1;return parseInt(`${r.toString().padStart(2,"0")}${t.toString().padStart(3,"0")}`)}function ie(e){const t=Q(e),r=ne(e);return`${t}-${r.toString().padStart(3,"0")}`}function jt(e,t){return e.filter(r=>Q(r.order)===t).sort((r,n)=>ne(r.order)-ne(n.order))}const Nt={GRL:{bg:"bg-gray-100",border:"border-gray-200",text:"text-gray-800"},GFR:{bg:"bg-green-100",border:"border-green-200",text:"text-green-800"},GRE:{bg:"bg-emerald-100",border:"border-emerald-200",text:"text-emerald-800"},GTM:{bg:"bg-teal-100",border:"border-teal-200",text:"text-teal-800"},GPA:{bg:"bg-amber-100",border:"border-amber-200",text:"text-amber-800"},GSC:{bg:"bg-orange-100",border:"border-orange-200",text:"text-orange-800"},HEL:{bg:"bg-blue-100",border:"border-blue-200",text:"text-blue-800"},REF:{bg:"bg-indigo-100",border:"border-indigo-200",text:"text-indigo-800"},CON:{bg:"bg-purple-100",border:"border-purple-200",text:"text-purple-800"},FRU:{bg:"bg-rose-100",border:"border-rose-200",text:"text-rose-800"}};function we(e){return Nt[e]||Nt.GRL}function nt({isOpen:e,onClose:t,product:r,products:n,onOrderChange:a}){const[o,c]=g.useState(Q(r.order)),[i,l]=g.useState(ne(r.order)),[d,u]=g.useState(!1),m=jt(n,o).filter(j=>j.id!==r.id),f=m.length+1,x=i>1?m[i-2]:null,h=i<=m.length?m[i-1]:null,b=we(Q(r.order)),y=we(o),w=j=>{const D=j.target.value;c(D),l(jt(n,D).length+1)},p=j=>{const D=j==="prev"?Math.max(1,i-1):Math.min(f,i+1);l(D)},v=async()=>{if(!d){u(!0);try{const j=st(o,i);await a(r,j),t()}catch(j){console.error("Error updating order:",j)}finally{u(!1)}}};return s.jsx(oe,{isOpen:e,onClose:t,title:"Cambiar orden del producto",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:`rounded-lg p-4 border ${b.bg} ${b.border}`,children:[s.jsx("div",{className:`text-sm font-medium ${b.text}`,children:r.name}),s.jsxs("div",{className:`text-sm mt-1 ${b.text}`,children:["Orden actual: ",ie(r.order)]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sector"}),s.jsx("select",{value:o,onChange:w,className:"w-full rounded-md border border-gray-300 px-3 py-2",disabled:d,children:V.map(j=>{const D=we(j.code);return s.jsxs("option",{value:j.code,className:`${D.bg}`,children:[j.code," - ",j.name]},j.code)})})]}),s.jsx("div",{className:`rounded-lg border p-4 ${y.bg} ${y.border}`,children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx("button",{type:"button",onClick:()=>p("prev"),disabled:i<=1||d,className:`
                h-12 w-12 rounded-full flex items-center justify-center transition-colors
                ${i<=1||d?"bg-white/50 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-white/80"}
              `,children:s.jsx(gr,{className:"w-6 h-6"})}),s.jsx("div",{className:"flex-1",children:s.jsx("div",{className:"bg-white rounded-lg py-3 shadow-sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-2xl font-bold",children:i}),s.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["de ",f]})]})})}),s.jsx("button",{type:"button",onClick:()=>p("next"),disabled:i>=f||d,className:`
                h-12 w-12 rounded-full flex items-center justify-center transition-colors
                ${i>=f||d?"bg-white/50 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-white/80"}
              `,children:s.jsx(xr,{className:"w-6 h-6"})})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:`rounded-lg p-4 ${x?"border bg-white":"bg-gray-50 border-2 border-dashed"}`,children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Anterior"}),x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:x.name}),s.jsx("div",{className:`text-xs ${y.text}`,children:ne(x.order)})]}):s.jsx("div",{className:"text-sm text-gray-400",children:"No hay producto anterior"})]}),s.jsxs("div",{className:`rounded-lg p-4 ${h?"border bg-white":"bg-gray-50 border-2 border-dashed"}`,children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Siguiente"}),h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:h.name}),s.jsx("div",{className:`text-xs ${y.text}`,children:ne(h.order)})]}):s.jsx("div",{className:"text-sm text-gray-400",children:"No hay producto siguiente"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(C,{type:"button",variant:"outline",onClick:t,disabled:d,children:"Cancelar"}),s.jsx(C,{onClick:v,disabled:d,isLoading:d,children:"Confirmar"})]})]})})}function Pa({product:e,products:t,onEdit:r,onDelete:n,onOrderChange:a,isSelected:o}){const[c,i]=g.useState(!1),l=we(Q(e.order));return s.jsxs(s.Fragment,{children:[s.jsxs(O,{isSelected:o,children:[s.jsx(O.Header,{className:"!p-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 break-words mb-2",children:e.name}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(pr,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),s.jsxs("span",{className:"truncate",children:["SKU: ",e.sku]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ve,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),s.jsxs("span",{className:"truncate",children:[e.purchasePackaging," → ",e.salePackaging]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Tt,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),s.jsxs("span",{children:["Stock: ",e.minPackageStock," - ",e.desiredStock]})]}),s.jsx("div",{className:"col-span-2",children:s.jsxs("button",{onClick:()=>i(!0),className:`
                      inline-flex items-center px-2 py-1 rounded-md text-sm transition-colors
                      ${l.bg} ${l.border} ${l.text}
                      hover:opacity-90
                    `,children:[s.jsx(Ue,{className:"w-4 h-4 mr-1.5"}),ie(e.order)]})})]})]}),s.jsx("span",{className:"text-lg font-bold text-blue-600 whitespace-nowrap",children:ue(e.price)})]})}),s.jsxs(O.Footer,{className:"flex flex-wrap gap-2 justify-end",children:[s.jsx(C,{variant:"outline",size:"sm",onClick:()=>r(e),children:"Editar"}),s.jsx(C,{variant:"outline",size:"sm",onClick:()=>n(e),className:"hover:bg-red-50 hover:text-red-600",children:"Eliminar"})]})]}),s.jsx(nt,{isOpen:c,onClose:()=>i(!1),product:e,products:t,onOrderChange:a})]})}function Sa(e){const[t,r]=g.useState(!1);return g.useEffect(()=>{const n=window.matchMedia(e);r(n.matches);const a=o=>{r(o.matches)};return n.addEventListener("change",a),()=>n.removeEventListener("change",a)},[e]),t}function Ca({products:e,onEdit:t,onDelete:r,onOrderChange:n,customRender:a}){const o=Sa("(min-width: 1024px)"),c=[...e].sort((l,d)=>l.order-d.order),i=l=>a?a(l):s.jsx(Pa,{product:l,products:c,onEdit:t,onDelete:r,onOrderChange:n},l.id);return o?s.jsx("div",{className:"grid grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-3",children:c.map(l=>s.jsx("div",{children:i(l)},l.id))}):s.jsx("div",{className:"space-y-3",children:c.map(l=>s.jsx("div",{children:i(l)},l.id))})}function Pt({label:e,value:t,onChange:r,onRemove:n,suggestions:a=[],className:o,error:c,...i}){const[l,d]=g.useState(""),[u,m]=g.useState(!1),f=g.useRef(null),x=g.useRef(null);g.useEffect(()=>{const w=p=>{x.current&&!x.current.contains(p.target)&&m(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const h=w=>{d(w.target.value.toUpperCase()),m(!0)},b=w=>{w.key==="Enter"&&l.trim()&&(w.preventDefault(),r(l.trim()),d(""),m(!1))},y=w=>{var p;r(w),d(""),m(!1),(p=f.current)==null||p.focus()};return s.jsxs("div",{ref:x,className:"relative",children:[e&&s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),s.jsx("div",{className:A("flex items-center min-h-[42px] w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5","focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500",c&&"border-red-500 focus-within:border-red-500 focus-within:ring-red-500",o),children:t?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800 mr-2",children:[t,s.jsx("button",{type:"button",onClick:n,className:"ml-1 p-0.5 hover:bg-blue-200 rounded-full transition-colors",children:s.jsx(Re,{className:"w-3 h-3"})})]}):s.jsx("input",{ref:f,type:"text",className:"flex-1 outline-none bg-transparent text-gray-900 placeholder-gray-500 text-sm",value:l,onChange:h,onKeyDown:b,onFocus:()=>m(!0),...i})}),c&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:c}),u&&!t&&a.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:a.filter(w=>w.includes(l.toUpperCase())).map(w=>s.jsx("button",{type:"button",className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>y(w),children:w},w))})]})}function ka(){const[e,t]=g.useState([]),[r,n]=g.useState(!0);return g.useEffect(()=>{const o=W(I,"packaging"),c=W(I,"products"),i=Oe(o,d=>{const u=d.val(),m=u?Object.values(u):[],f=[...new Set([...Jn,...m])];t(f.sort()),n(!1)}),l=Oe(c,d=>{const u=d.val();if(u){const m=Object.values(u).map(f=>f.packaging).filter(Boolean).map(f=>f.toUpperCase());t(f=>[...new Set([...f,...m])].sort())}});return()=>{i(),l()}},[]),{packagingSuggestions:e,loading:r,addPackaging:async o=>{const c=W(I,"packaging"),i=Fe(c);await We(i,o.toUpperCase())}}}function Oa(e,t){return e>t?{field:"minPackageStock",message:"El stock mínimo no puede ser mayor al stock deseado"}:null}function Ea(e){S.error(e.message)}function nr({providerId:e,initialData:t,onSubmit:r,onCancel:n,isLoading:a}){var b,y,w;Ie();const{packagingSuggestions:o,addPackaging:c}=ka(),{products:i}=rt(e),[l,d]=g.useState(!1),[u,m]=g.useState({name:((b=t==null?void 0:t.name)==null?void 0:b.toUpperCase())||"",sku:(t==null?void 0:t.sku)||"",purchasePackaging:((y=t==null?void 0:t.purchasePackaging)==null?void 0:y.toUpperCase())||"",salePackaging:((w=t==null?void 0:t.salePackaging)==null?void 0:w.toUpperCase())||"",order:(t==null?void 0:t.order)||(()=>{const p=V[0].code,v=i.filter(j=>Q(j.order)===p);return st(p,v.length+1)})(),price:(t==null?void 0:t.price)||0,desiredStock:(t==null?void 0:t.desiredStock)||0,minPackageStock:(t==null?void 0:t.minPackageStock)||0,providerId:(t==null?void 0:t.providerId)||e}),f=async p=>{p.preventDefault();const v=Oa(u.minPackageStock,u.desiredStock);if(v){Ea(v);return}await r(u)},x=async(p,v)=>{m(j=>({...j,order:v})),d(!1)},h=we(Q(u.order));return s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(F,{label:"Nombre del producto",value:u.name,onChange:p=>m(v=>({...v,name:p.target.value.toUpperCase()})),required:!0}),s.jsx(F,{label:"SKU",value:u.sku,onChange:p=>m(v=>({...v,sku:p.target.value.toUpperCase()})),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Pt,{label:"Empaque de Compra",value:u.purchasePackaging,onChange:async p=>{m(v=>({...v,purchasePackaging:p.toUpperCase()})),o.includes(p.toUpperCase())||await c(p)},onRemove:()=>m(p=>({...p,purchasePackaging:""})),suggestions:o,placeholder:"Escriba y presione Enter"}),s.jsx(Pt,{label:"Empaque de Venta",value:u.salePackaging,onChange:async p=>{m(v=>({...v,salePackaging:p.toUpperCase()})),o.includes(p.toUpperCase())||await c(p)},onRemove:()=>m(p=>({...p,salePackaging:""})),suggestions:o,placeholder:"Escriba y presione Enter"})]}),s.jsx("div",{className:`rounded-lg p-4 border cursor-pointer transition-colors ${h.bg} ${h.border} hover:opacity-90`,onClick:()=>d(!0),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:`text-sm font-medium ${h.text}`,children:"Orden del Producto"}),s.jsx("div",{className:`text-lg font-bold mt-1 ${h.text}`,children:ie(u.order)})]}),s.jsx(Ue,{className:`w-5 h-5 ${h.text}`})]})}),s.jsx(F,{label:"Precio",value:u.price,onChange:p=>m(v=>({...v,price:parseFloat(p.target.value)||0})),min:0,required:!0,isCurrency:!0}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(F,{label:"Stock mínimo",type:"number",value:u.minPackageStock,onChange:p=>m(v=>({...v,minPackageStock:parseInt(p.target.value)||0})),min:0,required:!0}),s.jsx(F,{label:"Stock deseado",type:"number",value:u.desiredStock,onChange:p=>m(v=>({...v,desiredStock:parseInt(p.target.value)||0})),min:0,required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(C,{type:"button",variant:"outline",onClick:n,children:"Cancelar"}),s.jsxs(C,{type:"submit",isLoading:a,children:[t?"Actualizar":"Crear"," Producto"]})]}),t&&s.jsx(nt,{isOpen:l,onClose:()=>d(!1),product:t,products:i,onOrderChange:x})]})}function ar({providerId:e,product:t,onSubmit:r,onCancel:n,isSubmitting:a}){return s.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[s.jsx("div",{className:"border-b bg-white",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-16",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Editar Producto"}),s.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Re,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("div",{className:"h-full overflow-y-auto",children:s.jsx("div",{className:"container mx-auto max-w-2xl px-4 py-6",children:s.jsx(nr,{providerId:e,initialData:t,onSubmit:r,onCancel:n,isLoading:a})})})})]})}function Ma({onProductSelect:e}){const[t,r]=g.useState(""),[n,a]=g.useState([]),[o,c]=g.useState([]),[i,l]=g.useState(!0),[d,u]=g.useState(null),[m,f]=g.useState(!1);g.useEffect(()=>{(async()=>{try{const y=W(I,"products"),w=await me(y);if(w.exists()){const p=w.val(),v=Object.entries(p).map(([j,D])=>({id:j,...D}));c(v)}}catch(y){console.error("Error fetching products:",y),S.error("Error al buscar productos")}finally{l(!1)}})()},[]),g.useEffect(()=>{if(!t.trim()){a([]);return}const b=t.toLowerCase(),y=o.filter(w=>w.name.toLowerCase().includes(b)||ie(w.order).toLowerCase().includes(b)).sort((w,p)=>{const v=w.name.toLowerCase().startsWith(b),j=p.name.toLowerCase().startsWith(b);return v&&!j?-1:!v&&j?1:w.name.localeCompare(p.name)}).slice(0,5);a(y)},[t,o]);const x=b=>{u(b),r(""),a([])},h=async b=>{if(d){f(!0);try{const y=W(I,`products/${d.id}`);await We(y,b),S.success("Producto actualizado exitosamente"),c(w=>w.map(p=>p.id===d.id?{...p,...b}:p)),u(null)}catch(y){console.error("Error updating product:",y),S.error("Error al actualizar el producto")}finally{f(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(F,{placeholder:"Buscar productos por nombre...",value:t,onChange:b=>r(b.target.value),className:"pl-10"}),s.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),n.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:n.map(b=>s.jsx("button",{onClick:()=>x(b),className:"w-full px-4 py-2 text-left hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:b.name}),s.jsx("div",{className:"text-sm text-gray-500",children:ie(b.order)})]}),s.jsx("div",{className:"text-blue-600 font-medium",children:ue(b.price)})]})},b.id))}),i&&t&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg p-4 text-center text-gray-500",children:"Buscando productos..."})]}),d&&s.jsx(ar,{providerId:d.providerId,product:d,onSubmit:h,onCancel:()=>u(null),isSubmitting:m})]})}function Ta({providerId:e,initialData:t,onSubmit:r,onCancel:n,isLoading:a}){return s.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[s.jsx("div",{className:"border-b bg-white",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-14",children:[s.jsxs("h2",{className:"text-lg font-semibold",children:[t?"Editar":"Nuevo"," Producto"]}),s.jsx("button",{onClick:n,disabled:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(Re,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("div",{className:"h-full overflow-y-auto",children:s.jsx("div",{className:"container mx-auto max-w-2xl px-4 py-6",children:s.jsx(nr,{providerId:e,initialData:t,onSubmit:r,onCancel:n,isLoading:a})})})})]})}function St(e,t,r,n){const a=e.find(l=>l.id===n);if(!a)return e;const o=se(a.order);if(o!==t){e.filter(d=>se(d.order)===o&&d.id!==n).sort((d,u)=>B(d.order)-B(u.order));const l=B(a.order);return e.filter(d=>se(d.order)===t).sort((d,u)=>B(d.order)-B(u.order)),e.map(d=>{if(d.id===n)return{...d,order:de(t,r)};const u=se(d.order),m=B(d.order);return u===o&&m>l?{...d,order:de(o,m-1)}:u===t&&m>=r?{...d,order:de(t,m+1)}:d})}const i=B(a.order);return e.map(l=>{if(se(l.order)!==t)return l;if(l.id===n)return{...l,order:de(t,r)};const d=B(l.order);if(r<i){if(d>=r&&d<i)return{...l,order:de(t,d+1)}}else if(r>i&&d<=r&&d>i)return{...l,order:de(t,d-1)};return l})}function Ra(e,t){const r=se(t.order),n=B(t.order);return e.filter(a=>a.id!==t.id&&se(a.order)===r).sort((a,o)=>B(a.order)-B(o.order)),e.map(a=>{if(a.id===t.id||se(a.order)!==r)return a;const o=B(a.order);return o>n?{...a,order:de(r,o-1)}:a})}function Wa(){const{providers:e}=Ie(),[t,r]=g.useState(""),{products:n,loading:a,addProduct:o,updateProduct:c,deleteProduct:i}=rt(t),[l,d]=g.useState(!1),[u,m]=g.useState(null),[f,x]=g.useState(!1),[h,b]=g.useState(null),y=async E=>{x(!0);try{if(u){if(await c(u.id,E),E.order!==u.order){const R=Q(E.order),$=ne(E.order),q=St(n,R,$,u.id);await Promise.all(q.filter(P=>{var _;return P.order!==((_=n.find(H=>H.id===P.id))==null?void 0:_.order)}).map(P=>c(P.id,{order:P.order})))}S.success("Producto actualizado exitosamente")}else{const R=V[0].code,$=n.filter(P=>Q(P.order)===R),q=st(R,$.length+1);await o({...E,order:q}),S.success("Producto creado exitosamente")}j()}catch(R){console.error("Error saving product:",R),S.error("Ocurrió un error al guardar el producto")}finally{x(!1)}},w=async(E,R)=>{try{const $=Q(R),q=ne(R),P=St(n,$,q,E.id);await Promise.all(P.filter(_=>{var H;return _.order!==((H=n.find(fe=>fe.id===_.id))==null?void 0:H.order)}).map(_=>c(_.id,{order:_.order}))),S.success("Orden actualizado exitosamente")}catch($){console.error("Error updating order:",$),S.error("Error al actualizar el orden")}},p=async E=>{b(E)},v=async()=>{if(h)try{const E=Ra(n,h);await Promise.all(E.filter(R=>{var $;return R.order!==(($=n.find(q=>q.id===R.id))==null?void 0:$.order)}).map(R=>c(R.id,{order:R.order}))),await i(h.id),S.success("Producto eliminado exitosamente"),b(null)}catch{S.error("Ocurrió un error al eliminar el producto")}},j=()=>{d(!1),m(null)},D=E=>{m(E),d(!0)},G=E=>{m(E),d(!0)},he=e.map(E=>({value:E.id,label:E.commercialName}));return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ma,{onProductSelect:G}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[s.jsx("div",{className:"flex-1 max-w-xs",children:s.jsx(sr,{options:he,value:t,onChange:r,placeholder:"Seleccionar Proveedor"})}),t&&s.jsxs(C,{onClick:()=>d(!0),children:[s.jsx(He,{className:"w-4 h-4 mr-2"}),"Nuevo Producto"]})]}),t?a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs(s.Fragment,{children:[l&&s.jsx(Ta,{providerId:t,initialData:u||void 0,onSubmit:y,onCancel:j,isLoading:f}),!l&&s.jsx(Ca,{products:n,onEdit:D,onDelete:p,onOrderChange:w})]}):s.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:s.jsx("p",{className:"text-gray-500 text-center px-4",children:"Seleccione un proveedor para ver sus productos"})}),s.jsx(oe,{isOpen:!!h,onClose:()=>b(null),title:"Eliminar producto",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-amber-600",children:['¿Está seguro que desea eliminar el producto "',h==null?void 0:h.name,'"?']}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(C,{variant:"outline",onClick:()=>b(null),children:"Cancelar"}),s.jsx(C,{onClick:v,children:"Eliminar"})]})]})})]})}function or(e){const[t,r]=g.useState([]),[n,a]=g.useState(!0);return g.useEffect(()=>{let l;return(async()=>{if(!e){r([]),a(!1);return}try{const u=await Ce.getByProvider(e);u&&r(u),l=Ce.subscribeToProviderOrders(e,m=>{console.log("Orders updated:",m),r(m)})}catch(u){console.error("Error setting up orders subscription:",u),S.error("Error al cargar las órdenes")}finally{a(!1)}})(),()=>{l&&l()}},[e]),{orders:t,loading:n,addOrder:async l=>{try{return await Ce.create(l)}catch(d){throw console.error("Error creating order:",d),S.error("Error al crear la orden"),d}},updateOrder:async(l,d)=>{try{await Ce.update(l,d)}catch(u){throw console.error("Error updating order:",u),S.error("Error al actualizar la orden"),u}},deleteOrder:async l=>{try{await Ce.delete(l)}catch(d){throw console.error("Error deleting order:",d),S.error("Error al eliminar la orden"),d}}}}const Ct=32;function Ia(e){return[`Pedido: ${be(new Date(e),"dd/MM/yyyy HH:mm:ss",{locale:Me})}`,yt.name,yt.owner,"________________________________",""].join(`
`)}function Da(e,t,r=!1){return[...t].sort((a,o)=>{const c=e.find(l=>l.id===a.productId),i=e.find(l=>l.id===o.productId);return!c||!i?0:c.order-i.order}).map(a=>{const o=e.find(c=>c.id===a.productId);if(!o)return{content:""};if(r){const c=`• *${a.quantity} ${o.purchasePackaging}* - `;return{content:o.name,prefix:c}}else return{content:o.name,suffix:`${a.quantity} ${o.purchasePackaging}`}}).filter(a=>a.content)}function $a(e){if(!e.length)return[];const t=Math.floor(Ct*.6),r=Ct-t-1;return e.map(n=>{let a=n.content;a.length>t?a=a.slice(0,t-3)+"...":a=a.padEnd(t);const c=(n.suffix||"").padStart(r);return`${a} ${c}`})}function at(e,t,r=!1){const n=Ia(e.date),a=Da(t,e.items,r);if(r){const o=a.map(c=>`${c.prefix||""}${c.content}`);return`${n}${o.join(`
`)}`}else{const o=$a(a);return`${n}${o.join(`
`)}`}}function La(e,t,r){return at(e,t,!1)}function Fa(e,t,r){return at(e,t,!0)}function kt({order:e,products:t,provider:r,preview:n=!0}){const a=at(e,t,n),o=n?a.replace(/\*(.*?)\*/g,"<strong>$1</strong>"):a;return s.jsx("div",{className:`
        font-mono text-sm bg-gray-50 p-4 rounded-lg overflow-x-auto
        ${n?"":"print:p-0 print:bg-white"}
      `,style:{width:n?"auto":"80mm"},children:s.jsx("pre",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:o}})})}function Aa({order:e,products:t,provider:r}){const[n,a]=g.useState(!1),[o,c]=g.useState(!1),[i,l]=g.useState(!1),{updateOrder:d}=or(r.id),u=La(e,t),m=Fa(e,t),f=async()=>{if(!r.phone){alert("Este proveedor no tiene número de teléfono registrado");return}l(!0);try{await d(e.id,{...e,status:"completed"});const h=Bt(r.phone,m);window.open(h,"_blank"),a(!1)}catch(h){console.error("Error updating order status:",h),alert("Error al actualizar el estado de la orden")}finally{l(!1)}},x=async()=>{l(!0);try{await d(e.id,{...e,status:"completed"});const h=window.open("","_blank","width=302,height=600");if(!h)throw new Error("No se pudo crear la ventana de impresión");h.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <meta charset="UTF-8">
            <title>Orden - ${r.commercialName}</title>
            <style>
              @page {
                size: 80mm auto;
                margin: 0;
              }
              @media print {
                body {
                  width: 80mm;
                  margin: 0;
                  padding: 8px;
                }
              }
              body {
                font-family: monospace;
                font-size: 12px;
                line-height: 1.2;
                margin: 0;
                padding: 8px;
                width: 80mm;
                white-space: pre-wrap;
              }
            </style>
          </head>
          <body>
            ${u}
          </body>
        </html>
      `),h.document.close(),h.focus(),setTimeout(()=>{try{h.print(),h.onafterprint=()=>{h.close(),c(!1)}}catch(b){console.error("Error during print:",b),h.close(),c(!1)}},500)}catch(h){console.error("Error printing order:",h),alert("Error al imprimir la orden")}finally{l(!1)}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex space-x-2",children:[r.phone&&s.jsxs(C,{type:"button",variant:"outline",onClick:()=>a(!0),className:"text-green-600 hover:text-green-700 hover:bg-green-50",disabled:i,children:[s.jsx(br,{className:"w-4 h-4 mr-2"}),"WhatsApp"]}),s.jsxs(C,{type:"button",variant:"outline",onClick:()=>c(!0),disabled:i,children:[s.jsx(yr,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]}),s.jsx(oe,{isOpen:n,onClose:()=>a(!1),title:"Confirmar envío por WhatsApp",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{children:"¿Desea enviar el siguiente pedido por WhatsApp?"}),s.jsx(kt,{order:e,products:t,provider:r,preview:!0}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(C,{variant:"outline",onClick:()=>a(!1),disabled:i,children:"Cancelar"}),s.jsx(C,{onClick:f,className:"bg-green-600 hover:bg-green-700",isLoading:i,children:"Enviar"})]})]})}),s.jsx(oe,{isOpen:o,onClose:()=>c(!1),title:"Confirmar impresión",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{children:"¿Desea imprimir el siguiente pedido?"}),s.jsx(kt,{order:e,products:t,provider:r,preview:!1}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(C,{variant:"outline",onClick:()=>c(!1),disabled:i,children:"Cancelar"}),s.jsx(C,{onClick:x,isLoading:i,children:"Imprimir"})]})]})})]})}function za({orders:e,products:t,provider:r,onSelect:n,onDelete:a}){const o=[...e].sort((i,l)=>new Date(l.date).getTime()-new Date(i.date).getTime()),c=new Map(o.map((i,l)=>[i.id,o.length-l]));return s.jsx("div",{className:"space-y-4",children:o.map(i=>{const l=i.items.reduce((d,u)=>d+u.quantity,0);return s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"cursor-pointer space-y-3",onClick:()=>n(i),children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[i.status==="completed"?s.jsx(wr,{className:"w-5 h-5 text-green-500"}):s.jsx(vr,{className:"w-5 h-5 text-yellow-500"}),s.jsxs("h3",{className:"text-lg font-semibold",children:["Orden #",c.get(i.id)," - ",be(new Date(i.date),"d 'de' MMMM, yyyy",{locale:Me})]})]})}),s.jsx("div",{className:"flex items-center justify-between text-gray-600",children:s.jsxs("span",{children:[l," ",l===1?"producto":"productos"]})})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[s.jsx(Aa,{order:i,products:t,provider:r}),s.jsx(C,{variant:"outline",size:"sm",onClick:d=>{d.stopPropagation(),a(i)},className:"hover:bg-red-50 hover:text-red-600 ml-2",children:s.jsx(Mt,{className:"w-4 h-4"})})]})]},i.id)})})}function qa({product:e,products:t,isSelected:r,quantity:n,onQuantityChange:a,onProductUpdate:o,onReview:c,isReviewed:i}){const[l,d]=g.useState(!1),[u,m]=g.useState(!1),[f,x]=g.useState(!1),h=we(Q(e.order)),b=async(w,p)=>{o&&await o(w,{order:p})},y=async w=>{if(o){x(!0);try{await o(e,w),m(!1)}finally{x(!1)}}};return s.jsxs(s.Fragment,{children:[s.jsx(O,{isSelected:r,children:s.jsx(O.Header,{className:"!p-3",children:s.jsxs("div",{className:"relative",children:[i&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white rounded-full p-1",children:s.jsx(it,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`
                  flex-shrink-0 w-5 h-5 rounded border cursor-pointer transition-colors mt-1
                  ${r?"bg-blue-500 border-blue-500":"border-gray-300 hover:border-blue-500"}
                `,onClick:()=>a(r?0:1),children:r&&s.jsx(it,{className:"w-full h-full text-white p-0.5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2 hover:text-blue-600 cursor-pointer",onClick:()=>m(!0),children:e.name}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600 mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ve,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),s.jsxs("span",{children:["Compra: ",e.purchasePackaging]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ve,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),s.jsxs("span",{children:["Venta: ",e.salePackaging]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Tt,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),s.jsxs("span",{children:["Stock: ",e.minPackageStock," - ",e.desiredStock]})]}),s.jsxs("button",{onClick:()=>d(!0),className:`
                      inline-flex items-center px-2 py-1 rounded-md text-sm transition-colors
                      ${h.bg} ${h.border} ${h.text}
                      hover:opacity-90
                    `,children:[s.jsx(Ue,{className:"w-4 h-4 mr-1.5"}),ie(e.order)]})]}),s.jsxs("div",{className:"flex items-end justify-between gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(C,{type:"button",variant:"outline",size:"sm",onClick:()=>a(n-1),disabled:n<=0,className:"px-2",children:"-"}),s.jsx(F,{type:"number",min:"0",value:n||"",onChange:w=>{const p=parseInt(w.target.value);isNaN(p)||a(p)},placeholder:"0",className:"text-center"}),s.jsx(C,{type:"button",variant:"outline",size:"sm",onClick:()=>a(n+1),className:"px-2",children:"+"})]})}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-blue-600",children:ue(e.price)}),r&&s.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",ue(e.price*n)]})]})]})]})]})]})})}),s.jsx(nt,{isOpen:l,onClose:()=>d(!1),product:e,products:t,onOrderChange:b}),u&&s.jsx(ar,{providerId:e.providerId,product:e,onSubmit:y,onCancel:()=>m(!1),isSubmitting:f})]})}function _a({products:e,selectedProducts:t,onProductSelect:r,onProductUpdate:n}){const[a,o]=g.useState(new Set),c=[...e].sort((u,m)=>u.order-m.order),i=(u,m)=>{m>=0&&(r(u,m),d(u))},l=async(u,m)=>{n&&(await n(u.id,m),d(u.id))},d=u=>{o(m=>new Set(m).add(u))};return s.jsx("div",{className:"space-y-3",children:c.map(u=>s.jsx(qa,{product:u,products:e,isSelected:t.has(u.id),quantity:t.get(u.id)||0,onQuantityChange:m=>i(u.id,m),onProductUpdate:l,onReview:()=>d(u.id),isReviewed:a.has(u.id)},u.id))})}function Ya({currentProducts:e,onProductSelect:t}){const[r,n]=g.useState(""),[a,o]=g.useState([]),[c,i]=g.useState([]),[l,d]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const f=W(I,"products"),x=await me(f);if(x.exists()){const h=x.val(),b=Object.entries(h).map(([y,w])=>({id:y,...w}));i(b)}}catch(f){console.error("Error fetching products:",f),S.error("Error al buscar productos")}finally{d(!1)}})()},[]),g.useEffect(()=>{if(!r.trim()){o([]);return}const m=new Set(e.map(h=>h.id)),f=r.toLowerCase(),x=c.filter(h=>!m.has(h.id)&&(h.name.toLowerCase().includes(f)||ie(h.order).toLowerCase().includes(f))).sort((h,b)=>{const y=h.name.toLowerCase().startsWith(f),w=b.name.toLowerCase().startsWith(f);return y&&!w?-1:!y&&w?1:h.name.localeCompare(b.name)}).slice(0,5);o(x)},[r,c,e]);const u=m=>{t(m),n(""),o([]),S.success("Producto agregado a la orden")};return s.jsxs("div",{className:"relative mb-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(F,{placeholder:"Buscar productos de otros proveedores...",value:r,onChange:m=>n(m.target.value),className:"pl-10"}),s.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),a.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:a.map(m=>s.jsxs("button",{onClick:()=>u(m),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:m.name}),s.jsx("div",{className:"text-sm text-gray-500",children:ie(m.order)})]}),s.jsx("div",{className:"text-blue-600 font-medium whitespace-nowrap",children:ue(m.price)})]},m.id))}),l&&r&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg p-4 text-center text-gray-500",children:"Buscando productos..."})]})}function Ga({products:e,selectedProducts:t,onProductSelect:r,onProductUpdate:n,onConfirm:a,onCancel:o,isSubmitting:c,provider:i}){const[l,d]=g.useState(e);g.useEffect(()=>{d(f=>{const x=new Set(e.map(b=>b.id)),h=f.filter(b=>!x.has(b.id));return[...e,...h]})},[e]);const u=Array.from(t.entries()).reduce((f,[x,h])=>{const b=l.find(y=>y.id===x);return f+((b==null?void 0:b.price)||0)*h},0),m=f=>{d(x=>x.find(h=>h.id===f.id)?x:[...x,f]),r(f.id,1)};return s.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[s.jsx("div",{className:"border-b bg-white",children:s.jsxs("div",{className:"flex items-center justify-between px-4 h-14",children:[s.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[s.jsxs("h2",{className:"text-lg font-semibold truncate",children:[i.legalName&&i.legalName!==i.commercialName?s.jsxs("span",{className:"text-gray-500",children:[i.legalName," ",s.jsx("span",{className:"mx-1",children:"•"})]}):null,s.jsx("span",{children:i.commercialName})]}),t.size>0&&s.jsx("div",{className:"text-lg font-bold text-blue-600",children:ue(u)})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(C,{variant:"outline",onClick:o,disabled:c,size:"sm",children:"Cancelar"}),s.jsx(C,{onClick:a,isLoading:c,size:"sm",children:"Guardar"})]})]})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx("div",{className:"h-full overflow-y-auto",children:s.jsxs("div",{className:"container mx-auto max-w-3xl px-4 py-6",children:[s.jsx(Ya,{currentProducts:e,onProductSelect:m}),s.jsx(_a,{products:l,selectedProducts:t,onProductSelect:r,onProductUpdate:n})]})})})]})}function Ha(e){return Number(e.reduce((t,r)=>t+Number((r.price*r.quantity).toFixed(2)),0).toFixed(2))}function Ba(e,t){const r=Number(Number(e.price).toFixed(2)),n=Number((r*t).toFixed(2));return{productId:e.id,quantity:Number(t),price:r,subtotal:n}}function Ua(e,t,r){if(!e||!r||r.length===0)throw new Error("Invalid order data");const n=Array.from(t.entries()).map(([o,c])=>{const i=r.find(l=>l.id===o);if(!i)throw new Error(`Product ${o} not found`);return Ba(i,c)}).sort((o,c)=>{const i=r.find(d=>d.id===o.productId),l=r.find(d=>d.id===c.productId);return!i||!l?0:i.order-l.order}),a=Ha(n);return{providerId:e,date:new Date().toISOString(),status:"pending",items:n,total:a}}function Va(e,t){try{if(!e.providerId)return"El proveedor es requerido";if(!e.items||e.items.length===0)return"Debe agregar al menos un producto";const r=new Set;for(const a of e.items){if(!a.productId)return"Producto inválido";if(r.has(a.productId))return"No puede haber productos duplicados";if(r.add(a.productId),a.quantity<=0)return"La cantidad debe ser mayor a 0";const o=t.find(i=>i.id===a.productId);if(!o)return"Producto no encontrado";if(Math.abs(a.price-o.price)>.01)return`El precio del producto ${o.name} no coincide`;const c=Number((a.price*a.quantity).toFixed(2));if(Math.abs(a.subtotal-c)>.01)return`El subtotal del producto ${o.name} no coincide`}const n=Number(e.items.reduce((a,o)=>a+Number((o.price*o.quantity).toFixed(2)),0).toFixed(2));return Math.abs(e.total-n)>.01?"El total no coincide":null}catch(r){return console.error("Error validating order:",r),"Error al validar la orden"}}function Qa(){const e=Dt(),[t,r]=Pr(),{providers:n}=Ie(),[a,o]=g.useState(""),{orders:c,loading:i,addOrder:l,updateOrder:d,deleteOrder:u}=or(a),{products:m,updateProduct:f}=rt(a),[x,h]=g.useState(!1),[b,y]=g.useState(null),[w,p]=g.useState(!1),[v,j]=g.useState(null),[D,G]=g.useState(new Map),[he,E]=g.useState(!1),R=n.find(M=>M.id===a);g.useEffect(()=>{const M=t.get("provider"),z=t.get("new")==="true";if(M){if(o(M),z)h(!0),E(!0);else{const L=new Date,De=new Date(L.setHours(0,0,0,0)),U=new Date(L.setHours(23,59,59,999)),ze=c.find($e=>{const Ne=new Date($e.date);return Ne>=De&&Ne<=U});if(ze){const $e=new Map;ze.items.forEach(Ne=>{$e.set(Ne.productId,Ne.quantity)}),G($e),y(ze),h(!0),E(!0)}}r({})}},[t,r,c]);const $=(M,z)=>{const L=new Map(D);z>0?L.set(M,z):L.delete(M),G(L)},q=async()=>{if(!a||!m||!R){S.error("Seleccione un proveedor");return}if(D.size===0){S.error("Debe agregar al menos un producto");return}p(!0);try{const M=Ua(a,D,m),z=Va(M,m);if(z){S.error(z);return}b?(await d(b.id,M),S.success("Orden actualizada exitosamente")):(await l(M),S.success("Orden creada exitosamente")),H()}catch(M){console.error("Error saving order:",M),S.error("Ocurrió un error al guardar la orden")}finally{p(!1)}},P=M=>{j(M)},_=async()=>{if(v)try{await u(v.id),S.success("Orden eliminada exitosamente"),j(null)}catch{S.error("Ocurrió un error al eliminar la orden")}},H=()=>{h(!1),y(null),G(new Map),he&&e("/")},fe=M=>{const z=new Map;M.items.forEach(L=>{z.set(L.productId,L.quantity)}),G(z),y(M),h(!0)},ge=n.map(M=>({value:M.id,label:M.commercialName}));return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[s.jsx("div",{className:"flex-1 max-w-xs",children:s.jsx(sr,{options:ge,value:a,onChange:o,placeholder:"Seleccionar Proveedor"})}),a&&s.jsxs(C,{onClick:()=>h(!0),children:[s.jsx(He,{className:"w-4 h-4 mr-2"}),"Nueva Orden"]})]}),a?i?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs(s.Fragment,{children:[x&&R&&s.jsx(Ga,{products:m,selectedProducts:D,onProductSelect:$,onProductUpdate:f,onConfirm:q,onCancel:H,isSubmitting:w,provider:R}),!x&&s.jsx(za,{orders:c,products:m,provider:R,onSelect:fe,onDelete:P})]}):s.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:s.jsx("p",{className:"text-gray-500 text-center px-4",children:"Seleccione un proveedor para ver sus órdenes"})}),s.jsx(oe,{isOpen:!!v,onClose:()=>j(null),title:"Eliminar orden",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-amber-600",children:"¿Está seguro que desea eliminar esta orden?"}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(C,{variant:"outline",onClick:()=>j(null),children:"Cancelar"}),s.jsx(C,{onClick:_,children:"Eliminar"})]})]})})]})}function Xa(){return s.jsx(Sr,{basename:"/ordenes-de-compra",children:s.jsxs(Wr,{children:[s.jsx(jr,{position:"top-right"}),s.jsxs(Cr,{children:[s.jsx(ce,{path:"/login",element:s.jsx(ea,{})}),s.jsx(ce,{element:s.jsx(Ir,{}),children:s.jsxs(ce,{element:s.jsx(Zn,{}),children:[s.jsx(ce,{path:"/",element:s.jsx(va,{})}),s.jsx(ce,{path:"/providers",element:s.jsx(Na,{})}),s.jsx(ce,{path:"/products",element:s.jsx(Wa,{})}),s.jsx(ce,{path:"/orders",element:s.jsx(Qa,{})})]})})]})]})})}Lt(document.getElementById("root")).render(s.jsx(g.StrictMode,{children:s.jsx(Xa,{})}));
//# sourceMappingURL=index-UgyEIAFh.js.map
