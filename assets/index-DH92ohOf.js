import{j as t,n as O,X as pe,M as hr,L as ut,a as fr,U as gr,P as Pe,S as Ve,b as xr,c as pr,C as Rt,B as br,A as Qe,T as yr,d as qe,e as wr,f as Dt,g as vr,h as Xe,i as jr,k as Nr,l as Pr,m as Ke,o as It,p as Wt,q as Sr,r as Cr,s as kr,t as Or,E as Er,u as Mr,F as Tr,v as mt,I as Rr}from"./ui-BesVR3sm.js";import{a as Dr,r as x,N as $t,O as Lt,b as ht,R as Ft,u as At,c as Ir,H as Wr,d as $r,e as ue}from"./vendor-DkOrtBC1.js";import{i as Lr,g as Fr,s as Ar,a as zr,o as qr,b as _r,r as R,c as ge,p as De,u as zt,d as Je,e as oe,q as Ze,f as et,h as tt,j as Ie}from"./firebase-ExXjQgEh.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var qt,ft=Dr;qt=ft.createRoot,ft.hydrateRoot;const _t={apiKey:"AIzaSyBopcfbHLrWQZOsgitRYWk5h26ipYbD-hE",authDomain:"nrd-ordenes-prod.firebaseapp.com",databaseURL:"https://nrd-ordenes-prod-default-rtdb.firebaseio.com",projectId:"nrd-ordenes-prod",storageBucket:"nrd-ordenes-prod.firebasestorage.app",messagingSenderId:"766340976237",appId:"1:766340976237:web:e7123eedb37568a2f9b964"},Yr="production";console.log(`Running in ${Yr} mode`);console.log(`Using database: ${_t.databaseURL}`);const Yt=Lr(_t),rt=Fr(Yt);async function Gr(e,r){try{return(await Ar(rt,e,r)).user}catch(s){throw console.error("Sign in error:",s),s}}async function Hr(){try{await zr(rt)}catch(e){throw console.error("Sign out error:",e),e}}const Gt=x.createContext(void 0);function Ur({children:e}){const[r,s]=x.useState(null),[n,a]=x.useState(!0);x.useEffect(()=>qr(rt,l=>{s(l),a(!1)}),[]);const c={user:r,loading:n,signIn:async(d,l)=>{try{await Gr(d,l),O.success("¡Bienvenido!")}catch(m){throw console.error("Sign in error:",m),O.error("Credenciales inválidas"),m}},signOut:async()=>{try{await Hr(),O.success("Sesión cerrada")}catch(d){throw console.error("Sign out error:",d),O.error("Error al cerrar sesión"),d}}};return t.jsx(Gt.Provider,{value:c,children:!n&&e})}function st(){const e=x.useContext(Gt);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Br(){const{user:e}=st();return e?t.jsx(Lt,{}):t.jsx($t,{to:"/login",replace:!0})}function G(e){const r=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&r==="[object Date]"?new e.constructor(+e):typeof e=="number"||r==="[object Number]"||typeof e=="string"||r==="[object String]"?new Date(e):new Date(NaN)}function ie(e,r){return e instanceof Date?new e.constructor(r):new Date(r)}function Vr(e,r){const s=G(e);return isNaN(r)?ie(e,NaN):(s.setDate(s.getDate()+r),s)}const Ht=6048e5,Qr=864e5;let Xr={};function _e(){return Xr}function Te(e,r){var c,d,l,m;const s=_e(),n=(r==null?void 0:r.weekStartsOn)??((d=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((m=(l=s.locale)==null?void 0:l.options)==null?void 0:m.weekStartsOn)??0,a=G(e),o=a.getDay(),i=(o<n?7:0)+o-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function ze(e){return Te(e,{weekStartsOn:1})}function Ut(e){const r=G(e),s=r.getFullYear(),n=ie(e,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const a=ze(n),o=ie(e,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const i=ze(o);return r.getTime()>=a.getTime()?s+1:r.getTime()>=i.getTime()?s:s-1}function He(e){const r=G(e);return r.setHours(0,0,0,0),r}function gt(e){const r=G(e),s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),+e-+s}function Kr(e,r){const s=He(e),n=He(r),a=+s-gt(s),o=+n-gt(n);return Math.round((a-o)/Qr)}function Jr(e){const r=Ut(e),s=ie(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),ze(s)}function Zr(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function es(e){if(!Zr(e)&&typeof e!="number")return!1;const r=G(e);return!isNaN(Number(r))}function ts(e){const r=G(e);return r.setHours(23,59,59,999),r}function rs(e){const r=G(e),s=ie(e,0);return s.setFullYear(r.getFullYear(),0,1),s.setHours(0,0,0,0),s}const ss={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ns=(e,r,s)=>{let n;const a=ss[e];return typeof a=="string"?n=a:r===1?n=a.one:n=a.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function we(e){return(r={})=>{const s=r.width?String(r.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const as={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},os={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},is={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cs={date:we({formats:as,defaultWidth:"full"}),time:we({formats:os,defaultWidth:"full"}),dateTime:we({formats:is,defaultWidth:"full"})},ls={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ds=(e,r,s,n)=>ls[e];function X(e){return(r,s)=>{const n=s!=null&&s.context?String(s.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,c=s!=null&&s.width?String(s.width):i;a=e.formattingValues[c]||e.formattingValues[i]}else{const i=e.defaultWidth,c=s!=null&&s.width?String(s.width):e.defaultWidth;a=e.values[c]||e.values[i]}const o=e.argumentCallback?e.argumentCallback(r):r;return a[o]}}const us={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ms={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hs={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fs={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ps=(e,r)=>{const s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},bs={ordinalNumber:ps,era:X({values:us,defaultWidth:"wide"}),quarter:X({values:ms,defaultWidth:"wide",argumentCallback:e=>e-1}),month:X({values:hs,defaultWidth:"wide"}),day:X({values:fs,defaultWidth:"wide"}),dayPeriod:X({values:gs,defaultWidth:"wide",formattingValues:xs,defaultFormattingWidth:"wide"})};function K(e){return(r,s={})=>{const n=s.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=r.match(a);if(!o)return null;const i=o[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(c)?ws(c,h=>h.test(i)):ys(c,h=>h.test(i));let l;l=e.valueCallback?e.valueCallback(d):d,l=s.valueCallback?s.valueCallback(l):l;const m=r.slice(i.length);return{value:l,rest:m}}}function ys(e,r){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&r(e[s]))return s}function ws(e,r){for(let s=0;s<e.length;s++)if(r(e[s]))return s}function Bt(e){return(r,s={})=>{const n=r.match(e.matchPattern);if(!n)return null;const a=n[0],o=r.match(e.parsePattern);if(!o)return null;let i=e.valueCallback?e.valueCallback(o[0]):o[0];i=s.valueCallback?s.valueCallback(i):i;const c=r.slice(a.length);return{value:i,rest:c}}}const vs=/^(\d+)(th|st|nd|rd)?/i,js=/\d+/i,Ns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ps={any:[/^b/i,/^(a|c)/i]},Ss={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Cs={any:[/1/i,/2/i,/3/i,/4/i]},ks={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Os={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Es={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ms={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ts={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ds={ordinalNumber:Bt({matchPattern:vs,parsePattern:js,valueCallback:e=>parseInt(e,10)}),era:K({matchPatterns:Ns,defaultMatchWidth:"wide",parsePatterns:Ps,defaultParseWidth:"any"}),quarter:K({matchPatterns:Ss,defaultMatchWidth:"wide",parsePatterns:Cs,defaultParseWidth:"any",valueCallback:e=>e+1}),month:K({matchPatterns:ks,defaultMatchWidth:"wide",parsePatterns:Os,defaultParseWidth:"any"}),day:K({matchPatterns:Es,defaultMatchWidth:"wide",parsePatterns:Ms,defaultParseWidth:"any"}),dayPeriod:K({matchPatterns:Ts,defaultMatchWidth:"any",parsePatterns:Rs,defaultParseWidth:"any"})},Is={code:"en-US",formatDistance:ns,formatLong:cs,formatRelative:ds,localize:bs,match:Ds,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ws(e){const r=G(e);return Kr(r,rs(r))+1}function $s(e){const r=G(e),s=+ze(r)-+Jr(r);return Math.round(s/Ht)+1}function Vt(e,r){var m,h,u,g;const s=G(e),n=s.getFullYear(),a=_e(),o=(r==null?void 0:r.firstWeekContainsDate)??((h=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(u=a.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??1,i=ie(e,0);i.setFullYear(n+1,0,o),i.setHours(0,0,0,0);const c=Te(i,r),d=ie(e,0);d.setFullYear(n,0,o),d.setHours(0,0,0,0);const l=Te(d,r);return s.getTime()>=c.getTime()?n+1:s.getTime()>=l.getTime()?n:n-1}function Ls(e,r){var c,d,l,m;const s=_e(),n=(r==null?void 0:r.firstWeekContainsDate)??((d=(c=r==null?void 0:r.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(l=s.locale)==null?void 0:l.options)==null?void 0:m.firstWeekContainsDate)??1,a=Vt(e,r),o=ie(e,0);return o.setFullYear(a,0,n),o.setHours(0,0,0,0),Te(o,r)}function Fs(e,r){const s=G(e),n=+Te(s,r)-+Ls(s,r);return Math.round(n/Ht)+1}function E(e,r){const s=e<0?"-":"",n=Math.abs(e).toString().padStart(r,"0");return s+n}const ee={y(e,r){const s=e.getFullYear(),n=s>0?s:1-s;return E(r==="yy"?n%100:n,r.length)},M(e,r){const s=e.getMonth();return r==="M"?String(s+1):E(s+1,2)},d(e,r){return E(e.getDate(),r.length)},a(e,r){const s=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,r){return E(e.getHours()%12||12,r.length)},H(e,r){return E(e.getHours(),r.length)},m(e,r){return E(e.getMinutes(),r.length)},s(e,r){return E(e.getSeconds(),r.length)},S(e,r){const s=r.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,s-3));return E(a,r.length)}},ye={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xt={G:function(e,r,s){const n=e.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(e,r,s){if(r==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return s.ordinalNumber(a,{unit:"year"})}return ee.y(e,r)},Y:function(e,r,s,n){const a=Vt(e,n),o=a>0?a:1-a;if(r==="YY"){const i=o%100;return E(i,2)}return r==="Yo"?s.ordinalNumber(o,{unit:"year"}):E(o,r.length)},R:function(e,r){const s=Ut(e);return E(s,r.length)},u:function(e,r){const s=e.getFullYear();return E(s,r.length)},Q:function(e,r,s){const n=Math.ceil((e.getMonth()+1)/3);switch(r){case"Q":return String(n);case"QQ":return E(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,r,s){const n=Math.ceil((e.getMonth()+1)/3);switch(r){case"q":return String(n);case"qq":return E(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,r,s){const n=e.getMonth();switch(r){case"M":case"MM":return ee.M(e,r);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(e,r,s){const n=e.getMonth();switch(r){case"L":return String(n+1);case"LL":return E(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(e,r,s,n){const a=Fs(e,n);return r==="wo"?s.ordinalNumber(a,{unit:"week"}):E(a,r.length)},I:function(e,r,s){const n=$s(e);return r==="Io"?s.ordinalNumber(n,{unit:"week"}):E(n,r.length)},d:function(e,r,s){return r==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):ee.d(e,r)},D:function(e,r,s){const n=Ws(e);return r==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):E(n,r.length)},E:function(e,r,s){const n=e.getDay();switch(r){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(e,r,s,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return E(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});case"eeee":default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(e,r,s,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return E(o,r.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});case"cccc":default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(e,r,s){const n=e.getDay(),a=n===0?7:n;switch(r){case"i":return String(a);case"ii":return E(a,r.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(e,r,s){const a=e.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,r,s){const n=e.getHours();let a;switch(n===12?a=ye.noon:n===0?a=ye.midnight:a=n/12>=1?"pm":"am",r){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,r,s){const n=e.getHours();let a;switch(n>=17?a=ye.evening:n>=12?a=ye.afternoon:n>=4?a=ye.morning:a=ye.night,r){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,r,s){if(r==="ho"){let n=e.getHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return ee.h(e,r)},H:function(e,r,s){return r==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):ee.H(e,r)},K:function(e,r,s){const n=e.getHours()%12;return r==="Ko"?s.ordinalNumber(n,{unit:"hour"}):E(n,r.length)},k:function(e,r,s){let n=e.getHours();return n===0&&(n=24),r==="ko"?s.ordinalNumber(n,{unit:"hour"}):E(n,r.length)},m:function(e,r,s){return r==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):ee.m(e,r)},s:function(e,r,s){return r==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):ee.s(e,r)},S:function(e,r){return ee.S(e,r)},X:function(e,r,s){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(r){case"X":return bt(n);case"XXXX":case"XX":return me(n);case"XXXXX":case"XXX":default:return me(n,":")}},x:function(e,r,s){const n=e.getTimezoneOffset();switch(r){case"x":return bt(n);case"xxxx":case"xx":return me(n);case"xxxxx":case"xxx":default:return me(n,":")}},O:function(e,r,s){const n=e.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+pt(n,":");case"OOOO":default:return"GMT"+me(n,":")}},z:function(e,r,s){const n=e.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+pt(n,":");case"zzzz":default:return"GMT"+me(n,":")}},t:function(e,r,s){const n=Math.trunc(e.getTime()/1e3);return E(n,r.length)},T:function(e,r,s){const n=e.getTime();return E(n,r.length)}};function pt(e,r=""){const s=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),o=n%60;return o===0?s+String(a):s+String(a)+r+E(o,2)}function bt(e,r){return e%60===0?(e>0?"-":"+")+E(Math.abs(e)/60,2):me(e,r)}function me(e,r=""){const s=e>0?"-":"+",n=Math.abs(e),a=E(Math.trunc(n/60),2),o=E(n%60,2);return s+a+r+o}const yt=(e,r)=>{switch(e){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Qt=(e,r)=>{switch(e){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},As=(e,r)=>{const s=e.match(/(P+)(p+)?/)||[],n=s[1],a=s[2];if(!a)return yt(e,r);let o;switch(n){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",yt(n,r)).replace("{{time}}",Qt(a,r))},zs={p:Qt,P:As},qs=/^D+$/,_s=/^Y+$/,Ys=["D","DD","YY","YYYY"];function Gs(e){return qs.test(e)}function Hs(e){return _s.test(e)}function Us(e,r,s){const n=Bs(e,r,s);if(console.warn(n),Ys.includes(e))throw new RangeError(n)}function Bs(e,r,s){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${r}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qs=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xs=/^'([^]*?)'?$/,Ks=/''/g,Js=/[a-zA-Z]/;function fe(e,r,s){var m,h,u,g,f,w,y,p;const n=_e(),a=(s==null?void 0:s.locale)??n.locale??Is,o=(s==null?void 0:s.firstWeekContainsDate)??((h=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(u=n.locale)==null?void 0:u.options)==null?void 0:g.firstWeekContainsDate)??1,i=(s==null?void 0:s.weekStartsOn)??((w=(f=s==null?void 0:s.locale)==null?void 0:f.options)==null?void 0:w.weekStartsOn)??n.weekStartsOn??((p=(y=n.locale)==null?void 0:y.options)==null?void 0:p.weekStartsOn)??0,c=G(e);if(!es(c))throw new RangeError("Invalid time value");let d=r.match(Qs).map(b=>{const v=b[0];if(v==="p"||v==="P"){const N=zs[v];return N(b,a.formatLong)}return b}).join("").match(Vs).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const v=b[0];if(v==="'")return{isToken:!1,value:Zs(b)};if(xt[v])return{isToken:!0,value:b};if(v.match(Js))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(d=a.localize.preprocessor(c,d));const l={firstWeekContainsDate:o,weekStartsOn:i,locale:a};return d.map(b=>{if(!b.isToken)return b.value;const v=b.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&Hs(v)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&Gs(v))&&Us(v,r,String(e));const N=xt[v[0]];return N(c,v,a.localize,l)}).join("")}function Zs(e){const r=e.match(Xs);return r?r[1].replace(Ks,"'"):e}function wt(e,r){return Vr(e,-r)}const en={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},tn=(e,r,s)=>{let n;const a=en[e];return typeof a=="string"?n=a:r===1?n=a.one:n=a.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"en "+n:"hace "+n:n},rn={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},sn={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},nn={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},an={date:we({formats:rn,defaultWidth:"full"}),time:we({formats:sn,defaultWidth:"full"}),dateTime:we({formats:nn,defaultWidth:"full"})},on={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},cn={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},ln=(e,r,s,n)=>r.getHours()!==1?cn[e]:on[e],dn={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},un={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},mn={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},hn={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},fn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},gn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},xn=(e,r)=>Number(e)+"º",pn={ordinalNumber:xn,era:X({values:dn,defaultWidth:"wide"}),quarter:X({values:un,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:X({values:mn,defaultWidth:"wide"}),day:X({values:hn,defaultWidth:"wide"}),dayPeriod:X({values:fn,defaultWidth:"wide",formattingValues:gn,defaultFormattingWidth:"wide"})},bn=/^(\d+)(º)?/i,yn=/\d+/i,wn={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},vn={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},jn={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Nn={any:[/1/i,/2/i,/3/i,/4/i]},Pn={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Sn={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Cn={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},kn={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},On={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},En={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Mn={ordinalNumber:Bt({matchPattern:bn,parsePattern:yn,valueCallback:function(e){return parseInt(e,10)}}),era:K({matchPatterns:wn,defaultMatchWidth:"wide",parsePatterns:vn,defaultParseWidth:"any"}),quarter:K({matchPatterns:jn,defaultMatchWidth:"wide",parsePatterns:Nn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:K({matchPatterns:Pn,defaultMatchWidth:"wide",parsePatterns:Sn,defaultParseWidth:"any"}),day:K({matchPatterns:Cn,defaultMatchWidth:"wide",parsePatterns:kn,defaultParseWidth:"any"}),dayPeriod:K({matchPatterns:On,defaultMatchWidth:"any",parsePatterns:En,defaultParseWidth:"any"})},Ne={code:"es",formatDistance:tn,formatLong:an,formatRelative:ln,localize:pn,match:Mn,options:{weekStartsOn:1,firstWeekContainsDate:1}};function U(e){return new Intl.NumberFormat("es-UY",{style:"currency",currency:"UYU"}).format(e)}function Xt(e){const r=e.replace(/\D/g,""),s=r.startsWith("598")?r.slice(3):r;return s.length>=8?`+598 ${[s.slice(0,2),s.slice(2,5),s.slice(5)].join(" ")}`:`+598 ${s}`}function vt(e){const r=e.replace(/\D/g,""),s=r.startsWith("598")?r.slice(3):r;return/^[0-9]{8,9}$/.test(s)}function Kt(e,r){const s=e.replace(/\D/g,"");return`https://wa.me/${s.startsWith("598")?s:`598${s}`}?text=${encodeURIComponent(r)}`}function Jt(e){var r,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(r=0;r<a;r++)e[r]&&(s=Jt(e[r]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function Tn(){for(var e,r,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(r=Jt(e))&&(n&&(n+=" "),n+=r);return n}const nt="-",Rn=e=>{const r=In(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:i=>{const c=i.split(nt);return c[0]===""&&c.length!==1&&c.shift(),Zt(c,r)||Dn(i)},getConflictingClassGroupIds:(i,c)=>{const d=s[i]||[];return c&&n[i]?[...d,...n[i]]:d}}},Zt=(e,r)=>{var i;if(e.length===0)return r.classGroupId;const s=e[0],n=r.nextPart.get(s),a=n?Zt(e.slice(1),n):void 0;if(a)return a;if(r.validators.length===0)return;const o=e.join(nt);return(i=r.validators.find(({validator:c})=>c(o)))==null?void 0:i.classGroupId},jt=/^\[(.+)\]$/,Dn=e=>{if(jt.test(e)){const r=jt.exec(e)[1],s=r==null?void 0:r.substring(0,r.indexOf(":"));if(s)return"arbitrary.."+s}},In=e=>{const{theme:r,prefix:s}=e,n={nextPart:new Map,validators:[]};return $n(Object.entries(e.classGroups),s).forEach(([o,i])=>{Ue(i,n,o,r)}),n},Ue=(e,r,s,n)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?r:Nt(r,a);o.classGroupId=s;return}if(typeof a=="function"){if(Wn(a)){Ue(a(n),r,s,n);return}r.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([o,i])=>{Ue(i,Nt(r,o),s,n)})})},Nt=(e,r)=>{let s=e;return r.split(nt).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},Wn=e=>e.isThemeGetter,$n=(e,r)=>r?e.map(([s,n])=>{const a=n.map(o=>typeof o=="string"?r+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,c])=>[r+i,c])):o);return[s,a]}):e,Ln=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,s=new Map,n=new Map;const a=(o,i)=>{s.set(o,i),r++,r>e&&(r=0,n=s,s=new Map)};return{get(o){let i=s.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return a(o,i),i},set(o,i){s.has(o)?s.set(o,i):a(o,i)}}},er="!",Fn=e=>{const{separator:r,experimentalParseClassName:s}=e,n=r.length===1,a=r[0],o=r.length,i=c=>{const d=[];let l=0,m=0,h;for(let y=0;y<c.length;y++){let p=c[y];if(l===0){if(p===a&&(n||c.slice(y,y+o)===r)){d.push(c.slice(m,y)),m=y+o;continue}if(p==="/"){h=y;continue}}p==="["?l++:p==="]"&&l--}const u=d.length===0?c:c.substring(m),g=u.startsWith(er),f=g?u.substring(1):u,w=h&&h>m?h-m:void 0;return{modifiers:d,hasImportantModifier:g,baseClassName:f,maybePostfixModifierPosition:w}};return s?c=>s({className:c,parseClassName:i}):i},An=e=>{if(e.length<=1)return e;const r=[];let s=[];return e.forEach(n=>{n[0]==="["?(r.push(...s.sort(),n),s=[]):s.push(n)}),r.push(...s.sort()),r},zn=e=>({cache:Ln(e.cacheSize),parseClassName:Fn(e),...Rn(e)}),qn=/\s+/,_n=(e,r)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=r,o=[],i=e.trim().split(qn);let c="";for(let d=i.length-1;d>=0;d-=1){const l=i[d],{modifiers:m,hasImportantModifier:h,baseClassName:u,maybePostfixModifierPosition:g}=s(l);let f=!!g,w=n(f?u.substring(0,g):u);if(!w){if(!f){c=l+(c.length>0?" "+c:c);continue}if(w=n(u),!w){c=l+(c.length>0?" "+c:c);continue}f=!1}const y=An(m).join(":"),p=h?y+er:y,b=p+w;if(o.includes(b))continue;o.push(b);const v=a(w,f);for(let N=0;N<v.length;++N){const j=v[N];o.push(p+j)}c=l+(c.length>0?" "+c:c)}return c};function Yn(){let e=0,r,s,n="";for(;e<arguments.length;)(r=arguments[e++])&&(s=tr(r))&&(n&&(n+=" "),n+=s);return n}const tr=e=>{if(typeof e=="string")return e;let r,s="";for(let n=0;n<e.length;n++)e[n]&&(r=tr(e[n]))&&(s&&(s+=" "),s+=r);return s};function Gn(e,...r){let s,n,a,o=i;function i(d){const l=r.reduce((m,h)=>h(m),e());return s=zn(l),n=s.cache.get,a=s.cache.set,o=c,c(d)}function c(d){const l=n(d);if(l)return l;const m=_n(d,s);return a(d,m),m}return function(){return o(Yn.apply(null,arguments))}}const I=e=>{const r=s=>s[e]||[];return r.isThemeGetter=!0,r},rr=/^\[(?:([a-z-]+):)?(.+)\]$/i,Hn=/^\d+\/\d+$/,Un=new Set(["px","full","screen"]),Bn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Vn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Xn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Z=e=>ve(e)||Un.has(e)||Hn.test(e),te=e=>Se(e,"length",aa),ve=e=>!!e&&!Number.isNaN(Number(e)),Ge=e=>Se(e,"number",ve),Oe=e=>!!e&&Number.isInteger(Number(e)),Jn=e=>e.endsWith("%")&&ve(e.slice(0,-1)),P=e=>rr.test(e),re=e=>Bn.test(e),Zn=new Set(["length","size","percentage"]),ea=e=>Se(e,Zn,sr),ta=e=>Se(e,"position",sr),ra=new Set(["image","url"]),sa=e=>Se(e,ra,ia),na=e=>Se(e,"",oa),Ee=()=>!0,Se=(e,r,s)=>{const n=rr.exec(e);return n?n[1]?typeof r=="string"?n[1]===r:r.has(n[1]):s(n[2]):!1},aa=e=>Vn.test(e)&&!Qn.test(e),sr=()=>!1,oa=e=>Xn.test(e),ia=e=>Kn.test(e),ca=()=>{const e=I("colors"),r=I("spacing"),s=I("blur"),n=I("brightness"),a=I("borderColor"),o=I("borderRadius"),i=I("borderSpacing"),c=I("borderWidth"),d=I("contrast"),l=I("grayscale"),m=I("hueRotate"),h=I("invert"),u=I("gap"),g=I("gradientColorStops"),f=I("gradientColorStopPositions"),w=I("inset"),y=I("margin"),p=I("opacity"),b=I("padding"),v=I("saturate"),N=I("scale"),j=I("sepia"),S=I("skew"),F=I("space"),M=I("translate"),$=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",P,r],C=()=>[P,r],Y=()=>["",Z,te],B=()=>["auto",ve,P],be=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],$e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>["start","end","center","between","around","evenly","stretch"],de=()=>["","0",P],T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[ve,P];return{cacheSize:500,separator:":",theme:{colors:[Ee],spacing:[Z,te],blur:["none","",re,P],brightness:L(),borderColor:[e],borderRadius:["none","","full",re,P],borderSpacing:C(),borderWidth:Y(),contrast:L(),grayscale:de(),hueRotate:L(),invert:de(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[Jn,te],inset:A(),margin:A(),opacity:L(),padding:C(),saturate:L(),scale:L(),sepia:de(),skew:L(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",P]}],container:["container"],columns:[{columns:[re]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...be(),P]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oe,P]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",P]}],grow:[{grow:de()}],shrink:[{shrink:de()}],order:[{order:["first","last","none",Oe,P]}],"grid-cols":[{"grid-cols":[Ee]}],"col-start-end":[{col:["auto",{span:["full",Oe,P]},P]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Ee]}],"row-start-end":[{row:["auto",{span:[Oe,P]},P]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",P]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",P]}],gap:[{gap:[u]}],"gap-x":[{"gap-x":[u]}],"gap-y":[{"gap-y":[u]}],"justify-content":[{justify:["normal",...Ce()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ce(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ce(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",P,r]}],"min-w":[{"min-w":[P,r,"min","max","fit"]}],"max-w":[{"max-w":[P,r,"none","full","min","max","fit","prose",{screen:[re]},re]}],h:[{h:[P,r,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[P,r,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[P,r,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[P,r,"auto","min","max","fit"]}],"font-size":[{text:["base",re,te]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ge]}],"font-family":[{font:[Ee]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",P]}],"line-clamp":[{"line-clamp":["none",ve,Ge]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Z,P]}],"list-image":[{"list-image":["none",P]}],"list-style-type":[{list:["none","disc","decimal",P]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Z,te]}],"underline-offset":[{"underline-offset":["auto",Z,P]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",P]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",P]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...be(),ta]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ea]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sa]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:le()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[Z,P]}],"outline-w":[{outline:[Z,te]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[Z,te]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",re,na]}],"shadow-color":[{shadow:[Ee]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":[...$e(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$e()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",re,P]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",P]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",P]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",P]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Oe,P]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",P]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",P]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",P]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Z,te,Ge]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},la=Gn(ca);function q(...e){return la(Tn(e))}const V=[{code:"GRL",name:"General"},{code:"GFR",name:"Granja Fresco"},{code:"GRE",name:"Granja Refrigerado"},{code:"GTM",name:"Granja Terminado"},{code:"GPA",name:"Granja Panadería"},{code:"GSC",name:"Granja Seco"},{code:"HEL",name:"Heladería"},{code:"REF",name:"Refrigerado"},{code:"CON",name:"Congelado"},{code:"FRU",name:"Frutas"}],da=["CAJA","BOLSA","PAQUETE","KILO"],Pt={name:"Panadería Nueva Río D'or",owner:"TEJAS DE LA CRUZ YOSBANY"};function ne(e){const r=e.toString().padStart(5,"0"),s=parseInt(r.slice(0,2))-1;return s>=0&&s<V.length?V[s].code:V[0].code}function H(e){const r=e.toString().padStart(5,"0");return parseInt(r.slice(2))}function he(e,r){const s=V.findIndex(n=>n.code===e)+1;return parseInt(`${s.toString().padStart(2,"0")}${r.toString().padStart(3,"0")}`)}const St=[{name:"Dashboard",to:"/",icon:fr},{name:"Proveedores",to:"/providers",icon:gr},{name:"Productos",to:"/products",icon:Pe},{name:"Órdenes",to:"/orders",icon:Ve}];function ua(){const{signOut:e}=st(),[r,s]=x.useState(!1);return t.jsx("header",{className:"bg-white border-b border-gray-200",children:t.jsxs("div",{className:"mx-auto px-4",children:[t.jsxs("div",{className:"flex h-16 items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-900 mr-4 whitespace-nowrap",children:"Gestión de Compras"}),t.jsx("button",{onClick:()=>s(!r),className:"md:hidden ml-2 p-2 rounded-md hover:bg-gray-100",children:r?t.jsx(pe,{className:"h-6 w-6"}):t.jsx(hr,{className:"h-6 w-6"})})]}),t.jsxs("nav",{className:"hidden md:flex space-x-4",children:[St.map(n=>t.jsxs(ht,{to:n.to,className:({isActive:a})=>q("inline-flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",a?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[t.jsx(n.icon,{className:"mr-2 h-5 w-5"}),n.name]},n.name)),t.jsxs("button",{onClick:()=>e(),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors",children:[t.jsx(ut,{className:"mr-2 h-5 w-5"}),"Cerrar Sesión"]})]})]}),r&&t.jsxs("nav",{className:"md:hidden py-4 space-y-2",children:[St.map(n=>t.jsxs(ht,{to:n.to,onClick:()=>s(!1),className:({isActive:a})=>q("flex items-center px-3 py-2 text-base font-medium rounded-md w-full transition-colors",a?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[t.jsx(n.icon,{className:"mr-3 h-5 w-5"}),n.name]},n.name)),t.jsxs("button",{onClick:()=>e(),className:"flex items-center px-3 py-2 text-base font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md w-full transition-colors",children:[t.jsx(ut,{className:"mr-3 h-5 w-5"}),"Cerrar Sesión"]})]})]})})}function ma(){return t.jsxs("div",{className:"min-h-screen flex flex-col",children:[t.jsx(ua,{}),t.jsx("main",{className:"flex-1 overflow-auto bg-gray-100 p-4",children:t.jsx(Lt,{})})]})}const k=({className:e,variant:r="primary",size:s="md",isLoading:n,children:a,...o})=>{const i="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",c={primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"hover:bg-gray-100 hover:text-gray-900"},d={sm:"h-9 px-3 text-sm",md:"h-10 px-4",lg:"h-11 px-8"};return t.jsxs("button",{className:q(i,c[r],d[s],e),disabled:n,...o,children:[n?t.jsx("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,a]})},_=Ft.forwardRef(({className:e,label:r,error:s,value:n,type:a,onChange:o,isCurrency:i,...c},d)=>{const[l,m]=x.useState(""),h=y=>{const p=y.toFixed(2).split(".");return p[0]=p[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),p.join(",")};x.useEffect(()=>{i&&typeof n=="number"&&m(h(n))},[n,i]);const u=y=>{var p;if(i){let b=y.target.value.replace(/[^\d.,]/g,"");if(b=b.replace(/,/g,"."),b.split(".").length-1>1){const S=b.split(".");b=S[0]+"."+S.slice(1).join("")}const N=b.split(".");((p=N[1])==null?void 0:p.length)>2&&(N[1]=N[1].slice(0,2),b=N.join("."));const j=parseFloat(b)||0;m(h(j)),o==null||o({...y,target:{...y.target,value:j.toString()}})}else if(a==="number"){const b=y.target.value;(b===""||!isNaN(Number(b)))&&(o==null||o(y))}else o==null||o(y)},g=y=>{var p;i&&typeof n=="number"&&m(n.toFixed(2).replace(".",",")),(p=c.onFocus)==null||p.call(c,y)},f=y=>{var p;i&&typeof n=="number"&&m(h(n)),(p=c.onBlur)==null||p.call(c,y)},w=i?l:a==="number"&&n===0&&!c.min?"":n;return t.jsxs("div",{className:"space-y-2",children:[r&&t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:r}),t.jsxs("div",{className:"relative",children:[i&&t.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),t.jsx("input",{className:q("block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500","focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500","disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",s&&"border-red-500 focus:border-red-500 focus:ring-red-500",i&&"pl-7 text-right",e),ref:d,value:w,onChange:u,onFocus:g,onBlur:f,type:i?"text":a,inputMode:i?"decimal":void 0,...c})]}),s&&t.jsx("p",{className:"text-sm text-red-600",children:s})]})});_.displayName="Input";function ha(){const{user:e,signIn:r}=st(),[s,n]=x.useState(!1),[a,o]=x.useState(""),[i,c]=x.useState(""),[d,l]=x.useState("");if(e)return t.jsx($t,{to:"/",replace:!0});const m=async h=>{h.preventDefault(),l(""),n(!0);try{await r(a,i)}catch(u){console.error("Login error:",u),l("Credenciales inválidas")}finally{n(!1)}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Órdenes de Compra"}),t.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicia sesión para continuar"})]}),t.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo electrónico"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(xr,{className:"h-5 w-5 text-gray-400"})}),t.jsx(_,{id:"email",type:"email",value:a,onChange:h=>o(h.target.value),required:!0,className:"pl-10",placeholder:"Correo electrónico",autoComplete:"email"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(pr,{className:"h-5 w-5 text-gray-400"})}),t.jsx(_,{id:"password",type:"password",value:i,onChange:h=>c(h.target.value),required:!0,className:"pl-10",placeholder:"Contraseña",autoComplete:"current-password"})]})]})]}),d&&t.jsx("div",{className:"text-red-600 text-sm text-center",children:d}),t.jsx(k,{type:"submit",className:"w-full",isLoading:s,children:"Iniciar sesión"})]})]})})}const D=_r(Yt);function We(){const[e,r]=x.useState([]),[s,n]=x.useState(!0);return x.useEffect(()=>{const d=R(D,"providers"),l=ge(d,m=>{const h=m.val(),u=h?Object.entries(h).map(([g,f])=>({id:g,...f})):[];r(u),n(!1)});return()=>l()},[]),{providers:e,loading:s,addProvider:async d=>{const l=R(D,"providers");await De(l,d)},updateProvider:async(d,l)=>{const m=R(D,`providers/${d}`);await zt(m,l)},deleteProvider:async d=>{const l=R(D,`providers/${d}`);await Je(l)},getProvider:async d=>{const l=R(D,`providers/${d}`),m=await oe(l);return m.exists()?{id:d,...m.val()}:null}}}function W({children:e,className:r,isSelected:s,onClick:n}){return t.jsx("div",{className:q("bg-white rounded-lg transition-all duration-200 h-full",s?"border-2 border-blue-500 shadow-sm ring-2 ring-blue-100 bg-blue-50":"border border-gray-200 shadow-sm hover:border-gray-300 hover:shadow",n&&"cursor-pointer",r),onClick:n,children:e})}W.Header=function({children:r,className:s}){return t.jsx("div",{className:q("p-3 sm:p-4 space-y-2",s),children:r})};W.Content=function({children:r,className:s}){return t.jsx("div",{className:q("px-3 sm:px-4 pb-3 sm:pb-4",s),children:r})};W.Footer=function({children:r,className:s}){return t.jsx("div",{className:q("px-3 sm:px-4 py-2 sm:py-3 border-t bg-gray-50/50 rounded-b-lg",s),children:r})};W.Title=function({children:r,className:s}){return t.jsx("h3",{className:q("text-base sm:text-lg font-semibold text-gray-900 line-clamp-2",s),children:r})};W.Grid=function({children:r,className:s}){return t.jsx("div",{className:q("grid grid-cols-2 gap-2 text-sm text-gray-600",s),children:r})};async function fa(e,r){const s=R(D,e),n=De(s);return await Ie(n,r),n.key}async function ga(e,r,s){const n=R(D,`${e}/${r}`);await Ie(n,s)}async function xa(e,r){const s=R(D,`${e}/${r}`);await Je(s)}async function Re(e){const r=R(D,e),s=await oe(r);return s.exists()?Object.entries(s.val()).map(([n,a])=>({id:n,...a})):[]}async function at(e,r,s){const n=R(D,e),a=Ze(n,tt(r),et(s)),o=await oe(a);return o.exists()?Object.entries(o.val()).map(([i,c])=>({id:i,...c})):[]}const pa=["orders","products","providers","packaging"];async function ba(e){try{const r=R(D,e),s=await oe(r);return{name:e,exists:s.exists()}}catch(r){return{name:e,exists:!1,error:r instanceof Error?r.message:"Unknown error"}}}async function ya(e){const r=R(D,e);await Ie(r,{})}async function wa(){try{console.log("Starting collections initialization...");const r=(await Promise.all(pa.map(s=>ba(s)))).filter(s=>!s.exists).map(async({name:s})=>{try{await ya(s),console.log(`Collection "${s}" created successfully`)}catch(n){console.error(`Failed to create collection "${s}":`,n)}});await Promise.all(r),console.log("Collections initialization completed")}catch(e){throw console.error("Failed to initialize collections:",e),e}}wa().catch(e=>{console.error("Critical error during collections initialization:",e)});const se="orders",Me={subscribeToProviderOrders(e,r){const s=R(D,se),n=Ze(s,tt("providerId"),et(e));return ge(n,o=>{if(!o.exists()){r([]);return}const c=Object.entries(o.val()).map(([d,l])=>({id:d,...l})).sort((d,l)=>new Date(l.date).getTime()-new Date(d.date).getTime());r(c)})},async getByProvider(e){try{return(await at(se,"providerId",e)).sort((s,n)=>new Date(n.date).getTime()-new Date(s.date).getTime())}catch(r){return console.error("Error fetching provider orders:",r),[]}},async create(e){try{return await fa(se,e)}catch(r){throw console.error("Error creating order:",r),r}},async update(e,r){try{const s=R(D,`${se}/${e}`),n=await oe(s);if(!n.exists())throw new Error("Order not found");const o={...n.val(),...r};await ga(se,e,o)}catch(s){throw console.error("Error updating order:",s),s}},async delete(e){try{await xa(se,e)}catch(r){throw console.error("Error deleting order:",r),r}}};async function va(e){try{return(await at(se,"providerId",e)).sort((s,n)=>new Date(n.date).getTime()-new Date(s.date).getTime())}catch(r){return console.error("Error fetching provider orders:",r),[]}}async function ja(e){try{const r=await at(se,"providerId",e),s=new Date;return s.setHours(0,0,0,0),r.filter(n=>{const a=new Date(n.date);return a.setHours(0,0,0,0),a.getTime()===s.getTime()}).length}catch(r){return console.error("Error fetching today orders count:",r),0}}function Na(e){const[r,s]=x.useState(0),[n,a]=x.useState(!0),o=x.useCallback(async()=>{if(!e.length){s(0),a(!1);return}const i=e.filter(c=>c.id);if(!i.length){s(0),a(!1);return}try{const c=await Promise.all(i.map(d=>ja(d.id)));s(c.reduce((d,l)=>d+l,0))}catch(c){console.error("Error fetching today orders count:",c),s(0)}finally{a(!1)}},[e]);return x.useEffect(()=>{let i=!0;return(async()=>{i&&await o()})(),()=>{i=!1}},[o]),{count:r,loading:n}}const ot="orders",nr="products";async function Pa(){try{const e=await Re(ot);if(!e||e.length===0)return console.warn("No se encontraron órdenes en la última semana"),[];const r=new Date,s=new Date(r.getTime()-7*24*60*60*1e3),a=e.filter(o=>{const i=new Date(o.date);return i>=s&&i<=r}).reduce((o,i)=>{const c=new Date(i.date).toISOString().split("T")[0];return o[c]=(o[c]||0)+1,o},{});return Object.entries(a).map(([o,i])=>({date:o,count:i})).sort((o,i)=>i.date.localeCompare(o.date))}catch(e){return console.error("Error al obtener el conteo semanal de órdenes:",e instanceof Error?e.message:e),[]}}async function Sa(){try{const[e,r]=await Promise.all([Re(ot),Re(nr)]);if(!e||e.length===0)return console.warn("No se encontraron órdenes"),[];if(!r||r.length===0)return console.warn("No se encontraron productos"),[];const s=new Map;return e.forEach(a=>{a.items.forEach(o=>{const i=s.get(o.productId)||{quantity:0,orders:new Set};i.quantity+=o.quantity,i.orders.add(a.id),s.set(o.productId,i)})}),Array.from(s.entries()).map(([a,o])=>{const i=r.find(c=>c.id===a);return i?{id:a,name:i.name,totalQuantity:o.quantity,orderCount:o.orders.size}:(console.warn(`Producto no encontrado para el ID: ${a}`),null)}).filter(a=>a!==null).sort((a,o)=>o.totalQuantity-a.totalQuantity).slice(0,10)}catch(e){return console.error("Error al obtener los productos más vendidos:",e instanceof Error?e.message:e),[]}}async function Ca(){try{const[e,r]=await Promise.all([Re(ot),Re(nr)]);if(!e||e.length===0)return console.warn("No se encontraron órdenes"),[];if(!r||r.length===0)return console.warn("No se encontraron productos"),[];const s=new Map;return e.forEach(a=>{new Set(a.items.map(i=>i.productId)).forEach(i=>{s.set(i,(s.get(i)||0)+1)})}),Array.from(s.entries()).map(([a,o])=>{const i=r.find(c=>c.id===a);return i?{id:a,name:i.name,frequency:o}:(console.warn(`Producto no encontrado para el ID: ${a}`),null)}).filter(a=>a!==null).sort((a,o)=>o.frequency-a.frequency).slice(0,10)}catch(e){return console.error("Error al obtener la frecuencia de productos:",e instanceof Error?e.message:e),[]}}function ka(){const[e,r]=x.useState([]),[s,n]=x.useState([]),[a,o]=x.useState([]),[i,c]=x.useState(!0),[d,l]=x.useState(null);return x.useEffect(()=>{let m=!0;return(async()=>{try{c(!0);const[u,g,f]=await Promise.all([Pa(),Sa(),Ca()]);if(!m)return;r(u),n(g),o(f),l(null)}catch(u){if(console.error("Error fetching analytics:",u),!m)return;l("Error al cargar los datos analíticos")}finally{m&&c(!1)}})(),()=>{m=!1}},[]),{weeklyOrders:e,topProducts:s,productFrequency:a,loading:i,error:d}}function Ae({title:e,icon:r,children:s,loading:n,className:a,onClick:o}){return t.jsx(W,{className:a,onClick:o,children:t.jsx(W.Header,{className:"!p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:e}),n?t.jsx("div",{className:"h-6 w-24 bg-gray-200 rounded animate-pulse"}):t.jsx("div",{className:"break-words",children:s})]}),t.jsx("div",{className:"flex-shrink-0 p-2 bg-blue-100 rounded-lg",children:r})]})})})}function ce({isOpen:e,onClose:r,title:s,children:n,className:a}){return e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:r}),t.jsxs("div",{className:q("relative transform overflow-hidden rounded-lg bg-white p-6 text-left shadow-xl transition-all w-full max-w-md",a),children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:s}),t.jsx("button",{onClick:r,className:"rounded-full p-1 hover:bg-gray-100",children:t.jsx(pe,{className:"w-5 h-5"})})]}),n]})]})}):null}function Oa({isOpen:e,onClose:r,products:s}){return t.jsx(ce,{isOpen:e,onClose:r,title:"Top 10 Productos Más Comprados",children:t.jsx("div",{className:"space-y-4",children:s.map((n,a)=>t.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white rounded-lg border transition-colors hover:bg-gray-50",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 font-bold",children:a+1}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-medium text-gray-900 truncate",children:n.name}),t.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Pe,{className:"w-4 h-4"}),t.jsxs("span",{children:[n.totalQuantity," unidades"]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Ve,{className:"w-4 h-4"}),t.jsxs("span",{children:[n.orderCount," órdenes"]})]})]})]})]},n.id))})})}function ar(e){const[r,s]=x.useState([]),[n,a]=x.useState(!0);return x.useEffect(()=>{let o=!0;return e?(async()=>{try{const c=await va(e);o&&s(c)}catch(c){console.error("Error fetching provider orders:",c)}finally{o&&a(!1)}})():(s([]),a(!1)),()=>{o=!1}},[e]),{orders:r,loading:n}}function or(e){return He(e)}function ir(e){return ts(e)}const Ea=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function Ma(e,r){if(!r.length)return e;let s=wt(e,1),n=7;for(;n>0;){const a=Ea[s.getDay()];if(r.includes(a))return s;s=wt(s,1),n--}return e}function Ta({provider:e}){const r=At(),{orders:s}=ar(e.id),n=new Date,a=or(n),o=ir(n),i=s.filter(d=>{const l=new Date(d.date);return l>=a&&l<=o}).length,c=()=>{i>0?r(`/orders?provider=${e.id}`):r(`/orders?provider=${e.id}&new=true`)};return t.jsx("li",{className:"py-3",children:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("button",{onClick:c,className:"font-medium text-gray-900 hover:text-blue-600 text-left transition-colors",children:e.legalName&&e.legalName!==e.commercialName?`${e.legalName} (${e.commercialName})`:e.commercialName}),t.jsx("div",{className:"flex items-center gap-3",children:i>0?t.jsxs("span",{className:"text-sm font-medium text-blue-600 whitespace-nowrap",children:[i," ",i===1?"pedido":"pedidos"]}):t.jsx("span",{className:"text-sm font-medium text-amber-600 whitespace-nowrap",children:"Pendiente"})})]})})}function Ra({provider:e}){const{orders:r}=ar(e.id),n=Ma(new Date,e.orderDays||[]),a=r.filter(i=>{const c=new Date(i.date);return c>=or(n)&&c<=ir(n)}),o=a.reduce((i,c)=>i+c.total,0);return t.jsx("li",{className:"py-3",children:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("span",{className:"font-medium text-gray-900",children:e.legalName&&e.legalName!==e.commercialName?`${e.legalName} (${e.commercialName})`:e.commercialName}),t.jsx("div",{className:"flex items-center gap-3",children:a.length>0?t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-sm font-medium text-blue-600",children:U(o)}),t.jsx("div",{className:"text-xs text-gray-500",children:fe(n,"d 'de' MMM",{locale:Ne})})]}):t.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Sin pedidos previos"})})]})})}const Da={lunes:"monday",martes:"tuesday",miércoles:"wednesday",jueves:"thursday",viernes:"friday",sábado:"saturday",domingo:"sunday"};function Ia(){var w;const{providers:e}=We(),r=new Date,s=Da[fe(r,"EEEE",{locale:Ne})],{count:n,loading:a}=Na(e),{weeklyOrders:o,topProducts:i,loading:c}=ka(),[d,l]=x.useState(!1),m=e.filter(y=>{var p;return(p=y.orderDays)==null?void 0:p.includes(s)}),h=((w=o[0])==null?void 0:w.count)||0,u=i[0],g=o.reduce((y,p)=>y+p.count,0),f=i.reduce((y,p)=>y+p.totalQuantity,0);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[t.jsx(W,{children:t.jsx(W.Header,{className:"!p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold capitalize",children:fe(r,"EEEE",{locale:Ne})}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:fe(r,"dd/MM/yyyy")})]}),t.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:t.jsx(Rt,{className:"w-5 h-5 text-orange-600"})})]})})}),t.jsx(W,{children:t.jsx(W.Header,{className:"!p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pedidos Hoy"}),t.jsx("h3",{className:"text-2xl font-bold mt-1",children:a?t.jsx("span",{className:"text-gray-400",children:"..."}):n})]}),t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(Pe,{className:"w-5 h-5 text-purple-600"})})]})})}),t.jsx(Ae,{title:"Órdenes Semanales",icon:t.jsx(br,{className:"w-5 h-5 text-blue-600"}),loading:c,children:t.jsx("h3",{className:"text-2xl font-bold mt-1",children:h})}),t.jsx(Ae,{title:"Total Productos",icon:t.jsx(Qe,{className:"w-5 h-5 text-indigo-600"}),loading:c,children:t.jsx("h3",{className:"text-2xl font-bold mt-1",children:f})}),t.jsx(Ae,{title:"Total Órdenes",icon:t.jsx(Ve,{className:"w-5 h-5 text-amber-600"}),loading:c,children:t.jsx("h3",{className:"text-2xl font-bold mt-1",children:g})}),t.jsx(Ae,{title:"Producto Más Comprado",icon:t.jsx(yr,{className:"w-5 h-5 text-green-600"}),loading:c,className:"lg:col-span-2 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>l(!0),children:u&&t.jsxs("div",{className:"mt-1",children:[t.jsx("h3",{className:"text-lg font-bold break-words",children:u.name}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[u.totalQuantity," unidades en ",u.orderCount," órdenes"]})]})})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs(W,{children:[t.jsx(W.Header,{children:t.jsx(W.Title,{children:"Hoy se deben realizar pedidos a:"})}),t.jsx(W.Content,{children:m.length>0?t.jsx("ul",{className:"divide-y",children:m.map(y=>t.jsx(Ta,{provider:y},y.id))}):t.jsx("p",{className:"text-gray-500 py-3",children:"No hay pedidos programados para hoy"})})]}),t.jsxs(W,{children:[t.jsx(W.Header,{children:t.jsx(W.Title,{children:"Hoy se deben recibir pedidos de:"})}),t.jsx(W.Content,{children:m.length>0?t.jsx("ul",{className:"divide-y",children:m.map(y=>t.jsx(Ra,{provider:y},y.id))}):t.jsx("p",{className:"text-gray-500 py-3",children:"No hay entregas programadas para hoy"})})]})]}),t.jsx(Oa,{isOpen:d,onClose:()=>l(!1),products:i})]})}const Ct=[{value:"monday",label:"Lunes"},{value:"tuesday",label:"Martes"},{value:"wednesday",label:"Miércoles"},{value:"thursday",label:"Jueves"},{value:"friday",label:"Viernes"},{value:"saturday",label:"Sábado"},{value:"sunday",label:"Domingo"}];function Wa({initialData:e,onSubmit:r,onCancel:s,isLoading:n}){const[a,o]=Ft.useState({commercialName:(e==null?void 0:e.commercialName)||"",legalName:(e==null?void 0:e.legalName)||"",rut:(e==null?void 0:e.rut)||"",phone:(e==null?void 0:e.phone)||"",deliveryDays:(e==null?void 0:e.deliveryDays)||[],orderDays:(e==null?void 0:e.orderDays)||[]}),[i,c]=x.useState(""),d=u=>{let g=u.target.value;g=g.replace(/\D/g,""),g.startsWith("598")&&(g=g.slice(3)),g=g.slice(0,9),o(f=>({...f,phone:g})),g&&!vt(g)?c("Ingrese un número de celular válido de Uruguay (8 o 9 dígitos)"):c("")},l=async u=>{if(u.preventDefault(),a.phone&&!vt(a.phone)){c("Ingrese un número de celular válido de Uruguay (8 o 9 dígitos)");return}await r(a)},m=(u,g)=>{o(f=>{var w,y;return{...f,[g==="delivery"?"deliveryDays":"orderDays"]:(w=f[g==="delivery"?"deliveryDays":"orderDays"])!=null&&w.includes(u)?(y=f[g==="delivery"?"deliveryDays":"orderDays"])==null?void 0:y.filter(p=>p!==u):[...f[g==="delivery"?"deliveryDays":"orderDays"]||[],u]}})},h=a.phone?Xt(a.phone):"";return t.jsxs("form",{onSubmit:l,className:"space-y-6",children:[t.jsx(_,{label:"Nombre comercial",value:a.commercialName,onChange:u=>o(g=>({...g,commercialName:u.target.value})),required:!0}),t.jsx(_,{label:"Razón social",value:a.legalName,onChange:u=>o(g=>({...g,legalName:u.target.value}))}),t.jsx(_,{label:"RUT",value:a.rut,onChange:u=>o(g=>({...g,rut:u.target.value}))}),t.jsxs("div",{children:[t.jsx(_,{label:"Celular",type:"tel",value:a.phone,onChange:d,error:i,placeholder:"93609319"}),a.phone&&t.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Se guardará como: ",h]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Días de pedido"}),t.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-7 gap-2",children:Ct.map(({value:u,label:g})=>{var f;return t.jsx("button",{type:"button",onClick:()=>m(u,"order"),className:`
                  px-3 py-2 text-sm font-medium rounded-md transition-colors
                  ${(f=a.orderDays)!=null&&f.includes(u)?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-gray-50 text-gray-600 hover:bg-gray-100"}
                `,children:g},u)})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Días de entrega"}),t.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-7 gap-2",children:Ct.map(({value:u,label:g})=>{var f;return t.jsx("button",{type:"button",onClick:()=>m(u,"delivery"),className:`
                  px-3 py-2 text-sm font-medium rounded-md transition-colors
                  ${(f=a.deliveryDays)!=null&&f.includes(u)?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-50 text-gray-600 hover:bg-gray-100"}
                `,children:g},u)})})]})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx(k,{type:"button",variant:"outline",onClick:s,children:"Cancelar"}),t.jsxs(k,{type:"submit",isLoading:n,children:[e?"Actualizar":"Crear"," Proveedor"]})]})]})}function $a(){const{providers:e,loading:r,addProvider:s,updateProvider:n,deleteProvider:a}=We(),[o,i]=x.useState(!1),[c,d]=x.useState(null),[l,m]=x.useState(!1),[h,u]=x.useState(null),g=async v=>{m(!0);try{c?(await n(c.id,v),O.success("Proveedor actualizado exitosamente")):(await s(v),O.success("Proveedor creado exitosamente")),y()}catch{O.error("Ocurrió un error al guardar el proveedor")}finally{m(!1)}},f=async v=>{u(v)},w=async()=>{if(h)try{await a(h.id),O.success("Proveedor eliminado exitosamente"),u(null)}catch{O.error("Ocurrió un error al eliminar el proveedor")}},y=()=>{i(!1),d(null)},p=v=>{d(v),i(!0)},b=()=>{if(c){const v=ce({isOpen:!0,onClose:()=>{},title:"Advertencia",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-amber-600",children:"Hay un proveedor en edición. ¿Desea cancelar los cambios y crear uno nuevo?"}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(k,{variant:"outline",onClick:()=>v.close(),children:"Cancelar"}),t.jsx(k,{onClick:()=>{d(null),i(!0),v.close()},children:"Continuar"})]})]})})}else i(!0)};return r?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o||c?t.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4",children:[c?"Editar":"Nuevo"," Proveedor"]}),t.jsx(Wa,{initialData:c||void 0,onSubmit:g,onCancel:y,isLoading:l})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-end",children:t.jsxs(k,{onClick:b,children:[t.jsx(qe,{className:"w-4 h-4 mr-2"}),"Nuevo Proveedor"]})}),t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(v=>t.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-lg font-semibold break-words",children:v.commercialName}),v.legalName&&t.jsx("p",{className:"text-sm text-gray-600 break-words",children:v.legalName}),v.rut&&t.jsxs("p",{className:"text-sm text-gray-600",children:["RUT: ",v.rut]}),v.phone&&t.jsxs("p",{className:"text-sm text-gray-600",children:["Celular: ",Xt(v.phone)]})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs(k,{variant:"outline",size:"sm",onClick:()=>p(v),children:[t.jsx(wr,{className:"w-4 h-4 mr-2"}),"Editar"]}),t.jsxs(k,{variant:"outline",size:"sm",onClick:()=>f(v),children:[t.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]}),v.phone&&t.jsx("a",{href:Kt(v.phone,""),target:"_blank",rel:"noopener noreferrer",children:t.jsx(k,{variant:"ghost",size:"sm",children:t.jsx(vr,{className:"w-4 h-4"})})})]})]},v.id))}),t.jsx(ce,{isOpen:!!h,onClose:()=>u(null),title:"Eliminar proveedor",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("p",{className:"text-amber-600",children:['¿Está seguro que desea eliminar el proveedor "',h==null?void 0:h.commercialName,'"?']}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(k,{variant:"outline",onClick:()=>u(null),children:"Cancelar"}),t.jsx(k,{onClick:w,children:"Eliminar"})]})]})})]})}function cr({options:e,value:r,onChange:s,placeholder:n="Seleccionar...",className:a}){const[o,i]=x.useState(!1),[c,d]=x.useState(""),l=x.useRef(null),m=x.useRef(null);x.useEffect(()=>{const f=w=>{l.current&&!l.current.contains(w.target)&&i(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const h=e.filter(f=>f.label.toLowerCase().includes(c.toLowerCase())),u=e.find(f=>f.value===r),g=f=>{s(f.value),d(""),i(!1)};return t.jsxs("div",{className:q("relative",a),ref:l,children:[t.jsx("div",{className:q("flex items-center border rounded-md bg-white",o?"border-blue-500 ring-2 ring-blue-200":"border-gray-300","cursor-pointer"),onClick:()=>{i(!o),!o&&m.current&&m.current.focus()},children:o?t.jsxs("div",{className:"flex-1 flex items-center px-3",children:[t.jsx(Xe,{className:"w-4 h-4 text-gray-400 mr-2"}),t.jsx("input",{ref:m,type:"text",className:"w-full py-2 outline-none",value:c,onChange:f=>d(f.target.value),placeholder:"Buscar...",onClick:f=>f.stopPropagation()})]}):t.jsx("div",{className:"flex-1 p-2 px-3",children:u?u.label:n})}),o&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:h.length>0?h.map(f=>t.jsx("div",{className:q("px-3 py-2 cursor-pointer hover:bg-gray-100",f.value===r&&"bg-blue-50"),onClick:()=>g(f),children:f.label},f.value)):t.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No se encontraron resultados"})})]})}function it(e){const[r,s]=x.useState([]),[n,a]=x.useState(!0);return x.useEffect(()=>{if(!e){s([]),a(!1);return}const d=R(D,"products"),l=Ze(d,tt("providerId"),et(e)),m=ge(l,h=>{const u=h.val(),g=u?Object.entries(u).map(([f,w])=>({id:f,...w})):[];s(g),a(!1)});return()=>m()},[e]),{products:r,loading:n,addProduct:async d=>{const l=R(D,"products");await De(l,d)},updateProduct:async(d,l)=>{const m=R(D,`products/${d}`);await zt(m,l)},deleteProduct:async d=>{const l=R(D,`products/${d}`);await Je(l)}}}function Q(e){const r=e.toString().padStart(5,"0"),s=parseInt(r.slice(0,2))-1;return s>=0&&s<V.length?V[s].code:V[0].code}function ae(e){const r=e.toString().padStart(5,"0");return parseInt(r.slice(2))}function ct(e,r){const s=V.findIndex(n=>n.code===e)+1;return parseInt(`${s.toString().padStart(2,"0")}${r.toString().padStart(3,"0")}`)}function xe(e){const r=Q(e),s=ae(e);return`${r}-${s.toString().padStart(3,"0")}`}function kt(e,r){return e.filter(s=>Q(s.order)===r).sort((s,n)=>ae(s.order)-ae(n.order))}const Ot={GRL:{bg:"bg-gray-100",border:"border-gray-200",text:"text-gray-800"},GFR:{bg:"bg-green-100",border:"border-green-200",text:"text-green-800"},GRE:{bg:"bg-emerald-100",border:"border-emerald-200",text:"text-emerald-800"},GTM:{bg:"bg-teal-100",border:"border-teal-200",text:"text-teal-800"},GPA:{bg:"bg-amber-100",border:"border-amber-200",text:"text-amber-800"},GSC:{bg:"bg-orange-100",border:"border-orange-200",text:"text-orange-800"},HEL:{bg:"bg-blue-100",border:"border-blue-200",text:"text-blue-800"},REF:{bg:"bg-indigo-100",border:"border-indigo-200",text:"text-indigo-800"},CON:{bg:"bg-purple-100",border:"border-purple-200",text:"text-purple-800"},FRU:{bg:"bg-rose-100",border:"border-rose-200",text:"text-rose-800"}};function je(e){return Ot[e]||Ot.GRL}function lt({isOpen:e,onClose:r,product:s,products:n,onOrderChange:a}){const[o,i]=x.useState(Q(s.order)),[c,d]=x.useState(ae(s.order)),[l,m]=x.useState(!1),h=kt(n,o).filter(N=>N.id!==s.id),u=h.length+1,g=c>1?h[c-2]:null,f=c<=h.length?h[c-1]:null,w=je(Q(s.order)),y=je(o),p=N=>{const j=N.target.value;i(j),d(kt(n,j).length+1)},b=N=>{const j=N==="prev"?Math.max(1,c-1):Math.min(u,c+1);d(j)},v=async()=>{if(!l){m(!0);try{const N=ct(o,c);await a(s,N),r()}catch(N){console.error("Error updating order:",N)}finally{m(!1)}}};return t.jsx(ce,{isOpen:e,onClose:r,title:"Cambiar orden del producto",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:`rounded-lg p-4 border ${w.bg} ${w.border}`,children:[t.jsx("div",{className:`text-sm font-medium ${w.text}`,children:s.name}),t.jsxs("div",{className:`text-sm mt-1 ${w.text}`,children:["Orden actual: ",xe(s.order)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sector"}),t.jsx("select",{value:o,onChange:p,className:"w-full rounded-md border border-gray-300 px-3 py-2",disabled:l,children:V.map(N=>{const j=je(N.code);return t.jsxs("option",{value:N.code,className:`${j.bg}`,children:[N.code," - ",N.name]},N.code)})})]}),t.jsx("div",{className:`rounded-lg border p-4 ${y.bg} ${y.border}`,children:t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsx("button",{type:"button",onClick:()=>b("prev"),disabled:c<=1||l,className:`
                h-12 w-12 rounded-full flex items-center justify-center transition-colors
                ${c<=1||l?"bg-white/50 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-white/80"}
              `,children:t.jsx(jr,{className:"w-6 h-6"})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"bg-white rounded-lg py-3 shadow-sm",children:t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-2xl font-bold",children:c}),t.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["de ",u]})]})})}),t.jsx("button",{type:"button",onClick:()=>b("next"),disabled:c>=u||l,className:`
                h-12 w-12 rounded-full flex items-center justify-center transition-colors
                ${c>=u||l?"bg-white/50 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-white/80"}
              `,children:t.jsx(Nr,{className:"w-6 h-6"})})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:`rounded-lg p-4 ${g?"border bg-white":"bg-gray-50 border-2 border-dashed"}`,children:[t.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Anterior"}),g?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:g.name}),t.jsx("div",{className:`text-xs ${y.text}`,children:ae(g.order)})]}):t.jsx("div",{className:"text-sm text-gray-400",children:"No hay producto anterior"})]}),t.jsxs("div",{className:`rounded-lg p-4 ${f?"border bg-white":"bg-gray-50 border-2 border-dashed"}`,children:[t.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Siguiente"}),f?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:f.name}),t.jsx("div",{className:`text-xs ${y.text}`,children:ae(f.order)})]}):t.jsx("div",{className:"text-sm text-gray-400",children:"No hay producto siguiente"})]})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(k,{type:"button",variant:"outline",onClick:r,disabled:l,children:"Cancelar"}),t.jsx(k,{onClick:v,disabled:l,isLoading:l,children:"Confirmar"})]})]})})}function La({product:e,products:r,onEdit:s,onDelete:n,onOrderChange:a,isSelected:o}){const[i,c]=x.useState(!1),d=je(Q(e.order));return t.jsxs(t.Fragment,{children:[t.jsxs(W,{isSelected:o,children:[t.jsx(W.Header,{className:"!p-3",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900 break-words mb-2",children:e.name}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pr,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),t.jsxs("span",{className:"truncate",children:["SKU: ",e.sku]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pe,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),t.jsxs("span",{className:"truncate",children:[e.purchasePackaging," → ",e.salePackaging]})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qe,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),t.jsxs("span",{children:["Stock: ",e.minPackageStock," - ",e.desiredStock]})]}),t.jsx("div",{className:"col-span-2",children:t.jsxs("button",{onClick:()=>c(!0),className:`
                      inline-flex items-center px-2 py-1 rounded-md text-sm transition-colors
                      ${d.bg} ${d.border} ${d.text}
                      hover:opacity-90
                    `,children:[t.jsx(Ke,{className:"w-4 h-4 mr-1.5"}),xe(e.order)]})}),e.tags&&e.tags.length>0&&t.jsxs("div",{className:"col-span-2 flex items-start gap-1.5 mt-1",children:[t.jsx(It,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(l=>t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-gray-100 text-gray-600",children:l},l))})]})]})]}),t.jsx("span",{className:"text-lg font-bold text-blue-600 whitespace-nowrap",children:U(e.price)})]})}),t.jsxs(W.Footer,{className:"flex flex-wrap gap-2 justify-end",children:[t.jsx(k,{variant:"outline",size:"sm",onClick:()=>s(e),children:"Editar"}),t.jsx(k,{variant:"outline",size:"sm",onClick:()=>n(e),className:"hover:bg-red-50 hover:text-red-600",children:"Eliminar"})]})]}),t.jsx(lt,{isOpen:i,onClose:()=>c(!1),product:e,products:r,onOrderChange:a})]})}function Fa(e){const[r,s]=x.useState(!1);return x.useEffect(()=>{const n=window.matchMedia(e);s(n.matches);const a=o=>{s(o.matches)};return n.addEventListener("change",a),()=>n.removeEventListener("change",a)},[e]),r}function Aa({products:e,onEdit:r,onDelete:s,onOrderChange:n,customRender:a}){const o=Fa("(min-width: 1024px)"),i=[...e].sort((d,l)=>d.order-l.order),c=d=>a?a(d):t.jsx(La,{product:d,products:i,onEdit:r,onDelete:s,onOrderChange:n},d.id);return o?t.jsx("div",{className:"grid grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-3",children:i.map(d=>t.jsx("div",{children:c(d)},d.id))}):t.jsx("div",{className:"space-y-3",children:i.map(d=>t.jsx("div",{children:c(d)},d.id))})}function za({onProductSelect:e}){const[r,s]=x.useState(""),[n,a]=x.useState([]),[o,i]=x.useState([]),[c,d]=x.useState({}),[l,m]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const[g,f]=await Promise.all([oe(R(D,"products")),oe(R(D,"providers"))]);if(g.exists()){const w=g.val(),y=Object.entries(w).map(([p,b])=>({id:p,...b}));i(y)}if(f.exists()){const w=f.val();d(w)}}catch(g){console.error("Error fetching data:",g),O.error("Error al buscar productos")}finally{m(!1)}})()},[]),x.useEffect(()=>{if(!r.trim()){a([]);return}const u=r.toLowerCase(),g=o.filter(f=>{var w;return f.name.toLowerCase().includes(u)||xe(f.order).toLowerCase().includes(u)||((w=f.tags)==null?void 0:w.some(y=>y.toLowerCase().includes(u)))}).map(f=>({...f,provider:c[f.providerId]})).sort((f,w)=>{var N,j;const y=f.name.toLowerCase().startsWith(u),p=w.name.toLowerCase().startsWith(u);if(y&&!p)return-1;if(!y&&p)return 1;const b=(N=f.tags)==null?void 0:N.some(S=>S.toLowerCase().startsWith(u)),v=(j=w.tags)==null?void 0:j.some(S=>S.toLowerCase().startsWith(u));return b&&!v?-1:!b&&v?1:f.name.localeCompare(w.name)}).slice(0,5);a(g)},[r,o,c]);const h=u=>{e(u),s(""),a([])};return t.jsxs("div",{className:"relative mb-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx(_,{placeholder:"Buscar productos por nombre o etiquetas...",value:r,onChange:u=>s(u.target.value),className:"pl-10"}),t.jsx(Xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),n.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:n.map(u=>{var g;return t.jsx("button",{onClick:()=>h(u),className:"w-full px-4 py-2 text-left hover:bg-gray-50",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"font-medium text-gray-900",children:u.name}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx(Wt,{className:"w-3 h-3"}),t.jsx("span",{className:"truncate",children:(g=u.provider)==null?void 0:g.commercialName})]}),u.tags&&u.tags.length>0&&t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx(It,{className:"w-3 h-3 text-gray-400"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:u.tags.map(f=>t.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-gray-100 text-gray-600",children:f},f))})]})]}),t.jsx("div",{className:"text-blue-600 font-medium",children:U(u.price)})]})},u.id)})}),l&&r&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"Buscando productos..."})]})}function Et({label:e,value:r,onChange:s,onRemove:n,suggestions:a=[],className:o,error:i,...c}){const[d,l]=x.useState(""),[m,h]=x.useState(!1),u=x.useRef(null),g=x.useRef(null);x.useEffect(()=>{const p=b=>{g.current&&!g.current.contains(b.target)&&h(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const f=p=>{l(p.target.value.toUpperCase()),h(!0)},w=p=>{p.key==="Enter"&&d.trim()&&(p.preventDefault(),s(d.trim()),l(""),h(!1))},y=p=>{var b;s(p),l(""),h(!1),(b=u.current)==null||b.focus()};return t.jsxs("div",{ref:g,className:"relative",children:[e&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t.jsx("div",{className:q("flex items-center min-h-[42px] w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5","focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500",i&&"border-red-500 focus-within:border-red-500 focus-within:ring-red-500",o),children:r?t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800 mr-2",children:[r,t.jsx("button",{type:"button",onClick:n,className:"ml-1 p-0.5 hover:bg-blue-200 rounded-full transition-colors",children:t.jsx(pe,{className:"w-3 h-3"})})]}):t.jsx("input",{ref:u,type:"text",className:"flex-1 outline-none bg-transparent text-gray-900 placeholder-gray-500 text-sm",value:d,onChange:f,onKeyDown:w,onFocus:()=>h(!0),...c})}),i&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:i}),m&&!r&&a.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:a.filter(p=>p.includes(d.toUpperCase())).map(p=>t.jsx("button",{type:"button",className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>y(p),children:p},p))})]})}function qa({label:e,value:r=[],onChange:s,suggestions:n=[],error:a,className:o}){const[i,c]=x.useState(""),[d,l]=x.useState(!1),m=x.useRef(null),h=x.useRef(null);x.useEffect(()=>{const b=v=>{h.current&&!h.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const u=b=>{c(b.target.value.toUpperCase()),l(!0)},g=b=>{b.key==="Enter"&&i.trim()?(b.preventDefault(),f(i.trim())):b.key==="Backspace"&&!i&&r.length>0&&w(r[r.length-1])},f=b=>{const v=b.toUpperCase();r.includes(v)||s([...r,v]),c(""),l(!1)},w=b=>{s(r.filter(v=>v!==b))},y=b=>{var v;f(b),(v=m.current)==null||v.focus()},p=n.filter(b=>!r.includes(b)&&b.includes(i.toUpperCase()));return t.jsxs("div",{ref:h,className:"relative",children:[e&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t.jsxs("div",{className:q("flex flex-wrap items-center gap-2 min-h-[42px] w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5","focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500",a&&"border-red-500 focus-within:border-red-500 focus-within:ring-red-500",o),children:[r.map(b=>t.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800",children:[b,t.jsx("button",{type:"button",onClick:()=>w(b),className:"ml-1 p-0.5 hover:bg-blue-200 rounded-full transition-colors",children:t.jsx(pe,{className:"w-3 h-3"})})]},b)),t.jsx("div",{className:"flex-1 min-w-[120px]",children:t.jsx("input",{ref:m,type:"text",className:"w-full outline-none bg-transparent text-gray-900 placeholder-gray-500 text-sm",value:i,onChange:u,onKeyDown:g,onFocus:()=>l(!0),placeholder:"Agregar etiqueta..."})})]}),a&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),d&&i&&p.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:p.map(b=>t.jsxs("button",{type:"button",className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none flex items-center gap-2",onClick:()=>y(b),children:[t.jsx(qe,{className:"w-4 h-4 text-gray-400"}),b]},b))})]})}function _a(){const[e,r]=x.useState([]),[s,n]=x.useState(!0);return x.useEffect(()=>{const o=R(D,"packaging"),i=R(D,"products"),c=ge(o,l=>{const m=l.val(),h=m?Object.values(m):[],u=[...new Set([...da,...h])];r(u.sort()),n(!1)}),d=ge(i,l=>{const m=l.val();if(m){const h=Object.values(m).map(u=>u.packaging).filter(Boolean).map(u=>u.toUpperCase());r(u=>[...new Set([...u,...h])].sort())}});return()=>{c(),d()}},[]),{packagingSuggestions:e,loading:s,addPackaging:async o=>{const i=R(D,"packaging"),c=De(i);await Ie(c,o.toUpperCase())}}}function Ya(){const[e,r]=x.useState([]),[s,n]=x.useState(!0);return x.useEffect(()=>{const o=R(D,"tags"),i=R(D,"products"),c=ge(o,l=>{const m=l.val(),h=m?Object.values(m):[];r(h.sort()),n(!1)}),d=ge(i,l=>{const m=l.val();if(m){const h=Object.values(m).flatMap(u=>u.tags||[]).filter(Boolean).map(u=>u.toUpperCase());r(u=>[...new Set([...u,...h])].sort())}});return()=>{c(),d()}},[]),{tags:e,loading:s,addTag:async o=>{const i=R(D,"tags"),c=De(i);await Ie(c,o.toUpperCase())}}}function Ga(e,r){return e>r?{field:"minPackageStock",message:"El stock mínimo no puede ser mayor al stock deseado"}:null}function Ha(e){O.error(e.message)}function lr({providerId:e,initialData:r,onSubmit:s,onCancel:n,isLoading:a}){var b,v,N;We();const{packagingSuggestions:o,addPackaging:i}=_a(),{tags:c,addTag:d}=Ya(),{products:l}=it(e),[m,h]=x.useState(!1),[u,g]=x.useState({name:((b=r==null?void 0:r.name)==null?void 0:b.toUpperCase())||"",sku:(r==null?void 0:r.sku)||"",purchasePackaging:((v=r==null?void 0:r.purchasePackaging)==null?void 0:v.toUpperCase())||"",salePackaging:((N=r==null?void 0:r.salePackaging)==null?void 0:N.toUpperCase())||"",order:(r==null?void 0:r.order)||(()=>{const j=V[0].code,S=l.filter(F=>Q(F.order)===j);return ct(j,S.length+1)})(),price:(r==null?void 0:r.price)||0,desiredStock:(r==null?void 0:r.desiredStock)||0,minPackageStock:(r==null?void 0:r.minPackageStock)||0,providerId:(r==null?void 0:r.providerId)||e,tags:(r==null?void 0:r.tags)||[]}),f=async j=>{j.preventDefault();const S=Ga(u.minPackageStock,u.desiredStock);if(S){Ha(S);return}await s(u)},w=async(j,S)=>{g(F=>({...F,order:S})),h(!1)},y=async j=>{g(F=>({...F,tags:j}));const S=j.filter(F=>!c.includes(F));for(const F of S)await d(F)},p=je(Q(u.order));return t.jsxs("form",{onSubmit:f,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(_,{label:"Nombre del producto",value:u.name,onChange:j=>g(S=>({...S,name:j.target.value.toUpperCase()})),required:!0}),t.jsx(_,{label:"SKU",value:u.sku,onChange:j=>g(S=>({...S,sku:j.target.value.toUpperCase()})),required:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(Et,{label:"Empaque de Compra",value:u.purchasePackaging,onChange:async j=>{g(S=>({...S,purchasePackaging:j.toUpperCase()})),o.includes(j.toUpperCase())||await i(j)},onRemove:()=>g(j=>({...j,purchasePackaging:""})),suggestions:o,placeholder:"Escriba y presione Enter"}),t.jsx(Et,{label:"Empaque de Venta",value:u.salePackaging,onChange:async j=>{g(S=>({...S,salePackaging:j.toUpperCase()})),o.includes(j.toUpperCase())||await i(j)},onRemove:()=>g(j=>({...j,salePackaging:""})),suggestions:o,placeholder:"Escriba y presione Enter"})]}),t.jsx(qa,{label:"Etiquetas",value:u.tags,onChange:y,suggestions:c}),t.jsx("div",{className:`rounded-lg p-4 border cursor-pointer transition-colors ${p.bg} ${p.border} hover:opacity-90`,onClick:()=>h(!0),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("label",{className:`text-sm font-medium ${p.text}`,children:"Orden del Producto"}),t.jsx("div",{className:`text-lg font-bold mt-1 ${p.text}`,children:xe(u.order)})]}),t.jsx(Ke,{className:`w-5 h-5 ${p.text}`})]})}),t.jsx(_,{label:"Precio",value:u.price,onChange:j=>g(S=>({...S,price:parseFloat(j.target.value)||0})),min:0,required:!0,isCurrency:!0}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(_,{label:"Stock mínimo",type:"number",value:u.minPackageStock,onChange:j=>g(S=>({...S,minPackageStock:parseInt(j.target.value)||0})),min:0,required:!0}),t.jsx(_,{label:"Stock deseado",type:"number",value:u.desiredStock,onChange:j=>g(S=>({...S,desiredStock:parseInt(j.target.value)||0})),min:0,required:!0})]}),t.jsxs("div",{className:"flex justify-end space-x-4",children:[t.jsx(k,{type:"button",variant:"outline",onClick:n,children:"Cancelar"}),t.jsxs(k,{type:"submit",isLoading:a,children:[r?"Actualizar":"Crear"," Producto"]})]}),r&&t.jsx(lt,{isOpen:m,onClose:()=>h(!1),product:r,products:l,onOrderChange:w})]})}function Ua({providerId:e,initialData:r,onSubmit:s,onCancel:n,isLoading:a}){return t.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[t.jsx("div",{className:"border-b bg-white",children:t.jsxs("div",{className:"flex items-center justify-between px-3 h-14",children:[t.jsxs("h2",{className:"text-lg font-semibold",children:[r?"Editar":"Nuevo"," Producto"]}),t.jsx("button",{onClick:n,disabled:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(pe,{className:"w-5 h-5"})})]})}),t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx("div",{className:"h-full overflow-y-auto",children:t.jsx("div",{className:"container mx-auto max-w-2xl px-3 py-4",children:t.jsx(lr,{providerId:e,initialData:r,onSubmit:s,onCancel:n,isLoading:a})})})})]})}function Mt(e,r,s,n){const a=e.find(d=>d.id===n);if(!a)return e;const o=ne(a.order);if(o!==r){e.filter(l=>ne(l.order)===o&&l.id!==n).sort((l,m)=>H(l.order)-H(m.order));const d=H(a.order);return e.filter(l=>ne(l.order)===r).sort((l,m)=>H(l.order)-H(m.order)),e.map(l=>{if(l.id===n)return{...l,order:he(r,s)};const m=ne(l.order),h=H(l.order);return m===o&&h>d?{...l,order:he(o,h-1)}:m===r&&h>=s?{...l,order:he(r,h+1)}:l})}const c=H(a.order);return e.map(d=>{if(ne(d.order)!==r)return d;if(d.id===n)return{...d,order:he(r,s)};const l=H(d.order);if(s<c){if(l>=s&&l<c)return{...d,order:he(r,l+1)}}else if(s>c&&l<=s&&l>c)return{...d,order:he(r,l-1)};return d})}function Ba(e,r){const s=ne(r.order),n=H(r.order);return e.filter(a=>a.id!==r.id&&ne(a.order)===s).sort((a,o)=>H(a.order)-H(o.order)),e.map(a=>{if(a.id===r.id||ne(a.order)!==s)return a;const o=H(a.order);return o>n?{...a,order:he(s,o-1)}:a})}function Va(){const{providers:e}=We(),[r,s]=x.useState(""),{products:n,loading:a,addProduct:o,updateProduct:i,deleteProduct:c}=it(r),[d,l]=x.useState(!1),[m,h]=x.useState(null),[u,g]=x.useState(!1),[f,w]=x.useState(null),y=async M=>{g(!0);try{if(m){if(await i(m.id,M),M.order!==m.order){const $=Q(M.order),z=ae(M.order),A=Mt(n,$,z,m.id);await Promise.all(A.filter(C=>{var Y;return C.order!==((Y=n.find(B=>B.id===C.id))==null?void 0:Y.order)}).map(C=>i(C.id,{order:C.order})))}O.success("Producto actualizado exitosamente")}else{const $=V[0].code,z=n.filter(C=>Q(C.order)===$),A=ct($,z.length+1);await o({...M,order:A}),O.success("Producto creado exitosamente")}N()}catch($){console.error("Error saving product:",$),O.error("Ocurrió un error al guardar el producto")}finally{g(!1)}},p=async(M,$)=>{try{const z=Q($),A=ae($),C=Mt(n,z,A,M.id);await Promise.all(C.filter(Y=>{var B;return Y.order!==((B=n.find(be=>be.id===Y.id))==null?void 0:B.order)}).map(Y=>i(Y.id,{order:Y.order}))),O.success("Orden actualizado exitosamente")}catch(z){console.error("Error updating order:",z),O.error("Error al actualizar el orden")}},b=async M=>{w(M)},v=async()=>{if(f)try{const M=Ba(n,f);await Promise.all(M.filter($=>{var z;return $.order!==((z=n.find(A=>A.id===$.id))==null?void 0:z.order)}).map($=>i($.id,{order:$.order}))),await c(f.id),O.success("Producto eliminado exitosamente"),w(null)}catch{O.error("Ocurrió un error al eliminar el producto")}},N=()=>{l(!1),h(null)},j=M=>{h(M),l(!0)},S=M=>{h(M),l(!0)},F=e.map(M=>({value:M.id,label:M.commercialName}));return t.jsxs("div",{className:"space-y-4",children:[t.jsx(za,{onProductSelect:S}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[t.jsx("div",{className:"flex-1 max-w-xs",children:t.jsx(cr,{options:F,value:r,onChange:s,placeholder:"Seleccionar Proveedor"})}),r&&t.jsxs(k,{onClick:()=>l(!0),children:[t.jsx(qe,{className:"w-4 h-4 mr-2"}),"Nuevo Producto"]})]}),r?a?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs(t.Fragment,{children:[d&&t.jsx(Ua,{providerId:r,initialData:m||void 0,onSubmit:y,onCancel:N,isLoading:u}),!d&&t.jsx(Aa,{products:n,onEdit:j,onDelete:b,onOrderChange:p})]}):t.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:t.jsx("p",{className:"text-gray-500 text-center px-4",children:"Seleccione un proveedor para ver sus productos"})}),t.jsx(ce,{isOpen:!!f,onClose:()=>w(null),title:"Eliminar producto",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("p",{className:"text-amber-600",children:['¿Está seguro que desea eliminar el producto "',f==null?void 0:f.name,'"?']}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(k,{variant:"outline",onClick:()=>w(null),children:"Cancelar"}),t.jsx(k,{onClick:v,children:"Eliminar"})]})]})})]})}function dr(e){const[r,s]=x.useState([]),[n,a]=x.useState(!0);return x.useEffect(()=>{let d;return(async()=>{if(!e){s([]),a(!1);return}try{const m=await Me.getByProvider(e);m&&s(m),d=Me.subscribeToProviderOrders(e,h=>{console.log("Orders updated:",h),s(h)})}catch(m){console.error("Error setting up orders subscription:",m),O.error("Error al cargar las órdenes")}finally{a(!1)}})(),()=>{d&&d()}},[e]),{orders:r,loading:n,addOrder:async d=>{try{return await Me.create(d)}catch(l){throw console.error("Error creating order:",l),O.error("Error al crear la orden"),l}},updateOrder:async(d,l)=>{try{await Me.update(d,l)}catch(m){throw console.error("Error updating order:",m),O.error("Error al actualizar la orden"),m}},deleteOrder:async d=>{try{await Me.delete(d)}catch(l){throw console.error("Error deleting order:",l),O.error("Error al eliminar la orden"),l}}}}const Tt=32;function Qa(e){return[`Pedido: ${fe(new Date(e),"dd/MM/yyyy HH:mm:ss",{locale:Ne})}`,Pt.name,Pt.owner,"________________________________",""].join(`
`)}function Xa(e,r,s=!1){const n=[...r].sort((o,i)=>{const c=e.find(l=>l.id===o.productId),d=e.find(l=>l.id===i.productId);return!c||!d?0:c.order-d.order});let a=0;return s&&(a=n.reduce((o,i)=>{const c=e.find(l=>l.id===i.productId);if(!c)return o;const d=`${i.quantity} ${c.purchasePackaging}`.length;return Math.max(o,d)},0)),n.map(o=>{const i=e.find(c=>c.id===o.productId);if(!i)return{content:""};if(s){const c=`${o.quantity} ${i.purchasePackaging}`,d=" ".repeat(a-c.length),l=`• *${c}*${d} - `;return{content:i.name,prefix:l}}else return{content:i.name,suffix:`${o.quantity} ${i.purchasePackaging}`}}).filter(o=>o.content)}function Ka(e){if(!e.length)return[];const r=Math.floor(Tt*.6),s=Tt-r-1;return e.map(n=>{let a=n.content;a.length>r?a=a.slice(0,r-3)+"...":a=a.padEnd(r);const i=(n.suffix||"").padStart(s);return`${a} ${i}`})}function dt(e,r,s=!1){const n=Qa(e.date),a=Xa(r,e.items,s);if(s){const o=a.map(i=>`${i.prefix||""}${i.content}`);return`${n}${o.join(`
`)}`}else{const o=Ka(a);return`${n}${o.join(`
`)}`}}function Ja(e,r,s){return dt(e,r,!1)}function Za(e,r,s){return dt(e,r,!0)}function Be({order:e,products:r,provider:s,preview:n=!0}){const a=[...e.items].sort((o,i)=>{const c=r.find(l=>l.id===o.productId),d=r.find(l=>l.id===i.productId);return!c||!d?0:c.order-d.order});if(n){const o=dt(e,r,n),i=n?o.replace(/\*(.*?)\*/g,"<strong>$1</strong>"):o;return t.jsx("div",{className:"font-mono text-sm bg-gray-50 p-4 rounded-lg overflow-x-auto",children:t.jsx("pre",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:i}})})}return t.jsx("div",{className:"space-y-4 print:space-y-2",children:t.jsx("div",{className:"overflow-x-auto -mx-4 px-4",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-200 print:border-gray-300",children:[t.jsx("th",{className:"text-left py-3 font-medium text-gray-600 print:py-2",children:"Producto"}),t.jsx("th",{className:"text-right py-3 font-medium text-gray-600 print:py-2",children:"Cantidad"}),t.jsx("th",{className:"text-right py-3 font-medium text-gray-600 print:py-2",children:"Precio"}),t.jsx("th",{className:"text-right py-3 font-medium text-gray-600 print:py-2",children:"Subtotal"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-100 print:divide-gray-300",children:a.map(o=>{const i=r.find(c=>c.id===o.productId);return i?t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsxs("td",{className:"py-3 print:py-2",children:[t.jsx("div",{className:"font-medium text-gray-900",children:i.name}),i.sku&&t.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:["SKU: ",i.sku]})]}),t.jsxs("td",{className:"py-3 text-right whitespace-nowrap print:py-2",children:[t.jsx("span",{className:"font-medium text-gray-900",children:o.quantity}),t.jsx("span",{className:"text-gray-500 ml-1",children:i.purchasePackaging})]}),t.jsx("td",{className:"py-3 text-right whitespace-nowrap print:py-2 text-gray-600",children:U(o.price)}),t.jsx("td",{className:"py-3 text-right whitespace-nowrap print:py-2 font-medium text-gray-900",children:U(o.subtotal)})]},o.productId):null})}),t.jsx("tfoot",{children:t.jsxs("tr",{className:"border-t border-gray-200 print:border-gray-300 font-medium",children:[t.jsx("td",{colSpan:3,className:"py-3 text-right print:py-2",children:"Total:"}),t.jsx("td",{className:"py-3 text-right print:py-2 text-lg text-blue-600",children:U(e.total)})]})})]})})})}function ur({order:e,products:r,provider:s}){const[n,a]=x.useState(!1),[o,i]=x.useState(!1),[c,d]=x.useState(!1),{updateOrder:l}=dr(s.id),m=Ja(e,r),h=Za(e,r),u=async()=>{if(!s.phone){alert("Este proveedor no tiene número de teléfono registrado");return}d(!0);try{await l(e.id,{...e,status:"completed"});const f=Kt(s.phone,h);window.open(f,"_blank"),a(!1)}catch(f){console.error("Error updating order status:",f),alert("Error al actualizar el estado de la orden")}finally{d(!1)}},g=async()=>{d(!0);try{await l(e.id,{...e,status:"completed"});const f=window.open("","_blank","width=302,height=600");if(!f)throw new Error("No se pudo crear la ventana de impresión");f.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <meta charset="UTF-8">
            <title>Orden - ${s.commercialName}</title>
            <style>
              @page {
                size: 80mm auto;
                margin: 0;
              }
              @media print {
                body {
                  width: 80mm;
                  margin: 0;
                  padding: 8px;
                }
              }
              body {
                font-family: monospace;
                font-size: 12px;
                line-height: 1.2;
                margin: 0;
                padding: 8px;
                width: 80mm;
                white-space: pre-wrap;
              }
            </style>
          </head>
          <body>
            ${m}
          </body>
        </html>
      `),f.document.close(),f.focus(),setTimeout(()=>{try{f.print(),f.onafterprint=()=>{f.close(),i(!1)}}catch(w){console.error("Error during print:",w),f.close(),i(!1)}},500)}catch(f){console.error("Error printing order:",f),alert("Error al imprimir la orden")}finally{d(!1)}};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.phone&&t.jsxs(k,{type:"button",variant:"outline",onClick:()=>a(!0),className:"text-green-600 hover:text-green-700 hover:bg-green-50 w-full sm:w-auto",disabled:c,children:[t.jsx(Sr,{className:"w-4 h-4 mr-2"}),"WhatsApp"]}),t.jsxs(k,{type:"button",variant:"outline",onClick:()=>i(!0),disabled:c,className:"w-full sm:w-auto",children:[t.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]}),t.jsx(ce,{isOpen:n,onClose:()=>a(!1),title:"Confirmar envío por WhatsApp",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{children:"¿Desea enviar el siguiente pedido por WhatsApp?"}),t.jsx(Be,{order:e,products:r,provider:s,preview:!0}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[t.jsx(k,{variant:"outline",onClick:()=>a(!1),disabled:c,className:"w-full sm:w-auto",children:"Cancelar"}),t.jsx(k,{onClick:u,className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",isLoading:c,children:"Enviar"})]})]})}),t.jsx(ce,{isOpen:o,onClose:()=>i(!1),title:"Confirmar impresión",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{children:"¿Desea imprimir el siguiente pedido?"}),t.jsx(Be,{order:e,products:r,provider:s,preview:!1}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[t.jsx(k,{variant:"outline",onClick:()=>i(!1),disabled:c,className:"w-full sm:w-auto",children:"Cancelar"}),t.jsx(k,{onClick:g,isLoading:c,className:"w-full sm:w-auto",children:"Imprimir"})]})]})})]})}function eo({orders:e,products:r,provider:s,onSelect:n,onDelete:a,onViewDetails:o}){const i=[...e].sort((c,d)=>new Date(d.date).getTime()-new Date(c.date).getTime());return t.jsx("div",{className:"space-y-4",children:i.map((c,d)=>{const l=c.items.reduce((h,u)=>h+u.quantity,0),m=i.length-d;return t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"cursor-pointer space-y-3",onClick:()=>n(c,m),children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[c.status==="completed"?t.jsx(kr,{className:"w-5 h-5 text-green-500"}):t.jsx(Or,{className:"w-5 h-5 text-yellow-500"}),t.jsxs("h3",{className:"text-lg font-semibold",children:["Orden #",m," - ",fe(new Date(c.date),"d 'de' MMMM, yyyy",{locale:Ne})]})]})}),t.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[t.jsxs("span",{children:[l," ",l===1?"producto":"productos"]}),t.jsx("span",{className:"font-medium text-blue-600",children:U(c.total)})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[t.jsx(ur,{order:c,products:r,provider:s}),t.jsxs(k,{variant:"outline",size:"sm",onClick:h=>{h.stopPropagation(),o(c,m)},className:"w-full sm:w-auto",children:[t.jsx(Er,{className:"w-4 h-4 mr-2"}),"Ver Detalles"]})]}),t.jsxs(k,{variant:"outline",size:"sm",onClick:h=>{h.stopPropagation(),a(c)},className:"hover:bg-red-50 hover:text-red-600 w-full sm:w-auto",children:[t.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]},c.id)})})}function to({order:e,orderNumber:r,products:s,provider:n,onClose:a}){const o=fe(new Date(e.date),"d 'de' MMMM, yyyy HH:mm",{locale:Ne}),i=e.items.reduce((c,d)=>c+d.quantity,0);return t.jsxs("div",{className:"fixed inset-0 bg-gray-50 z-50 flex flex-col",children:[t.jsx("div",{className:"bg-white border-b print:hidden sticky top-0 z-10",children:t.jsxs("div",{className:"flex items-center justify-between px-3 h-14",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(k,{variant:"ghost",size:"sm",onClick:a,className:"md:hidden",children:t.jsx(Mr,{className:"w-5 h-5"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("h2",{className:"text-lg font-semibold",children:["Orden #",r]}),t.jsx("span",{className:`
                  px-2 py-0.5 text-xs font-medium rounded-full
                  ${e.status==="completed"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}
                `,children:e.status==="completed"?"Completada":"Pendiente"})]}),t.jsx("p",{className:"text-sm text-gray-500",children:o})]})]}),t.jsx("button",{onClick:a,className:"hidden md:flex p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(pe,{className:"w-5 h-5"})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:t.jsxs("div",{className:"container mx-auto max-w-4xl px-3 py-4",children:[t.jsxs("div",{className:"hidden print:block mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-center mb-2",children:"Orden de Compra"}),t.jsxs("div",{className:"text-center text-gray-600 mb-4",children:["#",r]})]}),t.jsxs("div",{className:"grid gap-4",children:[t.jsxs("div",{className:"grid gap-4 sm:grid-cols-3 print:grid-cols-3",children:[t.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm print:border-gray-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:t.jsx(Rt,{className:"w-5 h-5 text-blue-600"})}),t.jsx("h3",{className:"font-medium",children:"Fecha"})]}),t.jsx("p",{className:"text-gray-600",children:o})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm print:border-gray-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:t.jsx(Wt,{className:"w-5 h-5 text-purple-600"})}),t.jsx("h3",{className:"font-medium",children:"Proveedor"})]}),t.jsx("p",{className:"font-medium",children:n.commercialName}),n.legalName&&n.legalName!==n.commercialName&&t.jsx("p",{className:"text-sm text-gray-500",children:n.legalName})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm print:border-gray-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:t.jsx(Pe,{className:"w-5 h-5 text-green-600"})}),t.jsx("h3",{className:"font-medium",children:"Resumen"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"text-gray-600",children:[i," productos"]}),t.jsx("p",{className:"font-medium text-lg text-blue-600",children:U(e.total)})]})]})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm print:border-gray-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 print:mb-2",children:[t.jsx("div",{className:"p-2 bg-amber-50 rounded-lg",children:t.jsx(Tr,{className:"w-5 h-5 text-amber-600"})}),t.jsx("h3",{className:"font-medium",children:"Detalles del Pedido"})]}),t.jsx(Be,{order:e,products:s,provider:n,preview:!1})]}),t.jsx("div",{className:"print:hidden",children:t.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[t.jsx("h3",{className:"font-medium mb-4",children:"Acciones"}),t.jsx(ur,{order:e,products:s,provider:n})]})})]})]})})]})}function ro({providerId:e,product:r,onSubmit:s,onCancel:n,isSubmitting:a}){return t.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[t.jsx("div",{className:"border-b bg-white",children:t.jsxs("div",{className:"flex items-center justify-between px-3 h-16",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"Editar Producto"}),t.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:t.jsx(pe,{className:"w-5 h-5"})})]})}),t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx("div",{className:"h-full overflow-y-auto",children:t.jsx("div",{className:"container mx-auto max-w-2xl px-3 py-4",children:t.jsx(lr,{providerId:e,initialData:r,onSubmit:s,onCancel:n,isLoading:a})})})})]})}function so({product:e,products:r,isSelected:s,quantity:n,onQuantityChange:a,onProductUpdate:o,onReview:i,isReviewed:c}){const[d,l]=x.useState(!1),[m,h]=x.useState(!1),[u,g]=x.useState(!1),f=je(Q(e.order)),w=async(p,b)=>{o&&await o(p,{order:b})},y=async p=>{if(o){g(!0);try{await o(e,p),h(!1)}finally{g(!1)}}};return t.jsxs(t.Fragment,{children:[t.jsx(W,{isSelected:s,children:t.jsx(W.Header,{className:"!p-3",children:t.jsxs("div",{className:"relative",children:[c&&t.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white rounded-full p-1",children:t.jsx(mt,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`
                  flex-shrink-0 w-5 h-5 rounded border cursor-pointer transition-colors mt-1
                  ${s?"bg-blue-500 border-blue-500":"border-gray-300 hover:border-blue-500"}
                `,onClick:()=>a(s?0:1),children:s&&t.jsx(mt,{className:"w-full h-full text-white p-0.5"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 mb-2 hover:text-blue-600 cursor-pointer",onClick:()=>h(!0),children:e.name}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600 mb-3",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(Pe,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),t.jsx("span",{children:e.purchasePackaging})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(Qe,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),t.jsxs("span",{children:["Stock: ",e.minPackageStock," - ",e.desiredStock]})]}),t.jsxs("button",{onClick:()=>l(!0),className:`
                      inline-flex items-center px-2 py-1 rounded-md text-sm transition-colors
                      ${f.bg} ${f.border} ${f.text}
                      hover:opacity-90
                    `,children:[t.jsx(Ke,{className:"w-4 h-4 mr-1.5"}),xe(e.order)]})]}),t.jsxs("div",{className:"flex items-end justify-between gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(k,{type:"button",variant:"outline",size:"sm",onClick:()=>a(n-1),disabled:n<=0,className:"px-2",children:"-"}),t.jsx(_,{type:"number",min:"0",value:n||"",onChange:p=>{const b=parseInt(p.target.value);isNaN(b)||a(b)},placeholder:"0",className:"text-center"}),t.jsx(k,{type:"button",variant:"outline",size:"sm",onClick:()=>a(n+1),className:"px-2",children:"+"})]})}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-lg font-bold text-blue-600",children:U(e.price)}),s&&t.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",U(e.price*n)]})]})]})]})]})]})})}),t.jsx(lt,{isOpen:d,onClose:()=>l(!1),product:e,products:r,onOrderChange:w}),m&&t.jsx(ro,{providerId:e.providerId,product:e,onSubmit:y,onCancel:()=>h(!1),isSubmitting:u})]})}function no({products:e,selectedProducts:r,onProductSelect:s,onProductUpdate:n}){const[a,o]=x.useState(new Set),i=[...e].sort((m,h)=>m.order-h.order),c=(m,h)=>{h>=0&&(s(m,h),l(m))},d=async(m,h)=>{n&&(await n(m.id,h),l(m.id))},l=m=>{o(h=>new Set(h).add(m))};return t.jsx("div",{className:"space-y-3",children:i.map(m=>t.jsx(so,{product:m,products:e,isSelected:r.has(m.id),quantity:r.get(m.id)||0,onQuantityChange:h=>c(m.id,h),onProductUpdate:d,onReview:()=>l(m.id),isReviewed:a.has(m.id)},m.id))})}function ao({currentProducts:e,onProductSelect:r}){const[s,n]=x.useState(""),[a,o]=x.useState([]),[i,c]=x.useState([]),[d,l]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const u=R(D,"products"),g=await oe(u);if(g.exists()){const f=g.val(),w=Object.entries(f).map(([y,p])=>({id:y,...p}));c(w)}}catch(u){console.error("Error fetching products:",u),O.error("Error al buscar productos")}finally{l(!1)}})()},[]),x.useEffect(()=>{if(!s.trim()){o([]);return}const h=new Set(e.map(f=>f.id)),u=s.toLowerCase(),g=i.filter(f=>!h.has(f.id)&&(f.name.toLowerCase().includes(u)||xe(f.order).toLowerCase().includes(u))).sort((f,w)=>{const y=f.name.toLowerCase().startsWith(u),p=w.name.toLowerCase().startsWith(u);return y&&!p?-1:!y&&p?1:f.name.localeCompare(w.name)}).slice(0,5);o(g)},[s,i,e]);const m=h=>{r(h),n(""),o([]),O.success("Producto agregado a la orden")};return t.jsxs("div",{className:"relative mb-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx(_,{placeholder:"Buscar productos de otros proveedores...",value:s,onChange:h=>n(h.target.value),className:"pl-10"}),t.jsx(Xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),a.length>0&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:a.map(h=>t.jsxs("button",{onClick:()=>m(h),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:h.name}),t.jsx("div",{className:"text-sm text-gray-500",children:xe(h.order)})]}),t.jsx("div",{className:"text-blue-600 font-medium whitespace-nowrap",children:U(h.price)})]},h.id))}),d&&s&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg p-4 text-center text-gray-500",children:"Buscando productos..."})]})}function oo({products:e,selectedProducts:r,onProductSelect:s,onProductUpdate:n,onConfirm:a,onCancel:o,isSubmitting:i,provider:c}){const[d,l]=x.useState(e);x.useEffect(()=>{l(u=>{const g=new Set(e.map(w=>w.id)),f=u.filter(w=>!g.has(w.id));return[...e,...f]})},[e]);const m=Array.from(r.entries()).reduce((u,[g,f])=>{const w=d.find(y=>y.id===g);return u+((w==null?void 0:w.price)||0)*f},0),h=u=>{l(g=>g.find(f=>f.id===u.id)?g:[...g,u]),s(u.id,1)};return t.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[t.jsx("div",{className:"border-b bg-white",children:t.jsxs("div",{className:"flex items-center justify-between px-3 h-14",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("h2",{className:"text-lg font-semibold truncate",children:[c.legalName&&c.legalName!==c.commercialName?t.jsxs("span",{className:"text-gray-500",children:[c.legalName," ",t.jsx("span",{className:"mx-1",children:"•"})]}):null,t.jsx("span",{children:c.commercialName})]}),r.size>0&&t.jsxs("div",{className:"text-sm text-gray-600",children:["Importe Total: ",t.jsx("span",{className:"font-medium text-blue-600",children:U(m)})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(k,{variant:"outline",onClick:o,disabled:i,size:"sm",children:"Cancelar"}),t.jsx(k,{onClick:a,isLoading:i,size:"sm",children:"Guardar"})]})]})}),t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx("div",{className:"h-full overflow-y-auto",children:t.jsxs("div",{className:"container mx-auto max-w-3xl px-3 py-4",children:[t.jsx(ao,{currentProducts:e,onProductSelect:h}),t.jsx(no,{products:d,selectedProducts:r,onProductSelect:s,onProductUpdate:n})]})})})]})}function io(e){return Number(e.reduce((r,s)=>r+Number((s.price*s.quantity).toFixed(2)),0).toFixed(2))}function co(e,r){const s=Number(Number(e.price).toFixed(2)),n=Number((s*r).toFixed(2));return{productId:e.id,quantity:Number(r),price:s,subtotal:n}}function lo(e,r,s){if(!e||!s||s.length===0)throw new Error("Invalid order data");const n=Array.from(r.entries()).map(([o,i])=>{const c=s.find(d=>d.id===o);if(!c)throw new Error(`Product ${o} not found`);return co(c,i)}).sort((o,i)=>{const c=s.find(l=>l.id===o.productId),d=s.find(l=>l.id===i.productId);return!c||!d?0:c.order-d.order}),a=io(n);return{providerId:e,date:new Date().toISOString(),status:"pending",items:n,total:a}}function uo(e,r){try{if(!e.providerId)return"El proveedor es requerido";if(!e.items||e.items.length===0)return"Debe agregar al menos un producto";const s=new Set;for(const a of e.items){if(!a.productId)return"Producto inválido";if(s.has(a.productId))return"No puede haber productos duplicados";if(s.add(a.productId),a.quantity<=0)return"La cantidad debe ser mayor a 0";const o=r.find(c=>c.id===a.productId);if(!o)return"Producto no encontrado";if(Math.abs(a.price-o.price)>.01)return`El precio del producto ${o.name} no coincide`;const i=Number((a.price*a.quantity).toFixed(2));if(Math.abs(a.subtotal-i)>.01)return`El subtotal del producto ${o.name} no coincide`}const n=Number(e.items.reduce((a,o)=>a+Number((o.price*o.quantity).toFixed(2)),0).toFixed(2));return Math.abs(e.total-n)>.01?"El total no coincide":null}catch(s){return console.error("Error validating order:",s),"Error al validar la orden"}}function mo(){const e=At(),[r,s]=Ir(),{providers:n}=We(),[a,o]=x.useState(""),{orders:i,loading:c,addOrder:d,updateOrder:l,deleteOrder:m}=dr(a),{products:h,updateProduct:u}=it(a),[g,f]=x.useState(!1),[w,y]=x.useState(null),[p,b]=x.useState(null),[v,N]=x.useState(!1),[j,S]=x.useState(null),[F,M]=x.useState(new Map),[$,z]=x.useState(!1),A=n.find(T=>T.id===a);x.useEffect(()=>{const T=r.get("provider"),L=r.get("new")==="true";if(T){if(o(T),L)f(!0),z(!0);else{const J=new Date,Le=new Date(J.setHours(0,0,0,0)),mr=new Date(J.setHours(23,59,59,999)),Ye=i.find(Fe=>{const ke=new Date(Fe.date);return ke>=Le&&ke<=mr});if(Ye){const Fe=new Map;Ye.items.forEach(ke=>{Fe.set(ke.productId,ke.quantity)}),M(Fe),y(Ye),f(!0),z(!0)}}s({})}},[r,s,i]);const C=(T,L)=>{const J=new Map(F);L>0?J.set(T,L):J.delete(T),M(J)},Y=async()=>{if(!a||!h||!A){O.error("Seleccione un proveedor");return}if(F.size===0){O.error("Debe agregar al menos un producto");return}N(!0);try{const T=lo(a,F,h),L=uo(T,h);if(L){O.error(L);return}w?(await l(w.id,T),O.success("Orden actualizada exitosamente")):(await d(T),O.success("Orden creada exitosamente")),le()}catch(T){console.error("Error saving order:",T),O.error("Ocurrió un error al guardar la orden")}finally{N(!1)}},B=T=>{S(T)},be=async()=>{if(j)try{await m(j.id),O.success("Orden eliminada exitosamente"),S(null)}catch{O.error("Ocurrió un error al eliminar la orden")}},le=()=>{f(!1),y(null),M(new Map),$&&e("/")},$e=(T,L)=>{const J=new Map;T.items.forEach(Le=>{J.set(Le.productId,Le.quantity)}),M(J),y(T),f(!0)},Ce=(T,L)=>{b({order:T,orderNumber:L})},de=n.map(T=>({value:T.id,label:T.commercialName}));return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[t.jsx("div",{className:"flex-1 max-w-xs",children:t.jsx(cr,{options:de,value:a,onChange:o,placeholder:"Seleccionar Proveedor"})}),a&&t.jsxs(k,{onClick:()=>f(!0),children:[t.jsx(qe,{className:"w-4 h-4 mr-2"}),"Nueva Orden"]})]}),a?c?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs(t.Fragment,{children:[g&&A&&t.jsx(oo,{products:h,selectedProducts:F,onProductSelect:C,onProductUpdate:u,onConfirm:Y,onCancel:le,isSubmitting:v,provider:A}),p&&A&&t.jsx(to,{order:p.order,orderNumber:p.orderNumber,products:h,provider:A,onClose:()=>b(null)}),!g&&!p&&t.jsx(eo,{orders:i,products:h,provider:A,onSelect:$e,onDelete:B,onViewDetails:Ce})]}):t.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:t.jsx("p",{className:"text-gray-500 text-center px-4",children:"Seleccione un proveedor para ver sus órdenes"})}),t.jsx(ce,{isOpen:!!j,onClose:()=>S(null),title:"Eliminar orden",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-amber-600",children:"¿Está seguro que desea eliminar esta orden?"}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(k,{variant:"outline",onClick:()=>S(null),children:"Cancelar"}),t.jsx(k,{onClick:be,children:"Eliminar"})]})]})})]})}function ho(){return t.jsx(Wr,{children:t.jsxs(Ur,{children:[t.jsx(Rr,{position:"top-right"}),t.jsxs($r,{children:[t.jsx(ue,{path:"/login",element:t.jsx(ha,{})}),t.jsx(ue,{element:t.jsx(Br,{}),children:t.jsxs(ue,{element:t.jsx(ma,{}),children:[t.jsx(ue,{path:"/",element:t.jsx(Ia,{})}),t.jsx(ue,{path:"/providers",element:t.jsx($a,{})}),t.jsx(ue,{path:"/products",element:t.jsx(Va,{})}),t.jsx(ue,{path:"/orders",element:t.jsx(mo,{})})]})})]})]})})}qt(document.getElementById("root")).render(t.jsx(x.StrictMode,{children:t.jsx(ho,{})}));
//# sourceMappingURL=index-DH92ohOf.js.map
