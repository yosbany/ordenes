import{j as r,n as E,X as je,M as kr,L as wt,a as Or,U as qt,P as Oe,S as rt,b as Er,c as Mr,C as _t,A as st,B as Tr,T as Dr,d as Be,e as Rr,f as Yt,g as Lr,h as Fe,i as Ir,k as Wr,l as $r,m as nt,o as Gt,p as Ht,q as Fr,r as Ar,s as zr,t as qr,E as _r,u as Yr,F as Gr,v as vt,I as Hr}from"./ui-BesVR3sm.js";import{a as Ur,r as g,N as Ut,O as Bt,b as jt,R as Vt,u as Qt,c as Br,H as Vr,d as Qr,e as pe}from"./vendor-DkOrtBC1.js";import{i as Xr,g as Kr,s as Jr,a as Zr,o as es,b as ts,r as M,c as oe,p as Ae,u as Xt,d as at,e as ie,f as ze,q as ot,h as it,j as ct}from"./firebase-CuCkz2wO.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var Kt,Nt=Ur;Kt=Nt.createRoot,Nt.hydrateRoot;const Jt={apiKey:"AIzaSyBopcfbHLrWQZOsgitRYWk5h26ipYbD-hE",authDomain:"nrd-ordenes-prod.firebaseapp.com",databaseURL:"https://nrd-ordenes-prod-default-rtdb.firebaseio.com",projectId:"nrd-ordenes-prod",storageBucket:"nrd-ordenes-prod.firebasestorage.app",messagingSenderId:"766340976237",appId:"1:766340976237:web:e7123eedb37568a2f9b964"},rs="production";console.log(`Running in ${rs} mode`);console.log(`Using database: ${Jt.databaseURL}`);const Zt=Xr(Jt),lt=Kr(Zt);async function ss(e,t){try{return(await Jr(lt,e,t)).user}catch(s){throw console.error("Sign in error:",s),s}}async function ns(){try{await Zr(lt)}catch(e){throw console.error("Sign out error:",e),e}}const er=g.createContext(void 0);function as({children:e}){const[t,s]=g.useState(null),[n,a]=g.useState(!0);g.useEffect(()=>es(lt,d=>{s(d),a(!1)}),[]);const i={user:t,loading:n,signIn:async(l,d)=>{try{await ss(l,d),E.success("¡Bienvenido!")}catch(u){throw console.error("Sign in error:",u),E.error("Credenciales inválidas"),u}},signOut:async()=>{try{await ns(),E.success("Sesión cerrada")}catch(l){throw console.error("Sign out error:",l),E.error("Error al cerrar sesión"),l}}};return r.jsx(er.Provider,{value:i,children:!n&&e})}function dt(){const e=g.useContext(er);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function os(){const{user:e}=dt();return e?r.jsx(Bt,{}):r.jsx(Ut,{to:"/login",replace:!0})}function U(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function he(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function is(e,t){const s=U(e);return isNaN(t)?he(e,NaN):(s.setDate(s.getDate()+t),s)}const tr=6048e5,cs=864e5;let ls={};function Ve(){return ls}function $e(e,t){var i,l,d,u;const s=Ve(),n=(t==null?void 0:t.weekStartsOn)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.weekStartsOn)??s.weekStartsOn??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=U(e),o=a.getDay(),c=(o<n?7:0)+o-n;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function Ue(e){return $e(e,{weekStartsOn:1})}function rr(e){const t=U(e),s=t.getFullYear(),n=he(e,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const a=Ue(n),o=he(e,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const c=Ue(o);return t.getTime()>=a.getTime()?s+1:t.getTime()>=c.getTime()?s:s-1}function Je(e){const t=U(e);return t.setHours(0,0,0,0),t}function St(e){const t=U(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function ds(e,t){const s=Je(e),n=Je(t),a=+s-St(s),o=+n-St(n);return Math.round((a-o)/cs)}function us(e){const t=rr(e),s=he(e,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),Ue(s)}function ms(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function hs(e){if(!ms(e)&&typeof e!="number")return!1;const t=U(e);return!isNaN(Number(t))}function fs(e){const t=U(e);return t.setHours(23,59,59,999),t}function gs(e){const t=U(e),s=he(e,0);return s.setFullYear(t.getFullYear(),0,1),s.setHours(0,0,0,0),s}const xs={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ps=(e,t,s)=>{let n;const a=xs[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function Pe(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const bs={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ys={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ws={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vs={date:Pe({formats:bs,defaultWidth:"full"}),time:Pe({formats:ys,defaultWidth:"full"}),dateTime:Pe({formats:ws,defaultWidth:"full"})},js={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ns=(e,t,s,n)=>js[e];function Z(e){return(t,s)=>{const n=s!=null&&s.context?String(s.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const c=e.defaultFormattingWidth||e.defaultWidth,i=s!=null&&s.width?String(s.width):c;a=e.formattingValues[i]||e.formattingValues[c]}else{const c=e.defaultWidth,i=s!=null&&s.width?String(s.width):e.defaultWidth;a=e.values[i]||e.values[c]}const o=e.argumentCallback?e.argumentCallback(t):t;return a[o]}}const Ss={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ps={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Cs={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ks={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Os={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Es={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ms=(e,t)=>{const s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},Ts={ordinalNumber:Ms,era:Z({values:Ss,defaultWidth:"wide"}),quarter:Z({values:Ps,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Z({values:Cs,defaultWidth:"wide"}),day:Z({values:ks,defaultWidth:"wide"}),dayPeriod:Z({values:Os,defaultWidth:"wide",formattingValues:Es,defaultFormattingWidth:"wide"})};function ee(e){return(t,s={})=>{const n=s.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const c=o[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?Rs(i,h=>h.test(c)):Ds(i,h=>h.test(c));let d;d=e.valueCallback?e.valueCallback(l):l,d=s.valueCallback?s.valueCallback(d):d;const u=t.slice(c.length);return{value:d,rest:u}}}function Ds(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}function Rs(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}function sr(e){return(t,s={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],o=t.match(e.parsePattern);if(!o)return null;let c=e.valueCallback?e.valueCallback(o[0]):o[0];c=s.valueCallback?s.valueCallback(c):c;const i=t.slice(a.length);return{value:c,rest:i}}}const Ls=/^(\d+)(th|st|nd|rd)?/i,Is=/\d+/i,Ws={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$s={any:[/^b/i,/^(a|c)/i]},Fs={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},As={any:[/1/i,/2/i,/3/i,/4/i]},zs={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_s={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ys={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gs={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Hs={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Us={ordinalNumber:sr({matchPattern:Ls,parsePattern:Is,valueCallback:e=>parseInt(e,10)}),era:ee({matchPatterns:Ws,defaultMatchWidth:"wide",parsePatterns:$s,defaultParseWidth:"any"}),quarter:ee({matchPatterns:Fs,defaultMatchWidth:"wide",parsePatterns:As,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ee({matchPatterns:zs,defaultMatchWidth:"wide",parsePatterns:qs,defaultParseWidth:"any"}),day:ee({matchPatterns:_s,defaultMatchWidth:"wide",parsePatterns:Ys,defaultParseWidth:"any"}),dayPeriod:ee({matchPatterns:Gs,defaultMatchWidth:"any",parsePatterns:Hs,defaultParseWidth:"any"})},Bs={code:"en-US",formatDistance:ps,formatLong:vs,formatRelative:Ns,localize:Ts,match:Us,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vs(e){const t=U(e);return ds(t,gs(t))+1}function Qs(e){const t=U(e),s=+Ue(t)-+us(t);return Math.round(s/tr)+1}function nr(e,t){var u,h,m,x;const s=U(e),n=s.getFullYear(),a=Ve(),o=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(m=a.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??1,c=he(e,0);c.setFullYear(n+1,0,o),c.setHours(0,0,0,0);const i=$e(c,t),l=he(e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const d=$e(l,t);return s.getTime()>=i.getTime()?n+1:s.getTime()>=d.getTime()?n:n-1}function Xs(e,t){var i,l,d,u;const s=Ve(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.firstWeekContainsDate)??s.firstWeekContainsDate??((u=(d=s.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=nr(e,t),o=he(e,0);return o.setFullYear(a,0,n),o.setHours(0,0,0,0),$e(o,t)}function Ks(e,t){const s=U(e),n=+$e(s,t)-+Xs(s,t);return Math.round(n/tr)+1}function D(e,t){const s=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return s+n}const ce={y(e,t){const s=e.getFullYear(),n=s>0?s:1-s;return D(t==="yy"?n%100:n,t.length)},M(e,t){const s=e.getMonth();return t==="M"?String(s+1):D(s+1,2)},d(e,t){return D(e.getDate(),t.length)},a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,t){return D(e.getHours()%12||12,t.length)},H(e,t){return D(e.getHours(),t.length)},m(e,t){return D(e.getMinutes(),t.length)},s(e,t){return D(e.getSeconds(),t.length)},S(e,t){const s=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,s-3));return D(a,t.length)}},Ne={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Pt={G:function(e,t,s){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(e,t,s){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return s.ordinalNumber(a,{unit:"year"})}return ce.y(e,t)},Y:function(e,t,s,n){const a=nr(e,n),o=a>0?a:1-a;if(t==="YY"){const c=o%100;return D(c,2)}return t==="Yo"?s.ordinalNumber(o,{unit:"year"}):D(o,t.length)},R:function(e,t){const s=rr(e);return D(s,t.length)},u:function(e,t){const s=e.getFullYear();return D(s,t.length)},Q:function(e,t,s){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return D(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,s){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return D(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,s){const n=e.getMonth();switch(t){case"M":case"MM":return ce.M(e,t);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,s){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return D(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,s,n){const a=Ks(e,n);return t==="wo"?s.ordinalNumber(a,{unit:"week"}):D(a,t.length)},I:function(e,t,s){const n=Qs(e);return t==="Io"?s.ordinalNumber(n,{unit:"week"}):D(n,t.length)},d:function(e,t,s){return t==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):ce.d(e,t)},D:function(e,t,s){const n=Vs(e);return t==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):D(n,t.length)},E:function(e,t,s){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,s,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return D(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});case"eeee":default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,s,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return D(o,t.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});case"cccc":default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,s){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return D(a,t.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,s){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,s){const n=e.getHours();let a;switch(n===12?a=Ne.noon:n===0?a=Ne.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,s){const n=e.getHours();let a;switch(n>=17?a=Ne.evening:n>=12?a=Ne.afternoon:n>=4?a=Ne.morning:a=Ne.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,s){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return ce.h(e,t)},H:function(e,t,s){return t==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):ce.H(e,t)},K:function(e,t,s){const n=e.getHours()%12;return t==="Ko"?s.ordinalNumber(n,{unit:"hour"}):D(n,t.length)},k:function(e,t,s){let n=e.getHours();return n===0&&(n=24),t==="ko"?s.ordinalNumber(n,{unit:"hour"}):D(n,t.length)},m:function(e,t,s){return t==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):ce.m(e,t)},s:function(e,t,s){return t==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):ce.s(e,t)},S:function(e,t){return ce.S(e,t)},X:function(e,t,s){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return kt(n);case"XXXX":case"XX":return be(n);case"XXXXX":case"XXX":default:return be(n,":")}},x:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"x":return kt(n);case"xxxx":case"xx":return be(n);case"xxxxx":case"xxx":default:return be(n,":")}},O:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ct(n,":");case"OOOO":default:return"GMT"+be(n,":")}},z:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ct(n,":");case"zzzz":default:return"GMT"+be(n,":")}},t:function(e,t,s){const n=Math.trunc(e.getTime()/1e3);return D(n,t.length)},T:function(e,t,s){const n=e.getTime();return D(n,t.length)}};function Ct(e,t=""){const s=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),o=n%60;return o===0?s+String(a):s+String(a)+t+D(o,2)}function kt(e,t){return e%60===0?(e>0?"-":"+")+D(Math.abs(e)/60,2):be(e,t)}function be(e,t=""){const s=e>0?"-":"+",n=Math.abs(e),a=D(Math.trunc(n/60),2),o=D(n%60,2);return s+a+t+o}const Ot=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ar=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Js=(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],n=s[1],a=s[2];if(!a)return Ot(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Ot(n,t)).replace("{{time}}",ar(a,t))},Zs={p:ar,P:Js},en=/^D+$/,tn=/^Y+$/,rn=["D","DD","YY","YYYY"];function sn(e){return en.test(e)}function nn(e){return tn.test(e)}function an(e,t,s){const n=on(e,t,s);if(console.warn(n),rn.includes(e))throw new RangeError(n)}function on(e,t,s){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const cn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ln=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dn=/^'([^]*?)'?$/,un=/''/g,mn=/[a-zA-Z]/;function ae(e,t,s){var u,h,m,x,f,w,y,b;const n=Ve(),a=(s==null?void 0:s.locale)??n.locale??Bs,o=(s==null?void 0:s.firstWeekContainsDate)??((h=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(m=n.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??1,c=(s==null?void 0:s.weekStartsOn)??((w=(f=s==null?void 0:s.locale)==null?void 0:f.options)==null?void 0:w.weekStartsOn)??n.weekStartsOn??((b=(y=n.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??0,i=U(e);if(!hs(i))throw new RangeError("Invalid time value");let l=t.match(ln).map(p=>{const v=p[0];if(v==="p"||v==="P"){const j=Zs[v];return j(p,a.formatLong)}return p}).join("").match(cn).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const v=p[0];if(v==="'")return{isToken:!1,value:hn(p)};if(Pt[v])return{isToken:!0,value:p};if(v.match(mn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:p}});a.localize.preprocessor&&(l=a.localize.preprocessor(i,l));const d={firstWeekContainsDate:o,weekStartsOn:c,locale:a};return l.map(p=>{if(!p.isToken)return p.value;const v=p.value;(!(s!=null&&s.useAdditionalWeekYearTokens)&&nn(v)||!(s!=null&&s.useAdditionalDayOfYearTokens)&&sn(v))&&an(v,t,String(e));const j=Pt[v[0]];return j(i,v,a.localize,d)}).join("")}function hn(e){const t=e.match(dn);return t?t[1].replace(un,"'"):e}function Et(e,t){return is(e,-t)}const fn={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},gn=(e,t,s)=>{let n;const a=fn[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"en "+n:"hace "+n:n},xn={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},pn={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},bn={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yn={date:Pe({formats:xn,defaultWidth:"full"}),time:Pe({formats:pn,defaultWidth:"full"}),dateTime:Pe({formats:bn,defaultWidth:"full"})},wn={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},vn={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},jn=(e,t,s,n)=>t.getHours()!==1?vn[e]:wn[e],Nn={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Sn={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Pn={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Cn={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},kn={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},On={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},En=(e,t)=>Number(e)+"º",Mn={ordinalNumber:En,era:Z({values:Nn,defaultWidth:"wide"}),quarter:Z({values:Sn,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Z({values:Pn,defaultWidth:"wide"}),day:Z({values:Cn,defaultWidth:"wide"}),dayPeriod:Z({values:kn,defaultWidth:"wide",formattingValues:On,defaultFormattingWidth:"wide"})},Tn=/^(\d+)(º)?/i,Dn=/\d+/i,Rn={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},Ln={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},In={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Wn={any:[/1/i,/2/i,/3/i,/4/i]},$n={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Fn={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},An={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},zn={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},qn={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},_n={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Yn={ordinalNumber:sr({matchPattern:Tn,parsePattern:Dn,valueCallback:function(e){return parseInt(e,10)}}),era:ee({matchPatterns:Rn,defaultMatchWidth:"wide",parsePatterns:Ln,defaultParseWidth:"any"}),quarter:ee({matchPatterns:In,defaultMatchWidth:"wide",parsePatterns:Wn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ee({matchPatterns:$n,defaultMatchWidth:"wide",parsePatterns:Fn,defaultParseWidth:"any"}),day:ee({matchPatterns:An,defaultMatchWidth:"wide",parsePatterns:zn,defaultParseWidth:"any"}),dayPeriod:ee({matchPatterns:qn,defaultMatchWidth:"any",parsePatterns:_n,defaultParseWidth:"any"})},fe={code:"es",formatDistance:gn,formatLong:yn,formatRelative:jn,localize:Mn,match:Yn,options:{weekStartsOn:1,firstWeekContainsDate:1}};function te(e){return new Intl.NumberFormat("es-UY",{style:"currency",currency:"UYU"}).format(e)}function or(e){const t=e.replace(/\D/g,""),s=t.startsWith("598")?t.slice(3):t;return s.length>=8?`+598 ${[s.slice(0,2),s.slice(2,5),s.slice(5)].join(" ")}`:`+598 ${s}`}function Mt(e){const t=e.replace(/\D/g,""),s=t.startsWith("598")?t.slice(3):t;return/^[0-9]{8,9}$/.test(s)}function ir(e,t){const s=e.replace(/\D/g,"");return`https://wa.me/${s.startsWith("598")?s:`598${s}`}?text=${encodeURIComponent(t)}`}function cr(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=cr(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function Gn(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=cr(e))&&(n&&(n+=" "),n+=t);return n}const ut="-",Hn=e=>{const t=Bn(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:c=>{const i=c.split(ut);return i[0]===""&&i.length!==1&&i.shift(),lr(i,t)||Un(c)},getConflictingClassGroupIds:(c,i)=>{const l=s[c]||[];return i&&n[c]?[...l,...n[c]]:l}}},lr=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),a=n?lr(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const o=e.join(ut);return(c=t.validators.find(({validator:i})=>i(o)))==null?void 0:c.classGroupId},Tt=/^\[(.+)\]$/,Un=e=>{if(Tt.test(e)){const t=Tt.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Bn=e=>{const{theme:t,prefix:s}=e,n={nextPart:new Map,validators:[]};return Qn(Object.entries(e.classGroups),s).forEach(([o,c])=>{Ze(c,n,o,t)}),n},Ze=(e,t,s,n)=>{e.forEach(a=>{if(typeof a=="string"){const o=a===""?t:Dt(t,a);o.classGroupId=s;return}if(typeof a=="function"){if(Vn(a)){Ze(a(n),t,s,n);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([o,c])=>{Ze(c,Dt(t,o),s,n)})})},Dt=(e,t)=>{let s=e;return t.split(ut).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},Vn=e=>e.isThemeGetter,Qn=(e,t)=>t?e.map(([s,n])=>{const a=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([c,i])=>[t+c,i])):o);return[s,a]}):e,Xn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const a=(o,c)=>{s.set(o,c),t++,t>e&&(t=0,n=s,s=new Map)};return{get(o){let c=s.get(o);if(c!==void 0)return c;if((c=n.get(o))!==void 0)return a(o,c),c},set(o,c){s.has(o)?s.set(o,c):a(o,c)}}},dr="!",Kn=e=>{const{separator:t,experimentalParseClassName:s}=e,n=t.length===1,a=t[0],o=t.length,c=i=>{const l=[];let d=0,u=0,h;for(let y=0;y<i.length;y++){let b=i[y];if(d===0){if(b===a&&(n||i.slice(y,y+o)===t)){l.push(i.slice(u,y)),u=y+o;continue}if(b==="/"){h=y;continue}}b==="["?d++:b==="]"&&d--}const m=l.length===0?i:i.substring(u),x=m.startsWith(dr),f=x?m.substring(1):m,w=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:f,maybePostfixModifierPosition:w}};return s?i=>s({className:i,parseClassName:c}):c},Jn=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(n=>{n[0]==="["?(t.push(...s.sort(),n),s=[]):s.push(n)}),t.push(...s.sort()),t},Zn=e=>({cache:Xn(e.cacheSize),parseClassName:Kn(e),...Hn(e)}),ea=/\s+/,ta=(e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=t,o=[],c=e.trim().split(ea);let i="";for(let l=c.length-1;l>=0;l-=1){const d=c[l],{modifiers:u,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:x}=s(d);let f=!!x,w=n(f?m.substring(0,x):m);if(!w){if(!f){i=d+(i.length>0?" "+i:i);continue}if(w=n(m),!w){i=d+(i.length>0?" "+i:i);continue}f=!1}const y=Jn(u).join(":"),b=h?y+dr:y,p=b+w;if(o.includes(p))continue;o.push(p);const v=a(w,f);for(let j=0;j<v.length;++j){const R=v[j];o.push(b+R)}i=d+(i.length>0?" "+i:i)}return i};function ra(){let e=0,t,s,n="";for(;e<arguments.length;)(t=arguments[e++])&&(s=ur(t))&&(n&&(n+=" "),n+=s);return n}const ur=e=>{if(typeof e=="string")return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=ur(e[n]))&&(s&&(s+=" "),s+=t);return s};function sa(e,...t){let s,n,a,o=c;function c(l){const d=t.reduce((u,h)=>h(u),e());return s=Zn(d),n=s.cache.get,a=s.cache.set,o=i,i(l)}function i(l){const d=n(l);if(d)return d;const u=ta(l,s);return a(l,u),u}return function(){return o(ra.apply(null,arguments))}}const I=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},mr=/^\[(?:([a-z-]+):)?(.+)\]$/i,na=/^\d+\/\d+$/,aa=new Set(["px","full","screen"]),oa=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ia=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ca=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,la=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,da=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ne=e=>Ce(e)||aa.has(e)||na.test(e),le=e=>Ee(e,"length",ba),Ce=e=>!!e&&!Number.isNaN(Number(e)),Xe=e=>Ee(e,"number",Ce),Re=e=>!!e&&Number.isInteger(Number(e)),ua=e=>e.endsWith("%")&&Ce(e.slice(0,-1)),S=e=>mr.test(e),de=e=>oa.test(e),ma=new Set(["length","size","percentage"]),ha=e=>Ee(e,ma,hr),fa=e=>Ee(e,"position",hr),ga=new Set(["image","url"]),xa=e=>Ee(e,ga,wa),pa=e=>Ee(e,"",ya),Le=()=>!0,Ee=(e,t,s)=>{const n=mr.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):s(n[2]):!1},ba=e=>ia.test(e)&&!ca.test(e),hr=()=>!1,ya=e=>la.test(e),wa=e=>da.test(e),va=()=>{const e=I("colors"),t=I("spacing"),s=I("blur"),n=I("brightness"),a=I("borderColor"),o=I("borderRadius"),c=I("borderSpacing"),i=I("borderWidth"),l=I("contrast"),d=I("grayscale"),u=I("hueRotate"),h=I("invert"),m=I("gap"),x=I("gradientColorStops"),f=I("gradientColorStopPositions"),w=I("inset"),y=I("margin"),b=I("opacity"),p=I("padding"),v=I("saturate"),j=I("scale"),R=I("sepia"),z=I("skew"),P=I("space"),O=I("translate"),F=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",S,t],N=()=>[S,t],H=()=>["",ne,le],_=()=>["auto",Ce,S],G=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>["start","end","center","between","around","evenly","stretch"],xe=()=>["","0",S],Te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[Ce,S];return{cacheSize:500,separator:":",theme:{colors:[Le],spacing:[ne,le],blur:["none","",de,S],brightness:B(),borderColor:[e],borderRadius:["none","","full",de,S],borderSpacing:N(),borderWidth:H(),contrast:B(),grayscale:xe(),hueRotate:B(),invert:xe(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[ua,le],inset:A(),margin:A(),opacity:B(),padding:N(),saturate:B(),scale:B(),sepia:xe(),skew:B(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",S]}],container:["container"],columns:[{columns:[de]}],"break-after":[{"break-after":Te()}],"break-before":[{"break-before":Te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...G(),S]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Re,S]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",S]}],grow:[{grow:xe()}],shrink:[{shrink:xe()}],order:[{order:["first","last","none",Re,S]}],"grid-cols":[{"grid-cols":[Le]}],"col-start-end":[{col:["auto",{span:["full",Re,S]},S]}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":[Le]}],"row-start-end":[{row:["auto",{span:[Re,S]},S]}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",S]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",S]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...re()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...re(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...re(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",S,t]}],"min-w":[{"min-w":[S,t,"min","max","fit"]}],"max-w":[{"max-w":[S,t,"none","full","min","max","fit","prose",{screen:[de]},de]}],h:[{h:[S,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[S,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[S,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[S,t,"auto","min","max","fit"]}],"font-size":[{text:["base",de,le]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xe]}],"font-family":[{font:[Le]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",S]}],"line-clamp":[{"line-clamp":["none",Ce,Xe]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ne,S]}],"list-image":[{"list-image":["none",S]}],"list-style-type":[{list:["none","disc","decimal",S]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ne,le]}],"underline-offset":[{"underline-offset":["auto",ne,S]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",S]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",S]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...G(),fa]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ha]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xa]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:$()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[ne,S]}],"outline-w":[{outline:[ne,le]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[ne,le]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",de,pa]}],"shadow-color":[{shadow:[Le]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",de,S]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[c]}],"border-spacing-x":[{"border-spacing-x":[c]}],"border-spacing-y":[{"border-spacing-y":[c]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",S]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",S]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",S]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Re,S]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",S]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",S]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",S]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ne,le,Xe]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ja=sa(va);function Y(...e){return ja(Gn(e))}const Q=[{code:"GRL",name:"General"},{code:"GFR",name:"Granja Fresco"},{code:"GRE",name:"Granja Refrigerado"},{code:"GTM",name:"Granja Terminado"},{code:"GPA",name:"Granja Panadería"},{code:"GSC",name:"Granja Seco"},{code:"HEL",name:"Heladería"},{code:"REF",name:"Refrigerado"},{code:"CON",name:"Congelado"},{code:"FRU",name:"Frutas"}],Na=["CAJA","BOLSA","PAQUETE","KILO"],Rt={name:"Panadería Nueva Río D'or",owner:"TEJAS DE LA CRUZ YOSBANY"};function ue(e){const t=e.toString().padStart(5,"0"),s=parseInt(t.slice(0,2))-1;return s>=0&&s<Q.length?Q[s].code:Q[0].code}function V(e){const t=e.toString().padStart(5,"0");return parseInt(t.slice(2))}function ye(e,t){const s=Q.findIndex(n=>n.code===e)+1;return parseInt(`${s.toString().padStart(2,"0")}${t.toString().padStart(3,"0")}`)}const Lt=[{name:"Dashboard",to:"/",icon:Or},{name:"Proveedores",to:"/providers",icon:qt},{name:"Productos",to:"/products",icon:Oe},{name:"Órdenes",to:"/orders",icon:rt}];function Sa(){const{signOut:e}=dt(),[t,s]=g.useState(!1);return r.jsx("header",{className:"bg-white border-b border-gray-200",children:r.jsxs("div",{className:"mx-auto px-4",children:[r.jsxs("div",{className:"flex h-16 items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900 mr-4 whitespace-nowrap",children:"Gestión de Compras"}),r.jsx("button",{onClick:()=>s(!t),className:"md:hidden ml-2 p-2 rounded-md hover:bg-gray-100",children:t?r.jsx(je,{className:"h-6 w-6"}):r.jsx(kr,{className:"h-6 w-6"})})]}),r.jsxs("nav",{className:"hidden md:flex space-x-4",children:[Lt.map(n=>r.jsxs(jt,{to:n.to,className:({isActive:a})=>Y("inline-flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",a?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[r.jsx(n.icon,{className:"mr-2 h-5 w-5"}),n.name]},n.name)),r.jsxs("button",{onClick:()=>e(),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors",children:[r.jsx(wt,{className:"mr-2 h-5 w-5"}),"Cerrar Sesión"]})]})]}),t&&r.jsxs("nav",{className:"md:hidden py-4 space-y-2",children:[Lt.map(n=>r.jsxs(jt,{to:n.to,onClick:()=>s(!1),className:({isActive:a})=>Y("flex items-center px-3 py-2 text-base font-medium rounded-md w-full transition-colors",a?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[r.jsx(n.icon,{className:"mr-3 h-5 w-5"}),n.name]},n.name)),r.jsxs("button",{onClick:()=>e(),className:"flex items-center px-3 py-2 text-base font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md w-full transition-colors",children:[r.jsx(wt,{className:"mr-3 h-5 w-5"}),"Cerrar Sesión"]})]})]})})}function Pa(){return r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(Sa,{}),r.jsx("main",{className:"flex-1 overflow-auto bg-gray-100 p-4",children:r.jsx(Bt,{})})]})}const C=({className:e,variant:t="primary",size:s="md",isLoading:n,children:a,...o})=>{const c="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",i={primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",ghost:"hover:bg-gray-100 hover:text-gray-900"},l={sm:"h-9 px-3 text-sm",md:"h-10 px-4",lg:"h-11 px-8"};return r.jsxs("button",{className:Y(c,i[t],l[s],e),disabled:n,...o,children:[n?r.jsx("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):null,a]})},q=Vt.forwardRef(({className:e,label:t,error:s,value:n,type:a,onChange:o,isCurrency:c,...i},l)=>{const[d,u]=g.useState(""),h=y=>{const b=y.toFixed(2).split(".");return b[0]=b[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),b.join(",")};g.useEffect(()=>{c&&typeof n=="number"&&u(h(n))},[n,c]);const m=y=>{var b;if(c){let p=y.target.value.replace(/[^\d.,]/g,"");if(p=p.replace(/,/g,"."),p.split(".").length-1>1){const z=p.split(".");p=z[0]+"."+z.slice(1).join("")}const j=p.split(".");((b=j[1])==null?void 0:b.length)>2&&(j[1]=j[1].slice(0,2),p=j.join("."));const R=parseFloat(p)||0;u(h(R)),o==null||o({...y,target:{...y.target,value:R.toString()}})}else if(a==="number"){const p=y.target.value;(p===""||!isNaN(Number(p)))&&(o==null||o(y))}else o==null||o(y)},x=y=>{var b;c&&typeof n=="number"&&u(n.toFixed(2).replace(".",",")),(b=i.onFocus)==null||b.call(i,y)},f=y=>{var b;c&&typeof n=="number"&&u(h(n)),(b=i.onBlur)==null||b.call(i,y)},w=c?d:a==="number"&&n===0&&!i.min?"":n;return r.jsxs("div",{className:"space-y-2",children:[t&&r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t}),r.jsxs("div",{className:"relative",children:[c&&r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),r.jsx("input",{className:Y("block w-full rounded-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500","focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500","disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",s&&"border-red-500 focus:border-red-500 focus:ring-red-500",c&&"pl-7 text-right",e),ref:l,value:w,onChange:m,onFocus:x,onBlur:f,type:c?"text":a,inputMode:c?"decimal":void 0,...i})]}),s&&r.jsx("p",{className:"text-sm text-red-600",children:s})]})});q.displayName="Input";function Ca(){const{user:e,signIn:t}=dt(),[s,n]=g.useState(!1),[a,o]=g.useState(""),[c,i]=g.useState(""),[l,d]=g.useState("");if(e)return r.jsx(Ut,{to:"/",replace:!0});const u=async h=>{h.preventDefault(),d(""),n(!0);try{await t(a,c)}catch(m){console.error("Login error:",m),d("Credenciales inválidas")}finally{n(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Órdenes de Compra"}),r.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicia sesión para continuar"})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo electrónico"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Er,{className:"h-5 w-5 text-gray-400"})}),r.jsx(q,{id:"email",type:"email",value:a,onChange:h=>o(h.target.value),required:!0,className:"pl-10",placeholder:"Correo electrónico",autoComplete:"email"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Mr,{className:"h-5 w-5 text-gray-400"})}),r.jsx(q,{id:"password",type:"password",value:c,onChange:h=>i(h.target.value),required:!0,className:"pl-10",placeholder:"Contraseña",autoComplete:"current-password"})]})]})]}),l&&r.jsx("div",{className:"text-red-600 text-sm text-center",children:l}),r.jsx(C,{type:"submit",className:"w-full",isLoading:s,children:"Iniciar sesión"})]})]})})}const T=ts(Zt);function qe(){const[e,t]=g.useState([]),[s,n]=g.useState(!0);return g.useEffect(()=>{const l=M(T,"providers"),d=oe(l,u=>{const h=u.val(),m=h?Object.entries(h).map(([x,f])=>({id:x,...f})):[];t(m),n(!1)});return()=>d()},[]),{providers:e,loading:s,addProvider:async l=>{const d=M(T,"providers");await Ae(d,l)},updateProvider:async(l,d)=>{const u=M(T,`providers/${l}`);await Xt(u,d)},deleteProvider:async l=>{const d=M(T,`providers/${l}`);await at(d)},getProvider:async l=>{const d=M(T,`providers/${l}`),u=await ie(d);return u.exists()?{id:l,...u.val()}:null}}}function W({children:e,className:t,isSelected:s,onClick:n}){return r.jsx("div",{className:Y("bg-white rounded-lg transition-all duration-200 h-full",s?"border-2 border-blue-500 shadow-sm ring-2 ring-blue-100 bg-blue-50":"border border-gray-200 shadow-sm hover:border-gray-300 hover:shadow",n&&"cursor-pointer",t),onClick:n,children:e})}W.Header=function({children:t,className:s}){return r.jsx("div",{className:Y("p-3 sm:p-4 space-y-2",s),children:t})};W.Content=function({children:t,className:s}){return r.jsx("div",{className:Y("px-3 sm:px-4 pb-3 sm:pb-4",s),children:t})};W.Footer=function({children:t,className:s}){return r.jsx("div",{className:Y("px-3 sm:px-4 py-2 sm:py-3 border-t bg-gray-50/50 rounded-b-lg",s),children:t})};W.Title=function({children:t,className:s}){return r.jsx("h3",{className:Y("text-base sm:text-lg font-semibold text-gray-900 line-clamp-2",s),children:t})};W.Grid=function({children:t,className:s}){return r.jsx("div",{className:Y("grid grid-cols-2 gap-2 text-sm text-gray-600",s),children:t})};function fr(e){return new Date(e)}function mt(e){return Je(new Date(e))}function ht(e){return fs(new Date(e))}function ka(e){return mt(e).getTime()}function Oa(e){return ht(e).getTime()}function et(){return Date.now()}const gr=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function Ea(e,t){if(!t.length)return e;let s=Et(e,1),n=7;for(;n>0;){const a=gr[s.getDay()];if(t.includes(a))return s;s=Et(s,1),n--}return e}function Ma(e){return gr[e.getDay()]}function Ta(){const[e,t]=g.useState(0),[s,n]=g.useState(!0);return g.useEffect(()=>{(async()=>{try{const o=M(T,"orders"),c=await ie(o);if(!c.exists()){t(0);return}const i=ka(et()),l=Oa(et()),u=Object.values(c.val()).filter(h=>h.date>=i&&h.date<=l);t(u.length)}catch(o){console.error("Error fetching today orders count:",o),t(0)}finally{n(!1)}})()},[]),{count:e,loading:s}}async function Da(e,t){const s=M(T,e),n=Ae(s);return await ze(n,t),n.key}async function Ra(e,t,s){const n=M(T,`${e}/${t}`);await ze(n,s)}async function La(e,t){const s=M(T,`${e}/${t}`);await at(s)}async function ve(e){const t=M(T,e),s=await ie(t);return s.exists()?Object.entries(s.val()).map(([n,a])=>({id:n,...a})):[]}async function xr(e,t,s){const n=M(T,e),a=ot(n,ct(t),it(s)),o=await ie(a);return o.exists()?Object.entries(o.val()).map(([c,i])=>({id:c,...i})):[]}const Ia=["orders","products","providers","packaging"];async function Wa(e){try{const t=M(T,e),s=await ie(t);return{name:e,exists:s.exists()}}catch(t){return{name:e,exists:!1,error:t instanceof Error?t.message:"Unknown error"}}}async function $a(e){const t=M(T,e);await ze(t,{})}async function Fa(){try{console.log("Starting collections initialization...");const t=(await Promise.all(Ia.map(s=>Wa(s)))).filter(s=>!s.exists).map(async({name:s})=>{try{await $a(s),console.log(`Collection "${s}" created successfully`)}catch(n){console.error(`Failed to create collection "${s}":`,n)}});await Promise.all(t),console.log("Collections initialization completed")}catch(e){throw console.error("Failed to initialize collections:",e),e}}Fa().catch(e=>{console.error("Critical error during collections initialization:",e)});const ft="orders",gt="products",Aa="providers";async function za(){try{const e=await ve(ft);if(!e||e.length===0)return console.warn("No se encontraron órdenes en la última semana"),[];const t=new Date,s=new Date(t.getTime()-7*24*60*60*1e3),a=e.filter(o=>{const c=new Date(o.date);return c>=s&&c<=t}).reduce((o,c)=>{const i=new Date(c.date).toISOString().split("T")[0];return o[i]=(o[i]||0)+1,o},{});return Object.entries(a).map(([o,c])=>({date:o,count:c})).sort((o,c)=>c.date.localeCompare(o.date))}catch(e){return console.error("Error al obtener el conteo semanal de órdenes:",e instanceof Error?e.message:e),[]}}async function qa(){try{const[e,t]=await Promise.all([ve(ft),ve(gt)]);if(!e||e.length===0)return console.warn("No se encontraron órdenes"),[];if(!t||t.length===0)return console.warn("No se encontraron productos"),[];const s=new Map;return e.forEach(a=>{a.items.forEach(o=>{const c=s.get(o.productId)||{quantity:0,orders:new Set};c.quantity+=o.quantity,c.orders.add(a.id),s.set(o.productId,c)})}),Array.from(s.entries()).map(([a,o])=>{const c=t.find(i=>i.id===a);return c?{id:a,name:c.name,totalQuantity:o.quantity,orderCount:o.orders.size}:(console.warn(`Producto no encontrado para el ID: ${a}`),null)}).filter(a=>a!==null).sort((a,o)=>o.totalQuantity-a.totalQuantity).slice(0,10)}catch(e){return console.error("Error al obtener los productos más vendidos:",e instanceof Error?e.message:e),[]}}async function _a(){try{const[e,t]=await Promise.all([ve(ft),ve(gt)]);if(!e||e.length===0)return console.warn("No se encontraron órdenes"),[];if(!t||t.length===0)return console.warn("No se encontraron productos"),[];const s=new Map;return e.forEach(a=>{new Set(a.items.map(c=>c.productId)).forEach(c=>{s.set(c,(s.get(c)||0)+1)})}),Array.from(s.entries()).map(([a,o])=>{const c=t.find(i=>i.id===a);return c?{id:a,name:c.name,frequency:o}:(console.warn(`Producto no encontrado para el ID: ${a}`),null)}).filter(a=>a!==null).sort((a,o)=>o.frequency-a.frequency).slice(0,10)}catch(e){return console.error("Error al obtener la frecuencia de productos:",e instanceof Error?e.message:e),[]}}async function Ya(){try{const e=await ve(gt);return(e==null?void 0:e.length)||0}catch(e){return console.error("Error getting total products:",e),0}}async function Ga(){try{const e=await ve(Aa);return(e==null?void 0:e.length)||0}catch(e){return console.error("Error getting total providers:",e),0}}function Ha(){const[e,t]=g.useState([]),[s,n]=g.useState([]),[a,o]=g.useState([]),[c,i]=g.useState(0),[l,d]=g.useState(0),[u,h]=g.useState(!0),[m,x]=g.useState(null);return g.useEffect(()=>{let f=!0;return(async()=>{try{h(!0);const[y,b,p,v,j]=await Promise.all([za(),qa(),_a(),Ya(),Ga()]);if(!f)return;t(y),n(b),o(p),i(v),d(j),x(null)}catch(y){if(console.error("Error fetching analytics:",y),!f)return;x("Error al cargar los datos analíticos")}finally{f&&h(!1)}})(),()=>{f=!1}},[]),{weeklyOrders:e,topProducts:s,productFrequency:a,totalProducts:c,totalProviders:l,loading:u,error:m}}function Ie({title:e,icon:t,children:s,loading:n,className:a,onClick:o}){return r.jsx(W,{className:a,onClick:o,children:r.jsx(W.Header,{className:"!p-4",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:e}),n?r.jsx("div",{className:"h-6 w-24 bg-gray-200 rounded animate-pulse"}):r.jsx("div",{className:"break-words",children:s})]}),r.jsx("div",{className:"flex-shrink-0 p-2 bg-blue-100 rounded-lg",children:t})]})})})}function ge({isOpen:e,onClose:t,title:s,children:n,className:a}){return e?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25",onClick:t}),r.jsxs("div",{className:Y("relative transform overflow-hidden rounded-lg bg-white p-6 text-left shadow-xl transition-all w-full max-w-md",a),children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:s}),r.jsx("button",{onClick:t,className:"rounded-full p-1 hover:bg-gray-100",children:r.jsx(je,{className:"w-5 h-5"})})]}),n]})]})}):null}function Ua({isOpen:e,onClose:t,products:s}){return r.jsx(ge,{isOpen:e,onClose:t,title:"Top 10 Productos Más Comprados",children:r.jsx("div",{className:"space-y-4",children:s.map((n,a)=>r.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white rounded-lg border transition-colors hover:bg-gray-50",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 font-bold",children:a+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-gray-900 truncate",children:n.name}),r.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Oe,{className:"w-4 h-4"}),r.jsxs("span",{children:[n.totalQuantity," unidades"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(rt,{className:"w-4 h-4"}),r.jsxs("span",{children:[n.orderCount," órdenes"]})]})]})]})]},n.id))})})}const we="orders",We={subscribeToProviderOrders(e,t){const s=M(T,we),n=ot(s,ct("providerId"),it(e));return oe(n,o=>{if(!o.exists()){t([]);return}const i=Object.entries(o.val()).map(([l,d])=>({id:l,...d})).sort((l,d)=>new Date(d.date).getTime()-new Date(l.date).getTime());t(i)})},async getByProvider(e){try{return(await xr(we,"providerId",e)).sort((s,n)=>new Date(n.date).getTime()-new Date(s.date).getTime())}catch(t){return console.error("Error fetching provider orders:",t),[]}},async create(e){try{return await Da(we,e)}catch(t){throw console.error("Error creating order:",t),t}},async update(e,t){try{const s=M(T,`${we}/${e}`),n=await ie(s);if(!n.exists())throw new Error("Order not found");const o={...n.val(),...t};await Ra(we,e,o)}catch(s){throw console.error("Error updating order:",s),s}},async delete(e){try{await La(we,e)}catch(t){throw console.error("Error deleting order:",t),t}}};async function Ba(e){try{return(await xr(we,"providerId",e)).sort((s,n)=>new Date(n.date).getTime()-new Date(s.date).getTime())}catch(t){return console.error("Error fetching provider orders:",t),[]}}function pr(e){const[t,s]=g.useState([]),[n,a]=g.useState(!0);return g.useEffect(()=>{let o=!0;return e?(async()=>{try{const i=await Ba(e);o&&s(i)}catch(i){console.error("Error fetching provider orders:",i)}finally{o&&a(!1)}})():(s([]),a(!1)),()=>{o=!1}},[e]),{orders:t,loading:n}}function Va({provider:e}){const t=Qt(),{orders:s}=pr(e.id),n=new Date,a=mt(n),o=ht(n),c=s.filter(l=>{const d=new Date(l.date);return d>=a&&d<=o}).length,i=()=>{c>0?t(`/orders?provider=${e.id}`):t(`/orders?provider=${e.id}&new=true`)};return r.jsx("li",{className:"py-3",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("button",{onClick:i,className:"font-medium text-gray-900 hover:text-blue-600 text-left transition-colors",children:e.legalName&&e.legalName!==e.commercialName?`${e.legalName} (${e.commercialName})`:e.commercialName}),r.jsx("div",{className:"flex items-center gap-3",children:c>0?r.jsxs("span",{className:"text-sm font-medium text-blue-600 whitespace-nowrap",children:[c," ",c===1?"pedido":"pedidos"]}):r.jsx("span",{className:"text-sm font-medium text-amber-600 whitespace-nowrap",children:"Pendiente"})})]})})}function Qa({provider:e}){var l;const{orders:t}=pr(e.id),s=new Date,n=Ma(s),a=(l=e.orderDays)==null?void 0:l.includes(n),o=a?s:Ea(s,e.orderDays||[]),c=t.filter(d=>{const u=new Date(d.date);return u>=mt(o)&&u<=ht(o)}),i=c.reduce((d,u)=>d+u.total,0);return r.jsx("li",{className:"py-3",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:e.legalName&&e.legalName!==e.commercialName?`${e.legalName} (${e.commercialName})`:e.commercialName}),r.jsx("div",{className:"flex items-center gap-3",children:c.length>0?r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm font-medium text-blue-600",children:te(i)}),r.jsx("div",{className:"text-xs text-gray-500",children:a?"Pedido de hoy":ae(o,"d 'de' MMM",{locale:fe})})]}):r.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Sin pedidos previos"})})]})})}const Xa={lunes:"monday",martes:"tuesday",miércoles:"wednesday",jueves:"thursday",viernes:"friday",sábado:"saturday",domingo:"sunday"};function Ka(){var y;const{providers:e}=qe(),t=new Date,s=Xa[ae(t,"EEEE",{locale:fe})],{count:n,loading:a}=Ta(),{weeklyOrders:o,topProducts:c,totalProducts:i,totalProviders:l,loading:d}=Ha(),[u,h]=g.useState(!1),m=e.filter(b=>{var p;return(p=b.orderDays)==null?void 0:p.includes(s)}),x=((y=o[0])==null?void 0:y.count)||0,f=c[0],w=o.reduce((b,p)=>b+p.count,0);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[r.jsx(W,{children:r.jsx(W.Header,{className:"!p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl font-bold capitalize",children:ae(t,"EEEE",{locale:fe})}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:ae(t,"dd/MM/yyyy")})]}),r.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-orange-600"})})]})})}),r.jsx(Ie,{title:"Total Productos",icon:r.jsx(st,{className:"w-5 h-5 text-indigo-600"}),loading:d,children:r.jsx("h3",{className:"text-2xl font-bold mt-1",children:i})}),r.jsx(Ie,{title:"Total Proveedores",icon:r.jsx(qt,{className:"w-5 h-5 text-emerald-600"}),loading:d,children:r.jsx("h3",{className:"text-2xl font-bold mt-1",children:l})}),r.jsx(Ie,{title:"Total Órdenes",icon:r.jsx(rt,{className:"w-5 h-5 text-amber-600"}),loading:d,children:r.jsx("h3",{className:"text-2xl font-bold mt-1",children:w})}),r.jsx(W,{children:r.jsx(W.Header,{className:"!p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pedidos Hoy"}),r.jsx("h3",{className:"text-2xl font-bold mt-1",children:a?r.jsx("span",{className:"text-gray-400",children:"..."}):n})]}),r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(Oe,{className:"w-5 h-5 text-purple-600"})})]})})}),r.jsx(Ie,{title:"Órdenes Semanales",icon:r.jsx(Tr,{className:"w-5 h-5 text-blue-600"}),loading:d,children:r.jsx("h3",{className:"text-2xl font-bold mt-1",children:x})}),r.jsx(Ie,{title:"Producto Más Comprado",icon:r.jsx(Dr,{className:"w-5 h-5 text-green-600"}),loading:d,className:"lg:col-span-2 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>h(!0),children:f&&r.jsxs("div",{className:"mt-1",children:[r.jsx("h3",{className:"text-lg font-bold break-words",children:f.name}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[f.totalQuantity," unidades en ",f.orderCount," órdenes"]})]})})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(W,{children:[r.jsx(W.Header,{children:r.jsx(W.Title,{children:"Hoy se deben realizar pedidos a:"})}),r.jsx(W.Content,{children:m.length>0?r.jsx("ul",{className:"divide-y",children:m.map(b=>r.jsx(Va,{provider:b},b.id))}):r.jsx("p",{className:"text-gray-500 py-3",children:"No hay pedidos programados para hoy"})})]}),r.jsxs(W,{children:[r.jsx(W.Header,{children:r.jsx(W.Title,{children:"Hoy se deben recibir pedidos de:"})}),r.jsx(W.Content,{children:m.length>0?r.jsx("ul",{className:"divide-y",children:m.map(b=>r.jsx(Qa,{provider:b},b.id))}):r.jsx("p",{className:"text-gray-500 py-3",children:"No hay entregas programadas para hoy"})})]})]}),r.jsx(Ua,{isOpen:u,onClose:()=>h(!1),products:c})]})}const It=[{value:"monday",label:"Lunes"},{value:"tuesday",label:"Martes"},{value:"wednesday",label:"Miércoles"},{value:"thursday",label:"Jueves"},{value:"friday",label:"Viernes"},{value:"saturday",label:"Sábado"},{value:"sunday",label:"Domingo"}];function Ja({initialData:e,onSubmit:t,onCancel:s,isLoading:n}){const[a,o]=Vt.useState({commercialName:(e==null?void 0:e.commercialName)||"",legalName:(e==null?void 0:e.legalName)||"",rut:(e==null?void 0:e.rut)||"",phone:(e==null?void 0:e.phone)||"",deliveryDays:(e==null?void 0:e.deliveryDays)||[],orderDays:(e==null?void 0:e.orderDays)||[]}),[c,i]=g.useState(""),l=m=>{let x=m.target.value;x=x.replace(/\D/g,""),x.startsWith("598")&&(x=x.slice(3)),x=x.slice(0,9),o(f=>({...f,phone:x})),x&&!Mt(x)?i("Ingrese un número de celular válido de Uruguay (8 o 9 dígitos)"):i("")},d=async m=>{if(m.preventDefault(),a.phone&&!Mt(a.phone)){i("Ingrese un número de celular válido de Uruguay (8 o 9 dígitos)");return}await t(a)},u=(m,x)=>{o(f=>{var w,y;return{...f,[x==="delivery"?"deliveryDays":"orderDays"]:(w=f[x==="delivery"?"deliveryDays":"orderDays"])!=null&&w.includes(m)?(y=f[x==="delivery"?"deliveryDays":"orderDays"])==null?void 0:y.filter(b=>b!==m):[...f[x==="delivery"?"deliveryDays":"orderDays"]||[],m]}})},h=a.phone?or(a.phone):"";return r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsx(q,{label:"Nombre comercial",value:a.commercialName,onChange:m=>o(x=>({...x,commercialName:m.target.value})),required:!0}),r.jsx(q,{label:"Razón social",value:a.legalName,onChange:m=>o(x=>({...x,legalName:m.target.value}))}),r.jsx(q,{label:"RUT",value:a.rut,onChange:m=>o(x=>({...x,rut:m.target.value}))}),r.jsxs("div",{children:[r.jsx(q,{label:"Celular",type:"tel",value:a.phone,onChange:l,error:c,placeholder:"93609319"}),a.phone&&r.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Se guardará como: ",h]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Días de pedido"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-7 gap-2",children:It.map(({value:m,label:x})=>{var f;return r.jsx("button",{type:"button",onClick:()=>u(m,"order"),className:`
                  px-3 py-2 text-sm font-medium rounded-md transition-colors
                  ${(f=a.orderDays)!=null&&f.includes(m)?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-gray-50 text-gray-600 hover:bg-gray-100"}
                `,children:x},m)})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Días de entrega"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-7 gap-2",children:It.map(({value:m,label:x})=>{var f;return r.jsx("button",{type:"button",onClick:()=>u(m,"delivery"),className:`
                  px-3 py-2 text-sm font-medium rounded-md transition-colors
                  ${(f=a.deliveryDays)!=null&&f.includes(m)?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-50 text-gray-600 hover:bg-gray-100"}
                `,children:x},m)})})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx(C,{type:"button",variant:"outline",onClick:s,children:"Cancelar"}),r.jsxs(C,{type:"submit",isLoading:n,children:[e?"Actualizar":"Crear"," Proveedor"]})]})]})}function Za(){const{providers:e,loading:t,addProvider:s,updateProvider:n,deleteProvider:a}=qe(),[o,c]=g.useState(!1),[i,l]=g.useState(null),[d,u]=g.useState(!1),[h,m]=g.useState(null),x=async v=>{u(!0);try{i?(await n(i.id,v),E.success("Proveedor actualizado exitosamente")):(await s(v),E.success("Proveedor creado exitosamente")),y()}catch{E.error("Ocurrió un error al guardar el proveedor")}finally{u(!1)}},f=async v=>{m(v)},w=async()=>{if(h)try{await a(h.id),E.success("Proveedor eliminado exitosamente"),m(null)}catch{E.error("Ocurrió un error al eliminar el proveedor")}},y=()=>{c(!1),l(null)},b=v=>{l(v),c(!0)},p=()=>{if(i){const v=ge({isOpen:!0,onClose:()=>{},title:"Advertencia",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-amber-600",children:"Hay un proveedor en edición. ¿Desea cancelar los cambios y crear uno nuevo?"}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(C,{variant:"outline",onClick:()=>v.close(),children:"Cancelar"}),r.jsx(C,{onClick:()=>{l(null),c(!0),v.close()},children:"Continuar"})]})]})})}else c(!0)};return t?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o||i?r.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4",children:[i?"Editar":"Nuevo"," Proveedor"]}),r.jsx(Ja,{initialData:i||void 0,onSubmit:x,onCancel:y,isLoading:d})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end",children:r.jsxs(C,{onClick:p,children:[r.jsx(Be,{className:"w-4 h-4 mr-2"}),"Nuevo Proveedor"]})}),r.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(v=>r.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-lg shadow-sm space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"text-lg font-semibold break-words",children:v.commercialName}),v.legalName&&r.jsx("p",{className:"text-sm text-gray-600 break-words",children:v.legalName}),v.rut&&r.jsxs("p",{className:"text-sm text-gray-600",children:["RUT: ",v.rut]}),v.phone&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Celular: ",or(v.phone)]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(C,{variant:"outline",size:"sm",onClick:()=>b(v),children:[r.jsx(Rr,{className:"w-4 h-4 mr-2"}),"Editar"]}),r.jsxs(C,{variant:"outline",size:"sm",onClick:()=>f(v),children:[r.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]}),v.phone&&r.jsx("a",{href:ir(v.phone,""),target:"_blank",rel:"noopener noreferrer",children:r.jsx(C,{variant:"ghost",size:"sm",children:r.jsx(Lr,{className:"w-4 h-4"})})})]})]},v.id))}),r.jsx(ge,{isOpen:!!h,onClose:()=>m(null),title:"Eliminar proveedor",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-amber-600",children:['¿Está seguro que desea eliminar el proveedor "',h==null?void 0:h.commercialName,'"?']}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(C,{variant:"outline",onClick:()=>m(null),children:"Cancelar"}),r.jsx(C,{onClick:w,children:"Eliminar"})]})]})})]})}function br({options:e,value:t,onChange:s,placeholder:n="Seleccionar...",className:a}){const[o,c]=g.useState(!1),[i,l]=g.useState(""),d=g.useRef(null),u=g.useRef(null);g.useEffect(()=>{const f=w=>{d.current&&!d.current.contains(w.target)&&c(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const h=e.filter(f=>f.label.toLowerCase().includes(i.toLowerCase())),m=e.find(f=>f.value===t),x=f=>{s(f.value),l(""),c(!1)};return r.jsxs("div",{className:Y("relative",a),ref:d,children:[r.jsx("div",{className:Y("flex items-center border rounded-md bg-white",o?"border-blue-500 ring-2 ring-blue-200":"border-gray-300","cursor-pointer"),onClick:()=>{c(!o),!o&&u.current&&u.current.focus()},children:o?r.jsxs("div",{className:"flex-1 flex items-center px-3",children:[r.jsx(Fe,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsx("input",{ref:u,type:"text",className:"w-full py-2 outline-none",value:i,onChange:f=>l(f.target.value),placeholder:"Buscar...",onClick:f=>f.stopPropagation()})]}):r.jsx("div",{className:"flex-1 p-2 px-3",children:m?m.label:n})}),o&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-auto",children:h.length>0?h.map(f=>r.jsx("div",{className:Y("px-3 py-2 cursor-pointer hover:bg-gray-100",f.value===t&&"bg-blue-50"),onClick:()=>x(f),children:f.label},f.value)):r.jsx("div",{className:"px-3 py-2 text-gray-500",children:"No se encontraron resultados"})})]})}function Se(e){const[t,s]=g.useState([]),[n,a]=g.useState(!0);return g.useEffect(()=>{if(!e){s([]),a(!1);return}const l=M(T,"products"),d=ot(l,ct("providerId"),it(e)),u=oe(d,h=>{const m=h.val(),x=m?Object.entries(m).map(([f,w])=>({id:f,...w})):[];s(x),a(!1)});return()=>u()},[e]),{products:t,loading:n,addProduct:async l=>{const d=M(T,"products");await Ae(d,l)},updateProduct:async(l,d)=>{const u=M(T,`products/${l}`);await Xt(u,d)},deleteProduct:async l=>{const d=M(T,`products/${l}`);await at(d)}}}function X(e){const t=e.toString().padStart(5,"0"),s=parseInt(t.slice(0,2))-1;return s>=0&&s<Q.length?Q[s].code:Q[0].code}function me(e){const t=e.toString().padStart(5,"0");return parseInt(t.slice(2))}function xt(e,t){const s=Q.findIndex(n=>n.code===e)+1;return parseInt(`${s.toString().padStart(2,"0")}${t.toString().padStart(3,"0")}`)}function Me(e){const t=X(e),s=me(e);return`${t}-${s.toString().padStart(3,"0")}`}function Wt(e,t){return e.filter(s=>X(s.order)===t).sort((s,n)=>me(s.order)-me(n.order))}const $t={GRL:{bg:"bg-gray-100",border:"border-gray-200",text:"text-gray-800"},GFR:{bg:"bg-green-100",border:"border-green-200",text:"text-green-800"},GRE:{bg:"bg-emerald-100",border:"border-emerald-200",text:"text-emerald-800"},GTM:{bg:"bg-teal-100",border:"border-teal-200",text:"text-teal-800"},GPA:{bg:"bg-amber-100",border:"border-amber-200",text:"text-amber-800"},GSC:{bg:"bg-orange-100",border:"border-orange-200",text:"text-orange-800"},HEL:{bg:"bg-blue-100",border:"border-blue-200",text:"text-blue-800"},REF:{bg:"bg-indigo-100",border:"border-indigo-200",text:"text-indigo-800"},CON:{bg:"bg-purple-100",border:"border-purple-200",text:"text-purple-800"},FRU:{bg:"bg-rose-100",border:"border-rose-200",text:"text-rose-800"}};function ke(e){return $t[e]||$t.GRL}function pt({isOpen:e,onClose:t,product:s,products:n,onOrderChange:a}){const[o,c]=g.useState(X(s.order)),[i,l]=g.useState(me(s.order)),[d,u]=g.useState(!1),h=Wt(n,o).filter(j=>j.id!==s.id),m=h.length+1,x=i>1?h[i-2]:null,f=i<=h.length?h[i-1]:null,w=ke(X(s.order)),y=ke(o),b=j=>{const R=j.target.value;c(R),l(Wt(n,R).length+1)},p=j=>{const R=j==="prev"?Math.max(1,i-1):Math.min(m,i+1);l(R)},v=async()=>{if(!d){u(!0);try{const j=xt(o,i);await a(s,j),t()}catch(j){console.error("Error updating order:",j)}finally{u(!1)}}};return r.jsx(ge,{isOpen:e,onClose:t,title:"Cambiar orden del producto",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:`rounded-lg p-4 border ${w.bg} ${w.border}`,children:[r.jsx("div",{className:`text-sm font-medium ${w.text}`,children:s.name}),r.jsxs("div",{className:`text-sm mt-1 ${w.text}`,children:["Orden actual: ",Me(s.order)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sector"}),r.jsx("select",{value:o,onChange:b,className:"w-full rounded-md border border-gray-300 px-3 py-2",disabled:d,children:Q.map(j=>{const R=ke(j.code);return r.jsxs("option",{value:j.code,className:`${R.bg}`,children:[j.code," - ",j.name]},j.code)})})]}),r.jsx("div",{className:`rounded-lg border p-4 ${y.bg} ${y.border}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsx("button",{type:"button",onClick:()=>p("prev"),disabled:i<=1||d,className:`
                h-12 w-12 rounded-full flex items-center justify-center transition-colors
                ${i<=1||d?"bg-white/50 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-white/80"}
              `,children:r.jsx(Ir,{className:"w-6 h-6"})}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:"bg-white rounded-lg py-3 shadow-sm",children:r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-2xl font-bold",children:i}),r.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["de ",m]})]})})}),r.jsx("button",{type:"button",onClick:()=>p("next"),disabled:i>=m||d,className:`
                h-12 w-12 rounded-full flex items-center justify-center transition-colors
                ${i>=m||d?"bg-white/50 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-white/80"}
              `,children:r.jsx(Wr,{className:"w-6 h-6"})})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:`rounded-lg p-4 ${x?"border bg-white":"bg-gray-50 border-2 border-dashed"}`,children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Anterior"}),x?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:x.name}),r.jsx("div",{className:`text-xs ${y.text}`,children:me(x.order)})]}):r.jsx("div",{className:"text-sm text-gray-400",children:"No hay producto anterior"})]}),r.jsxs("div",{className:`rounded-lg p-4 ${f?"border bg-white":"bg-gray-50 border-2 border-dashed"}`,children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Siguiente"}),f?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:f.name}),r.jsx("div",{className:`text-xs ${y.text}`,children:me(f.order)})]}):r.jsx("div",{className:"text-sm text-gray-400",children:"No hay producto siguiente"})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(C,{type:"button",variant:"outline",onClick:t,disabled:d,children:"Cancelar"}),r.jsx(C,{onClick:v,disabled:d,isLoading:d,children:"Confirmar"})]})]})})}function eo({product:e,products:t,onEdit:s,onDelete:n,onOrderChange:a,isSelected:o}){const[c,i]=g.useState(!1),l=ke(X(e.order));return r.jsxs(r.Fragment,{children:[r.jsxs(W,{isSelected:o,children:[r.jsx(W.Header,{className:"!p-3",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900 break-words mb-2",children:e.name}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx($r,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:["SKU: ",e.sku]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Oe,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:[e.purchasePackaging," → ",e.salePackaging]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(st,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),r.jsxs("span",{children:["Stock: ",e.minPackageStock," - ",e.desiredStock]})]}),r.jsx("div",{className:"col-span-2",children:r.jsxs("button",{onClick:()=>i(!0),className:`
                      inline-flex items-center px-2 py-1 rounded-md text-sm transition-colors
                      ${l.bg} ${l.border} ${l.text}
                      hover:opacity-90
                    `,children:[r.jsx(nt,{className:"w-4 h-4 mr-1.5"}),Me(e.order)]})}),e.tags&&e.tags.length>0&&r.jsxs("div",{className:"col-span-2 flex items-start gap-1.5 mt-1",children:[r.jsx(Gt,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(d=>r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-gray-100 text-gray-600",children:d},d))})]})]})]}),r.jsx("span",{className:"text-lg font-bold text-blue-600 whitespace-nowrap",children:te(e.price)})]})}),r.jsxs(W.Footer,{className:"flex flex-wrap gap-2 justify-end",children:[r.jsx(C,{variant:"outline",size:"sm",onClick:()=>s(e),children:"Editar"}),r.jsx(C,{variant:"outline",size:"sm",onClick:()=>n(e),className:"hover:bg-red-50 hover:text-red-600",children:"Eliminar"})]})]}),r.jsx(pt,{isOpen:c,onClose:()=>i(!1),product:e,products:t,onOrderChange:a})]})}function to(e){const[t,s]=g.useState(!1);return g.useEffect(()=>{const n=window.matchMedia(e);s(n.matches);const a=o=>{s(o.matches)};return n.addEventListener("change",a),()=>n.removeEventListener("change",a)},[e]),t}function ro({products:e,onEdit:t,onDelete:s,onOrderChange:n,customRender:a}){const o=to("(min-width: 1024px)"),c=[...e].sort((l,d)=>l.order-d.order),i=l=>a?a(l):r.jsx(eo,{product:l,products:c,onEdit:t,onDelete:s,onOrderChange:n},l.id);return o?r.jsx("div",{className:"grid grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-3",children:c.map(l=>r.jsx("div",{children:i(l)},l.id))}):r.jsx("div",{className:"space-y-3",children:c.map(l=>r.jsx("div",{children:i(l)},l.id))})}function so({onProductSelect:e}){const[t,s]=g.useState(""),[n,a]=g.useState([]),[o,c]=g.useState([]),[i,l]=g.useState({}),[d,u]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const[x,f]=await Promise.all([ie(M(T,"products")),ie(M(T,"providers"))]);if(x.exists()){const w=x.val(),y=Object.entries(w).map(([b,p])=>({id:b,...p}));c(y)}if(f.exists()){const w=f.val();l(w)}}catch(x){console.error("Error fetching data:",x),E.error("Error al buscar productos")}finally{u(!1)}})()},[]),g.useEffect(()=>{if(!t.trim()){a([]);return}const m=t.toLowerCase(),x=o.filter(f=>{var w;return f.name.toLowerCase().includes(m)||Me(f.order).toLowerCase().includes(m)||((w=f.tags)==null?void 0:w.some(y=>y.toLowerCase().includes(m)))}).map(f=>({...f,provider:i[f.providerId]})).sort((f,w)=>{var j,R;const y=f.name.toLowerCase().startsWith(m),b=w.name.toLowerCase().startsWith(m);if(y&&!b)return-1;if(!y&&b)return 1;const p=(j=f.tags)==null?void 0:j.some(z=>z.toLowerCase().startsWith(m)),v=(R=w.tags)==null?void 0:R.some(z=>z.toLowerCase().startsWith(m));return p&&!v?-1:!p&&v?1:f.name.localeCompare(w.name)}).slice(0,5);a(x)},[t,o,i]);const h=m=>{e(m),s(""),a([])};return r.jsxs("div",{className:"relative mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(q,{placeholder:"Buscar productos en todos los proveedores...",value:t,onChange:m=>s(m.target.value),className:"pl-10 bg-blue-50 border-blue-200 focus:border-blue-400 focus:ring-blue-400 placeholder-blue-400"}),r.jsx(Fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-400"})]}),n.length>0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-blue-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:n.map(m=>{var x;return r.jsx("button",{onClick:()=>h(m),className:"w-full px-4 py-2 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-medium text-gray-900",children:m.name}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[r.jsx(Ht,{className:"w-3 h-3"}),r.jsx("span",{className:"truncate",children:(x=m.provider)==null?void 0:x.commercialName})]}),m.tags&&m.tags.length>0&&r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[r.jsx(Gt,{className:"w-3 h-3 text-blue-400"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:m.tags.map(f=>r.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-blue-100 text-blue-600",children:f},f))})]})]}),r.jsx("div",{className:"text-blue-600 font-medium",children:te(m.price)})]})},m.id)})}),d&&t&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-blue-200 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"Buscando productos..."})]})}function no({products:e,onFilter:t}){const[s,n]=g.useState("");return g.useEffect(()=>{if(!s.trim()){t(e);return}const a=s.toLowerCase(),o=e.filter(c=>{var i;return c.name.toLowerCase().includes(a)||Me(c.order).toLowerCase().includes(a)||c.sku.toLowerCase().includes(a)||((i=c.tags)==null?void 0:i.some(l=>l.toLowerCase().includes(a)))});t(o)},[s,e,t]),r.jsx("div",{className:"relative",children:r.jsxs("div",{className:"relative",children:[r.jsx(q,{placeholder:"Filtrar productos del proveedor...",value:s,onChange:a=>n(a.target.value),className:"pl-10 bg-amber-50 border-amber-200 focus:border-amber-400 focus:ring-amber-400 placeholder-amber-400"}),r.jsx(Fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-amber-400"})]})})}function Ft({label:e,value:t,onChange:s,onRemove:n,suggestions:a=[],className:o,error:c,...i}){const[l,d]=g.useState(""),[u,h]=g.useState(!1),m=g.useRef(null),x=g.useRef(null);g.useEffect(()=>{const b=p=>{x.current&&!x.current.contains(p.target)&&h(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const f=b=>{d(b.target.value.toUpperCase()),h(!0)},w=b=>{b.key==="Enter"&&l.trim()&&(b.preventDefault(),s(l.trim()),d(""),h(!1))},y=b=>{var p;s(b),d(""),h(!1),(p=m.current)==null||p.focus()};return r.jsxs("div",{ref:x,className:"relative",children:[e&&r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),r.jsx("div",{className:Y("flex items-center min-h-[42px] w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5","focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500",c&&"border-red-500 focus-within:border-red-500 focus-within:ring-red-500",o),children:t?r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800 mr-2",children:[t,r.jsx("button",{type:"button",onClick:n,className:"ml-1 p-0.5 hover:bg-blue-200 rounded-full transition-colors",children:r.jsx(je,{className:"w-3 h-3"})})]}):r.jsx("input",{ref:m,type:"text",className:"flex-1 outline-none bg-transparent text-gray-900 placeholder-gray-500 text-sm",value:l,onChange:f,onKeyDown:w,onFocus:()=>h(!0),...i})}),c&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:c}),u&&!t&&a.length>0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:a.filter(b=>b.includes(l.toUpperCase())).map(b=>r.jsx("button",{type:"button",className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",onClick:()=>y(b),children:b},b))})]})}function ao({label:e,value:t=[],onChange:s,suggestions:n=[],error:a,className:o}){const[c,i]=g.useState(""),[l,d]=g.useState(!1),u=g.useRef(null),h=g.useRef(null);g.useEffect(()=>{const p=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=p=>{i(p.target.value.toUpperCase()),d(!0)},x=p=>{p.key==="Enter"&&c.trim()?(p.preventDefault(),f(c.trim())):p.key==="Backspace"&&!c&&t.length>0&&w(t[t.length-1])},f=p=>{const v=p.toUpperCase();t.includes(v)||s([...t,v]),i(""),d(!1)},w=p=>{s(t.filter(v=>v!==p))},y=p=>{var v;f(p),(v=u.current)==null||v.focus()},b=n.filter(p=>!t.includes(p)&&p.includes(c.toUpperCase()));return r.jsxs("div",{ref:h,className:"relative",children:[e&&r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),r.jsxs("div",{className:Y("flex flex-wrap items-center gap-2 min-h-[42px] w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5","focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500",a&&"border-red-500 focus-within:border-red-500 focus-within:ring-red-500",o),children:[t.map(p=>r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm bg-blue-100 text-blue-800",children:[p,r.jsx("button",{type:"button",onClick:()=>w(p),className:"ml-1 p-0.5 hover:bg-blue-200 rounded-full transition-colors",children:r.jsx(je,{className:"w-3 h-3"})})]},p)),r.jsx("div",{className:"flex-1 min-w-[120px]",children:r.jsx("input",{ref:u,type:"text",className:"w-full outline-none bg-transparent text-gray-900 placeholder-gray-500 text-sm",value:c,onChange:m,onKeyDown:x,onFocus:()=>d(!0),placeholder:"Agregar etiqueta..."})})]}),a&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:a}),l&&c&&b.length>0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:b.map(p=>r.jsxs("button",{type:"button",className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 focus:bg-gray-100 focus:outline-none flex items-center gap-2",onClick:()=>y(p),children:[r.jsx(Be,{className:"w-4 h-4 text-gray-400"}),p]},p))})]})}function oo(){const[e,t]=g.useState([]),[s,n]=g.useState(!0);return g.useEffect(()=>{const o=M(T,"packaging"),c=M(T,"products"),i=oe(o,d=>{const u=d.val(),h=u?Object.values(u):[],m=[...new Set([...Na,...h])];t(m.sort()),n(!1)}),l=oe(c,d=>{const u=d.val();if(u){const h=Object.values(u).map(m=>m.packaging).filter(Boolean).map(m=>m.toUpperCase());t(m=>[...new Set([...m,...h])].sort())}});return()=>{i(),l()}},[]),{packagingSuggestions:e,loading:s,addPackaging:async o=>{const c=M(T,"packaging"),i=Ae(c);await ze(i,o.toUpperCase())}}}function io(){const[e,t]=g.useState([]),[s,n]=g.useState(!0);return g.useEffect(()=>{const o=M(T,"tags"),c=M(T,"products"),i=oe(o,d=>{const u=d.val(),h=u?Object.values(u):[];t(h.sort()),n(!1)}),l=oe(c,d=>{const u=d.val();if(u){const h=Object.values(u).flatMap(m=>m.tags||[]).filter(Boolean).map(m=>m.toUpperCase());t(m=>[...new Set([...m,...h])].sort())}});return()=>{i(),l()}},[]),{tags:e,loading:s,addTag:async o=>{const c=M(T,"tags"),i=Ae(c);await ze(i,o.toUpperCase())}}}const Ge="M",Ke=4;function co(){const[e,t]=g.useState(""),[s,n]=g.useState(!0);return g.useEffect(()=>{(async()=>{try{const o=M(T,"products"),c=await ie(o);if(!c.exists()){t(`${Ge}${"0".repeat(Ke-1)}1`);return}const i=Object.values(c.val()),l=new RegExp(`^${Ge}\\d{${Ke}}$`),d=i.map(m=>m.sku).filter(m=>l.test(m)).map(m=>parseInt(m.slice(Ge.length))),h=(d.length>0?Math.max(...d)+1:1).toString().padStart(Ke,"0");t(`${Ge}${h}`)}catch(o){console.error("Error generating SKU suggestion:",o),t("")}finally{n(!1)}})()},[]),{suggestedSku:e,loading:s}}function lo(e,t){return e>t?{field:"minPackageStock",message:"El stock mínimo no puede ser mayor al stock deseado"}:null}function uo(e){E.error(e.message)}function yr({providerId:e,initialData:t,onSubmit:s,onCancel:n,isLoading:a}){var j,R,z;qe();const{packagingSuggestions:o,addPackaging:c}=oo(),{tags:i,addTag:l}=io(),{products:d}=Se(e),{suggestedSku:u,loading:h}=co(),[m,x]=g.useState(!1),[f,w]=g.useState({name:((j=t==null?void 0:t.name)==null?void 0:j.toUpperCase())||"",sku:(t==null?void 0:t.sku)||"",purchasePackaging:((R=t==null?void 0:t.purchasePackaging)==null?void 0:R.toUpperCase())||"",salePackaging:((z=t==null?void 0:t.salePackaging)==null?void 0:z.toUpperCase())||"",order:(t==null?void 0:t.order)||(()=>{const P=Q[0].code,O=d.filter(F=>X(F.order)===P);return xt(P,O.length+1)})(),price:(t==null?void 0:t.price)||0,desiredStock:(t==null?void 0:t.desiredStock)||0,minPackageStock:(t==null?void 0:t.minPackageStock)||0,providerId:(t==null?void 0:t.providerId)||e,tags:(t==null?void 0:t.tags)||[]}),y=async P=>{P.preventDefault();const O=lo(f.minPackageStock,f.desiredStock);if(O){uo(O);return}await s(f)},b=async(P,O)=>{w(F=>({...F,order:O})),x(!1)},p=async P=>{w(F=>({...F,tags:P}));const O=P.filter(F=>!i.includes(F));for(const F of O)await l(F)},v=ke(X(f.order));return r.jsxs("form",{onSubmit:y,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(q,{label:"Nombre del producto",value:f.name,onChange:P=>w(O=>({...O,name:P.target.value.toUpperCase()})),required:!0}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(q,{label:"SKU",value:f.sku,onChange:P=>w(O=>({...O,sku:P.target.value.toUpperCase()})),required:!0}),!t&&!h&&u&&r.jsxs("p",{className:"text-sm text-blue-600",children:["SKU sugerido: ",u]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Ft,{label:"Empaque de Compra",value:f.purchasePackaging,onChange:async P=>{w(O=>({...O,purchasePackaging:P.toUpperCase()})),o.includes(P.toUpperCase())||await c(P)},onRemove:()=>w(P=>({...P,purchasePackaging:""})),suggestions:o,placeholder:"Escriba y presione Enter"}),r.jsx(Ft,{label:"Empaque de Venta",value:f.salePackaging,onChange:async P=>{w(O=>({...O,salePackaging:P.toUpperCase()})),o.includes(P.toUpperCase())||await c(P)},onRemove:()=>w(P=>({...P,salePackaging:""})),suggestions:o,placeholder:"Escriba y presione Enter"})]}),r.jsx(ao,{label:"Etiquetas",value:f.tags,onChange:p,suggestions:i}),r.jsx("div",{className:`rounded-lg p-4 border cursor-pointer transition-colors ${v.bg} ${v.border} hover:opacity-90`,onClick:()=>x(!0),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:`text-sm font-medium ${v.text}`,children:"Orden del Producto"}),r.jsx("div",{className:`text-lg font-bold mt-1 ${v.text}`,children:Me(f.order)})]}),r.jsx(nt,{className:`w-5 h-5 ${v.text}`})]})}),r.jsx(q,{label:"Precio",value:f.price,onChange:P=>w(O=>({...O,price:parseFloat(P.target.value)||0})),min:0,required:!0,isCurrency:!0}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(q,{label:"Stock mínimo",type:"number",value:f.minPackageStock,onChange:P=>w(O=>({...O,minPackageStock:parseInt(P.target.value)||0})),min:0,required:!0}),r.jsx(q,{label:"Stock deseado",type:"number",value:f.desiredStock,onChange:P=>w(O=>({...O,desiredStock:parseInt(P.target.value)||0})),min:0,required:!0})]}),r.jsxs("div",{className:"flex justify-end space-x-4",children:[r.jsx(C,{type:"button",variant:"outline",onClick:n,children:"Cancelar"}),r.jsxs(C,{type:"submit",isLoading:a,children:[t?"Actualizar":"Crear"," Producto"]})]}),t&&r.jsx(pt,{isOpen:m,onClose:()=>x(!1),product:t,products:d,onOrderChange:b})]})}function mo({providerId:e,initialData:t,onSubmit:s,onCancel:n,isLoading:a}){return r.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[r.jsx("div",{className:"border-b bg-white",children:r.jsxs("div",{className:"flex items-center justify-between px-3 h-14",children:[r.jsxs("h2",{className:"text-lg font-semibold",children:[t?"Editar":"Nuevo"," Producto"]}),r.jsx("button",{onClick:n,disabled:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(je,{className:"w-5 h-5"})})]})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx("div",{className:"h-full overflow-y-auto",children:r.jsx("div",{className:"container mx-auto max-w-2xl px-3 py-4",children:r.jsx(yr,{providerId:e,initialData:t,onSubmit:s,onCancel:n,isLoading:a})})})})]})}function At(e,t,s,n){const a=e.find(l=>l.id===n);if(!a)return e;const o=ue(a.order);if(o!==t){e.filter(d=>ue(d.order)===o&&d.id!==n).sort((d,u)=>V(d.order)-V(u.order));const l=V(a.order);return e.filter(d=>ue(d.order)===t).sort((d,u)=>V(d.order)-V(u.order)),e.map(d=>{if(d.id===n)return{...d,order:ye(t,s)};const u=ue(d.order),h=V(d.order);return u===o&&h>l?{...d,order:ye(o,h-1)}:u===t&&h>=s?{...d,order:ye(t,h+1)}:d})}const i=V(a.order);return e.map(l=>{if(ue(l.order)!==t)return l;if(l.id===n)return{...l,order:ye(t,s)};const d=V(l.order);if(s<i){if(d>=s&&d<i)return{...l,order:ye(t,d+1)}}else if(s>i&&d<=s&&d>i)return{...l,order:ye(t,d-1)};return l})}function ho(e,t){const s=ue(t.order),n=V(t.order);return e.filter(a=>a.id!==t.id&&ue(a.order)===s).sort((a,o)=>V(a.order)-V(o.order)),e.map(a=>{if(a.id===t.id||ue(a.order)!==s)return a;const o=V(a.order);return o>n?{...a,order:ye(s,o-1)}:a})}function fo(){const{providers:e}=qe(),[t,s]=g.useState(""),{products:n,loading:a,addProduct:o,updateProduct:c,deleteProduct:i}=Se(t),[l,d]=g.useState([]),[u,h]=g.useState(!1),[m,x]=g.useState(null),[f,w]=g.useState(!1),[y,b]=g.useState(null),p=async k=>{w(!0);try{const A=(m==null?void 0:m.providerId)||t;if(!A)throw new Error("No provider selected");const N=A!==t?await Se(A).products:n;if(m){if(await c(m.id,k),k.order!==m.order){const H=X(k.order),_=me(k.order),G=At(N,H,_,m.id);await Promise.all(G.filter($=>{var K;return $.order!==((K=N.find(re=>re.id===$.id))==null?void 0:K.order)}).map($=>c($.id,{order:$.order})))}E.success("Producto actualizado exitosamente")}else{const H=Q[0].code,_=N.filter($=>X($.order)===H),G=xt(H,_.length+1);await o({...k,order:G}),E.success("Producto creado exitosamente")}z()}catch(A){console.error("Error saving product:",A),E.error("Ocurrió un error al guardar el producto")}finally{w(!1)}},v=async(k,A)=>{try{const N=X(A),H=me(A),_=k.providerId!==t?await Se(k.providerId).products:n,G=At(_,N,H,k.id);await Promise.all(G.filter($=>{var K;return $.order!==((K=_.find(re=>re.id===$.id))==null?void 0:K.order)}).map($=>c($.id,{order:$.order}))),E.success("Orden actualizado exitosamente")}catch(N){console.error("Error updating order:",N),E.error("Error al actualizar el orden")}},j=async k=>{b(k)},R=async()=>{if(y)try{const k=y.providerId!==t?await Se(y.providerId).products:n,A=ho(k,y);await Promise.all(A.filter(N=>{var H;return N.order!==((H=k.find(_=>_.id===N.id))==null?void 0:H.order)}).map(N=>c(N.id,{order:N.order}))),await i(y.id),E.success("Producto eliminado exitosamente"),b(null)}catch{E.error("Ocurrió un error al eliminar el producto")}},z=()=>{h(!1),x(null)},P=k=>{x(k),h(!0)},O=k=>{x(k),h(!0)},F=e.map(k=>({value:k.id,label:k.commercialName}));return r.jsxs("div",{className:"space-y-4",children:[r.jsx(so,{onProductSelect:O}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[r.jsx("div",{className:"flex-1 max-w-xs",children:r.jsx(br,{options:F,value:t,onChange:k=>{s(k),d([])},placeholder:"Seleccionar Proveedor"})}),t&&r.jsxs(C,{onClick:()=>h(!0),children:[r.jsx(Be,{className:"w-4 h-4 mr-2"}),"Nuevo Producto"]})]}),u&&r.jsx(mo,{providerId:(m==null?void 0:m.providerId)||t,initialData:m||void 0,onSubmit:p,onCancel:z,isLoading:f}),t?a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):!u&&r.jsxs(r.Fragment,{children:[r.jsx(no,{products:n,onFilter:d}),r.jsx(ro,{products:l.length>0?l:n,onEdit:P,onDelete:j,onOrderChange:v})]}):r.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:r.jsx("p",{className:"text-gray-500 text-center px-4",children:"Seleccione un proveedor para ver sus productos"})}),r.jsx(ge,{isOpen:!!y,onClose:()=>b(null),title:"Eliminar producto",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-amber-600",children:['¿Está seguro que desea eliminar el producto "',y==null?void 0:y.name,'"?']}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(C,{variant:"outline",onClick:()=>b(null),children:"Cancelar"}),r.jsx(C,{onClick:R,children:"Eliminar"})]})]})})]})}function bt(e){const[t,s]=g.useState([]),[n,a]=g.useState(!0);return g.useEffect(()=>{let l;return(async()=>{if(!e){s([]),a(!1);return}try{const u=await We.getByProvider(e);u&&s(u),l=We.subscribeToProviderOrders(e,h=>{console.log("Orders updated:",h),s(h)})}catch(u){console.error("Error setting up orders subscription:",u),E.error("Error al cargar las órdenes")}finally{a(!1)}})(),()=>{l&&l()}},[e]),{orders:t,loading:n,addOrder:async l=>{try{return await We.create(l)}catch(d){throw console.error("Error creating order:",d),E.error("Error al crear la orden"),d}},updateOrder:async(l,d)=>{try{await We.update(l,d)}catch(u){throw console.error("Error updating order:",u),E.error("Error al actualizar la orden"),u}},deleteOrder:async l=>{try{await We.delete(l)}catch(d){throw console.error("Error deleting order:",d),E.error("Error al eliminar la orden"),d}}}}function go(){const[e,t]=g.useState([]),[s,n]=g.useState(!0);return g.useEffect(()=>{const a=M(T,"orders"),o=oe(a,c=>{if(!c.exists()){t([]),n(!1);return}const l=Object.entries(c.val()).map(([d,u])=>({id:d,...u})).sort((d,u)=>new Date(u.date).getTime()-new Date(d.date).getTime());t(l),n(!1)});return()=>o()},[]),{orders:e,loading:s}}function xo(){const[e,t]=g.useState([]),[s,n]=g.useState(!0);return g.useEffect(()=>{const a=M(T,"products"),o=oe(a,c=>{if(!c.exists()){t([]),n(!1);return}const i=Object.entries(c.val()).map(([l,d])=>({id:l,...d}));t(i),n(!1)});return()=>o()},[]),{products:e,loading:s}}const wr=32,vr="________________________________",He=Math.floor(wr*.75),zt=wr-He-3;function po(e,t){const s=e.split(" "),n=[];let a="";return s.forEach(o=>{const c=a?`${a} ${o}`:o;c.length<=t?a=c:(a&&n.push(a),a=o)}),a&&n.push(a),n}function bo(e){return[`Pedido: ${ae(fr(e),"dd/MM/yyyy HH:mm:ss",{locale:fe})}`,Rt.name,Rt.owner,vr,""]}function yo(e,t){const s=[...t].sort((a,o)=>{const c=e.find(l=>l.id===a.productId),i=e.find(l=>l.id===o.productId);return!c||!i?0:c.order-i.order}),n=[];return s.forEach((a,o)=>{const c=e.find(d=>d.id===a.productId);if(!c)return;o>0&&n.push("");const i=`${a.quantity} ${c.purchasePackaging}`,l=po(c.name,He-2);if(l.length===1)n.push(`• ${l[0].padEnd(He-2)} ${i.padStart(zt)}`);else{n.push(`• ${l[0]}`);for(let u=1;u<l.length-1;u++)n.push(`  ${l[u]}`);const d=l[l.length-1];n.push(`  ${d.padEnd(He-2)} ${i.padStart(zt)}`)}}),n}function wo(e){const t=e.reduce((s,n)=>s+n.quantity,0);return["",vr,`Total productos: ${t}`]}function yt(e,t,s=!1){const n=bo(e.date),a=yo(t,e.items),o=wo(e.items);if(s){const c=a.map(i=>{if(i.startsWith("  "))return i.trim();const l=i.match(/^• (.+?)(?:\s+(\d+\s+\S+))?$/);if(!l)return i;const[,d,u]=l;return u?`• ${d.trim()} - *${u.trim()}*`:`• ${d.trim()}`}).filter(i=>i!=="");return[...n,...c,...o].join(`
`)}return[...n,...a,...o].join(`
`)}function vo(e,t,s){return yt(e,t,!1)}function jo(e,t,s){return yt(e,t,!0)}function tt({order:e,products:t,provider:s,preview:n=!0}){[...e.items].sort((o,c)=>{const i=t.find(d=>d.id===o.productId),l=t.find(d=>d.id===c.productId);return!i||!l?0:i.order-l.order});const a=yt(e,t,n);return r.jsx("div",{className:"font-mono text-sm bg-gray-50 p-4 rounded-lg overflow-x-auto whitespace-pre-wrap",children:a})}function jr({order:e,products:t,provider:s}){const[n,a]=g.useState(!1),[o,c]=g.useState(!1),[i,l]=g.useState(!1),{updateOrder:d}=bt(s.id),u=async()=>{if(!s.phone){alert("Este proveedor no tiene número de teléfono registrado");return}l(!0);try{await d(e.id,{...e,status:"completed"});const m=jo(e,t,s),x=ir(s.phone,m);window.open(x,"_blank"),a(!1)}catch(m){console.error("Error updating order status:",m),alert("Error al actualizar el estado de la orden")}finally{l(!1)}},h=async()=>{l(!0);try{await d(e.id,{...e,status:"completed"});const m=vo(e,t,s),x=window.open("","_blank");if(!x)throw new Error("No se pudo crear la ventana de impresión");x.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <meta charset="UTF-8">
            <title>Orden - ${s.commercialName}</title>
            <style>
              @page {
                size: 80mm auto;
                margin: 0;
              }
              @media print {
                body {
                  width: 80mm;
                  margin: 0;
                  padding: 8px;
                  font-family: monospace;
                  font-size: 12px;
                  line-height: 1.2;
                }
                pre {
                  margin: 0;
                  white-space: pre-wrap;
                  font-family: inherit;
                  font-size: inherit;
                }
              }
              body {
                font-family: monospace;
                font-size: 12px;
                line-height: 1.2;
                margin: 0;
                padding: 8px;
                width: 80mm;
              }
              pre {
                margin: 0;
                white-space: pre-wrap;
                font-family: inherit;
                font-size: inherit;
              }
            </style>
          </head>
          <body>
            <pre>${m}</pre>
            <script>
              window.onload = function() {
                window.print();
                setTimeout(function() {
                  window.close();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `),x.document.close(),c(!1)}catch(m){console.error("Error printing order:",m),alert("Error al imprimir la orden")}finally{l(!1)}};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.phone&&r.jsxs(C,{type:"button",variant:"outline",onClick:()=>a(!0),className:"text-green-600 hover:text-green-700 hover:bg-green-50 w-full sm:w-auto",disabled:i,children:[r.jsx(Fr,{className:"w-4 h-4 mr-2"}),"WhatsApp"]}),r.jsxs(C,{type:"button",variant:"outline",onClick:()=>c(!0),disabled:i,className:"w-full sm:w-auto",children:[r.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]}),r.jsx(ge,{isOpen:n,onClose:()=>a(!1),title:"Confirmar envío por WhatsApp",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{children:"¿Desea enviar el siguiente pedido por WhatsApp?"}),r.jsx(tt,{order:e,products:t,provider:s,preview:!0}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[r.jsx(C,{variant:"outline",onClick:()=>a(!1),disabled:i,className:"w-full sm:w-auto",children:"Cancelar"}),r.jsx(C,{onClick:u,className:"bg-green-600 hover:bg-green-700 w-full sm:w-auto",isLoading:i,children:"Enviar"})]})]})}),r.jsx(ge,{isOpen:o,onClose:()=>c(!1),title:"Confirmar impresión",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{children:"¿Desea imprimir el siguiente pedido?"}),r.jsx(tt,{order:e,products:t,provider:s,preview:!1}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-end",children:[r.jsx(C,{variant:"outline",onClick:()=>c(!1),disabled:i,className:"w-full sm:w-auto",children:"Cancelar"}),r.jsx(C,{onClick:h,isLoading:i,className:"w-full sm:w-auto",children:"Imprimir"})]})]})})]})}function No({orders:e,products:t,provider:s,onSelect:n,onDelete:a,onViewDetails:o}){const c=[...e].sort((i,l)=>new Date(l.date).getTime()-new Date(i.date).getTime());return r.jsx("div",{className:"space-y-4",children:c.map((i,l)=>{const d=i.items.reduce((h,m)=>h+m.quantity,0),u=c.length-l;return r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"cursor-pointer space-y-3",onClick:()=>n(i,u),children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[i.status==="completed"?r.jsx(zr,{className:"w-5 h-5 text-green-500"}):r.jsx(qr,{className:"w-5 h-5 text-yellow-500"}),r.jsxs("h3",{className:"text-lg font-semibold",children:["Orden #",u," - ",ae(new Date(i.date),"d 'de' MMMM, yyyy",{locale:fe})]})]})}),r.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[r.jsxs("span",{children:[d," ",d===1?"producto":"productos"]}),r.jsx("span",{className:"font-medium text-blue-600",children:te(i.total)})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx(jr,{order:i,products:t,provider:s}),r.jsxs(C,{variant:"outline",size:"sm",onClick:h=>{h.stopPropagation(),o(i,u)},className:"w-full sm:w-auto",children:[r.jsx(_r,{className:"w-4 h-4 mr-2"}),"Ver Detalles"]})]}),r.jsxs(C,{variant:"outline",size:"sm",onClick:h=>{h.stopPropagation(),a(i)},className:"hover:bg-red-50 hover:text-red-600 w-full sm:w-auto",children:[r.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Eliminar"]})]})]},i.id)})})}function So({order:e,orderNumber:t,products:s,provider:n,onClose:a}){const o=ae(fr(e.date),"d 'de' MMMM, yyyy HH:mm",{locale:fe}),c=e.items.reduce((i,l)=>i+l.quantity,0);return r.jsxs("div",{className:"fixed inset-0 bg-gray-50 z-50 flex flex-col",children:[r.jsx("div",{className:"bg-white border-b print:hidden sticky top-0 z-10",children:r.jsxs("div",{className:"flex items-center justify-between px-3 h-14",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(C,{variant:"ghost",size:"sm",onClick:a,className:"md:hidden",children:r.jsx(Yr,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("h2",{className:"text-lg font-semibold",children:["Orden #",t]}),r.jsx("span",{className:`
                  px-2 py-0.5 text-xs font-medium rounded-full
                  ${e.status==="completed"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}
                `,children:e.status==="completed"?"Completada":"Pendiente"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:o})]})]}),r.jsx("button",{onClick:a,className:"hidden md:flex p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(je,{className:"w-5 h-5"})})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsxs("div",{className:"container mx-auto max-w-4xl px-3 py-4",children:[r.jsxs("div",{className:"hidden print:block mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-center mb-2",children:"Orden de Compra"}),r.jsxs("div",{className:"text-center text-gray-600 mb-4",children:["#",t]})]}),r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"grid gap-4 sm:grid-cols-3 print:grid-cols-3",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm print:border-gray-300",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:r.jsx(_t,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h3",{className:"font-medium",children:"Fecha"})]}),r.jsx("p",{className:"text-gray-600",children:o})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm print:border-gray-300",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:r.jsx(Ht,{className:"w-5 h-5 text-purple-600"})}),r.jsx("h3",{className:"font-medium",children:"Proveedor"})]}),r.jsx("p",{className:"font-medium",children:n.commercialName}),n.legalName&&n.legalName!==n.commercialName&&r.jsx("p",{className:"text-sm text-gray-500",children:n.legalName})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm print:border-gray-300",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:r.jsx(Oe,{className:"w-5 h-5 text-green-600"})}),r.jsx("h3",{className:"font-medium",children:"Resumen"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-gray-600",children:[c," productos"]}),r.jsx("p",{className:"font-medium text-lg text-blue-600",children:te(e.total)})]})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm print:border-gray-300",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4 print:mb-2",children:[r.jsx("div",{className:"p-2 bg-amber-50 rounded-lg",children:r.jsx(Gr,{className:"w-5 h-5 text-amber-600"})}),r.jsx("h3",{className:"font-medium",children:"Detalles del Pedido"})]}),r.jsx(tt,{order:e,products:s,provider:n,preview:!1})]}),r.jsx("div",{className:"print:hidden",children:r.jsxs("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:[r.jsx("h3",{className:"font-medium mb-4",children:"Acciones"}),r.jsx(jr,{order:e,products:s,provider:n})]})})]})]})})]})}function Po({orders:e,products:t,onOrderSelect:s}){const[n,a]=g.useState(""),[o,c]=g.useState([]);return g.useEffect(()=>{if(!n.trim()){c([]);return}const i=n.toLowerCase(),l=[...e].sort((u,h)=>new Date(h.date).getTime()-new Date(u.date).getTime()),d=l.map((u,h)=>{const m=u.items.map(x=>{var y;const f=t.find(b=>b.id===x.productId);return f&&(f.name.toLowerCase().includes(i)||f.sku.toLowerCase().includes(i)||((y=f.tags)==null?void 0:y.some(b=>b.toLowerCase().includes(i))))?{product:f,quantity:x.quantity}:null}).filter(x=>x!==null);return m.length===0?null:{...u,orderNumber:l.length-h,matchingProducts:m}}).filter(u=>u!==null).slice(0,5);c(d)},[n,e,t]),r.jsxs("div",{className:"relative mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(q,{placeholder:"Buscar productos en órdenes...",value:n,onChange:i=>a(i.target.value),className:"pl-10 bg-amber-50 border-amber-200 focus:border-amber-400 focus:ring-amber-400 placeholder-amber-400"}),r.jsx(Fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-amber-400"})]}),o.length>0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-amber-200 rounded-lg shadow-lg max-h-[400px] overflow-auto",children:o.map(i=>r.jsx("button",{onClick:()=>s(i,i.orderNumber),className:"w-full px-4 py-3 text-left hover:bg-amber-50 border-b border-amber-100 last:border-b-0",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("span",{className:"font-medium text-amber-700",children:["Orden #",i.orderNumber]}),r.jsx("span",{className:"text-gray-400",children:"•"}),r.jsx("span",{className:"text-sm text-gray-600",children:ae(new Date(i.date),"d 'de' MMMM, yyyy",{locale:fe})})]}),r.jsx("div",{className:"space-y-1",children:i.matchingProducts.map(({product:l,quantity:d})=>r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-900",children:l.name}),r.jsxs("span",{className:"text-gray-600 whitespace-nowrap ml-2",children:[d," ",l.purchasePackaging]})]},l.id))})]}),r.jsx("div",{className:"text-amber-600 font-medium whitespace-nowrap",children:te(i.total)})]})},i.id))}),n&&o.length===0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-amber-200 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"No se encontraron productos en las órdenes"})]})}function Co({providerId:e,product:t,onSubmit:s,onCancel:n,isSubmitting:a}){return r.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[r.jsx("div",{className:"border-b bg-white",children:r.jsxs("div",{className:"flex items-center justify-between px-3 h-16",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Editar Producto"}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(je,{className:"w-5 h-5"})})]})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx("div",{className:"h-full overflow-y-auto",children:r.jsx("div",{className:"container mx-auto max-w-2xl px-3 py-4",children:r.jsx(yr,{providerId:e,initialData:t,onSubmit:s,onCancel:n,isLoading:a})})})})]})}function ko({product:e,products:t,isSelected:s,quantity:n,onQuantityChange:a,onProductUpdate:o,onReview:c,isReviewed:i}){const[l,d]=g.useState(!1),[u,h]=g.useState(!1),[m,x]=g.useState(!1),f=ke(X(e.order)),w=async(b,p)=>{o&&await o(b,{order:p})},y=async b=>{if(o){x(!0);try{await o(e,b),h(!1)}finally{x(!1)}}};return r.jsxs(r.Fragment,{children:[r.jsx(W,{isSelected:s,children:r.jsx(W.Header,{className:"!p-3",children:r.jsxs("div",{className:"relative",children:[i&&r.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white rounded-full p-1",children:r.jsx(vt,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`
                  flex-shrink-0 w-5 h-5 rounded border cursor-pointer transition-colors mt-1
                  ${s?"bg-blue-500 border-blue-500":"border-gray-300 hover:border-blue-500"}
                `,onClick:()=>a(s?0:e.desiredStock),children:s&&r.jsx(vt,{className:"w-full h-full text-white p-0.5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2 hover:text-blue-600 cursor-pointer",onClick:()=>h(!0),children:e.name}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600 mb-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Oe,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),r.jsx("span",{children:e.purchasePackaging})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(st,{className:"w-4 h-4 mr-1.5 flex-shrink-0"}),r.jsxs("span",{children:["Stock: ",e.minPackageStock," - ",e.desiredStock]})]}),r.jsxs("button",{onClick:()=>d(!0),className:`
                      inline-flex items-center px-2 py-1 rounded-md text-sm transition-colors
                      ${f.bg} ${f.border} ${f.text}
                      hover:opacity-90
                    `,children:[r.jsx(nt,{className:"w-4 h-4 mr-1.5"}),Me(e.order)]})]}),r.jsxs("div",{className:"flex items-end justify-between gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(C,{type:"button",variant:"outline",size:"sm",onClick:()=>a(n-1),disabled:n<=0,className:"px-2",children:"-"}),r.jsx(q,{type:"number",min:"0",value:n||"",onChange:b=>{const p=parseInt(b.target.value);isNaN(p)||a(p)},placeholder:e.desiredStock.toString(),className:"text-center"}),r.jsx(C,{type:"button",variant:"outline",size:"sm",onClick:()=>a(n+1),className:"px-2",children:"+"})]})}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-lg font-bold text-blue-600",children:te(e.price)}),s&&r.jsxs("div",{className:"text-sm text-gray-500",children:["Total: ",te(e.price*n)]})]})]})]})]})]})})}),r.jsx(pt,{isOpen:l,onClose:()=>d(!1),product:e,products:t,onOrderChange:w}),u&&r.jsx(Co,{providerId:e.providerId,product:e,onSubmit:y,onCancel:()=>h(!1),isSubmitting:m})]})}function Oo({products:e,selectedProducts:t,onProductSelect:s,onProductUpdate:n}){const[a,o]=g.useState(new Set),c=[...e].sort((u,h)=>u.order-h.order),i=(u,h)=>{h>=0&&(s(u,h),d(u))},l=async(u,h)=>{n&&(await n(u.id,h),d(u.id))},d=u=>{o(h=>new Set(h).add(u))};return r.jsx("div",{className:"space-y-3",children:c.map(u=>r.jsx(ko,{product:u,products:e,isSelected:t.has(u.id),quantity:t.get(u.id)||0,onQuantityChange:h=>i(u.id,h),onProductUpdate:l,onReview:()=>d(u.id),isReviewed:a.has(u.id)},u.id))})}function Eo({products:e,orders:t,onProductSelect:s}){const[n,a]=g.useState(""),[o,c]=g.useState([]),i=l=>{const u=[...t].sort((m,x)=>new Date(x.date).getTime()-new Date(m.date).getTime()).find(m=>m.items.some(x=>x.productId===l.id));if(!u)return{...l};const h=u.items.find(m=>m.productId===l.id);return{...l,lastOrder:{date:u.date,quantity:(h==null?void 0:h.quantity)||0}}};return g.useEffect(()=>{if(!n.trim()){c([]);return}const l=n.toLowerCase(),d=e.filter(u=>{var h;return u.name.toLowerCase().includes(l)||u.sku.toLowerCase().includes(l)||((h=u.tags)==null?void 0:h.some(m=>m.toLowerCase().includes(l)))}).map(u=>i(u)).sort((u,h)=>{const m=u.name.toLowerCase().startsWith(l),x=h.name.toLowerCase().startsWith(l);return m&&!x?-1:!m&&x?1:u.lastOrder&&h.lastOrder?new Date(h.lastOrder.date).getTime()-new Date(u.lastOrder.date).getTime():u.lastOrder?-1:h.lastOrder?1:u.name.localeCompare(h.name)}).slice(0,5);c(d)},[n,e,t]),r.jsxs("div",{className:"relative mb-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx(q,{placeholder:"Buscar productos por nombre, SKU o etiquetas...",value:n,onChange:l=>a(l.target.value),className:"pl-10"}),r.jsx(Fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),o.length>0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:o.map(l=>r.jsx("button",{onClick:()=>s(l),className:"w-full px-4 py-2 text-left hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-medium text-gray-900",children:l.name}),l.lastOrder?r.jsxs("div",{className:"text-sm text-gray-500",children:["Última compra: ",ae(new Date(l.lastOrder.date),"d 'de' MMMM, yyyy",{locale:fe}),r.jsx("span",{className:"mx-1",children:"•"}),l.lastOrder.quantity," ",l.purchasePackaging]}):r.jsx("div",{className:"text-sm text-gray-500",children:"No existen compras para este producto"})]}),r.jsx("div",{className:"text-blue-600 font-medium whitespace-nowrap",children:te(l.price)})]})},l.id))}),n&&o.length===0&&r.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"No se encontraron productos"})]})}function Mo({products:e,selectedProducts:t,onProductSelect:s,onProductUpdate:n,onConfirm:a,onCancel:o,isSubmitting:c,provider:i}){const[l,d]=g.useState(e),{orders:u}=bt(i.id);g.useEffect(()=>{d(x=>{const f=new Set(e.map(y=>y.id)),w=x.filter(y=>!f.has(y.id));return[...e,...w]})},[e]);const h=Array.from(t.entries()).reduce((x,[f,w])=>{const y=l.find(b=>b.id===f);return x+((y==null?void 0:y.price)||0)*w},0),m=x=>{d(f=>f.find(w=>w.id===x.id)?f:[...f,x]),s(x.id,1)};return r.jsxs("div",{className:"fixed inset-0 bg-white z-50 flex flex-col",children:[r.jsx("div",{className:"border-b bg-white",children:r.jsxs("div",{className:"flex items-center justify-between px-2 h-14",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("h2",{className:"text-lg font-semibold truncate",children:[i.legalName&&i.legalName!==i.commercialName?r.jsxs("span",{className:"text-gray-500",children:[i.legalName," ",r.jsx("span",{className:"mx-1",children:"•"})]}):null,r.jsx("span",{children:i.commercialName})]}),t.size>0&&r.jsxs("div",{className:"text-sm text-gray-600",children:["Importe Total: ",r.jsx("span",{className:"font-medium text-blue-600",children:te(h)})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(C,{variant:"outline",onClick:o,disabled:c,size:"sm",children:"Cancelar"}),r.jsx(C,{onClick:a,isLoading:c,size:"sm",children:"Guardar"})]})]})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx("div",{className:"h-full overflow-y-auto",children:r.jsxs("div",{className:"container mx-auto max-w-3xl px-2 py-4",children:[r.jsx(Eo,{products:e,orders:u,onProductSelect:m}),r.jsx(Oo,{products:l,selectedProducts:t,onProductSelect:s,onProductUpdate:n})]})})})]})}function To(e){return Number(e.reduce((t,s)=>t+Number((s.price*s.quantity).toFixed(2)),0).toFixed(2))}function Do(e,t){const s=Number(Number(e.price).toFixed(2)),n=Number((s*t).toFixed(2));return{productId:e.id,quantity:Number(t),price:s,subtotal:n}}function Ro(e,t,s){if(!e||!s||s.length===0)throw new Error("Invalid order data");const n=Array.from(t.entries()).map(([o,c])=>{const i=s.find(l=>l.id===o);if(!i)throw new Error(`Product ${o} not found`);return Do(i,c)}).sort((o,c)=>{const i=s.find(d=>d.id===o.productId),l=s.find(d=>d.id===c.productId);return!i||!l?0:i.order-l.order}),a=To(n);return{providerId:e,date:et(),status:"pending",items:n,total:a}}function Lo(e,t){try{if(!e.providerId)return"El proveedor es requerido";if(!e.items||e.items.length===0)return"Debe agregar al menos un producto";const s=new Set;for(const a of e.items){if(!a.productId)return"Producto inválido";if(s.has(a.productId))return"No puede haber productos duplicados";if(s.add(a.productId),a.quantity<=0)return"La cantidad debe ser mayor a 0";const o=t.find(i=>i.id===a.productId);if(!o)return"Producto no encontrado";if(Math.abs(a.price-o.price)>.01)return`El precio del producto ${o.name} no coincide`;const c=Number((a.price*a.quantity).toFixed(2));if(Math.abs(a.subtotal-c)>.01)return`El subtotal del producto ${o.name} no coincide`}const n=Number(e.items.reduce((a,o)=>a+Number((o.price*o.quantity).toFixed(2)),0).toFixed(2));return Math.abs(e.total-n)>.01?"El total no coincide":null}catch(s){return console.error("Error validating order:",s),"Error al validar la orden"}}function Io(){const e=Qt(),[t,s]=Br(),{providers:n}=qe(),[a,o]=g.useState(""),{orders:c,loading:i,addOrder:l,updateOrder:d,deleteOrder:u}=bt(a),{products:h,updateProduct:m}=Se(a),{orders:x,loading:f}=go(),{products:w,loading:y}=xo(),[b,p]=g.useState(!1),[v,j]=g.useState(null),[R,z]=g.useState(null),[P,O]=g.useState(!1),[F,k]=g.useState(null),[A,N]=g.useState(new Map),[H,_]=g.useState(!1),G=n.find(L=>L.id===a);g.useEffect(()=>{const L=t.get("provider"),J=t.get("new")==="true";if(L){if(o(L),J)p(!0),_(!0);else{const se=new Date,_e=new Date(se.setHours(0,0,0,0)),Cr=new Date(se.setHours(23,59,59,999)),Qe=c.find(Ye=>{const De=new Date(Ye.date);return De>=_e&&De<=Cr});if(Qe){const Ye=new Map;Qe.items.forEach(De=>{Ye.set(De.productId,De.quantity)}),N(Ye),j(Qe),p(!0),_(!0)}}s({})}},[t,s,c]);const $=(L,J)=>{const se=new Map(A);J>0?se.set(L,J):se.delete(L),N(se)},K=async()=>{if(!a||!h||!G){E.error("Seleccione un proveedor");return}if(A.size===0){E.error("Debe agregar al menos un producto");return}O(!0);try{const L=Ro(a,A,h),J=Lo(L,h);if(J){E.error(J);return}v?(await d(v.id,L),E.success("Orden actualizada exitosamente")):(await l(L),E.success("Orden creada exitosamente")),Te()}catch(L){console.error("Error saving order:",L),E.error("Ocurrió un error al guardar la orden")}finally{O(!1)}},re=L=>{k(L)},xe=async()=>{if(F)try{await u(F.id),E.success("Orden eliminada exitosamente"),k(null)}catch{E.error("Ocurrió un error al eliminar la orden")}},Te=()=>{p(!1),j(null),N(new Map),H&&e("/")},B=(L,J)=>{a||o(L.providerId);const se=new Map;L.items.forEach(_e=>{se.set(_e.productId,_e.quantity)}),N(se),j(L),p(!0)},Nr=(L,J)=>{z({order:L,orderNumber:J})},Sr=n.map(L=>({value:L.id,label:L.commercialName})),Pr=i||f||y;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Po,{orders:x,products:w,onOrderSelect:B}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[r.jsx("div",{className:"flex-1 max-w-xs",children:r.jsx(br,{options:Sr,value:a,onChange:o,placeholder:"Seleccionar Proveedor"})}),a&&r.jsxs(C,{onClick:()=>p(!0),children:[r.jsx(Be,{className:"w-4 h-4 mr-2"}),"Nueva Orden"]})]}),Pr?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r.jsxs(r.Fragment,{children:[b&&G&&r.jsx(Mo,{products:h,selectedProducts:A,onProductSelect:$,onProductUpdate:m,onConfirm:K,onCancel:Te,isSubmitting:P,provider:G}),R&&G&&r.jsx(So,{order:R.order,orderNumber:R.orderNumber,products:w,provider:G,onClose:()=>z(null)}),!b&&!R&&a&&r.jsx(No,{orders:c,products:h,provider:G,onSelect:B,onDelete:re,onViewDetails:Nr})]}),r.jsx(ge,{isOpen:!!F,onClose:()=>k(null),title:"Eliminar orden",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-amber-600",children:"¿Está seguro que desea eliminar esta orden?"}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(C,{variant:"outline",onClick:()=>k(null),children:"Cancelar"}),r.jsx(C,{onClick:xe,children:"Eliminar"})]})]})})]})}function Wo(){return r.jsx(Vr,{children:r.jsxs(as,{children:[r.jsx(Hr,{position:"top-right"}),r.jsxs(Qr,{children:[r.jsx(pe,{path:"/login",element:r.jsx(Ca,{})}),r.jsx(pe,{element:r.jsx(os,{}),children:r.jsxs(pe,{element:r.jsx(Pa,{}),children:[r.jsx(pe,{path:"/",element:r.jsx(Ka,{})}),r.jsx(pe,{path:"/providers",element:r.jsx(Za,{})}),r.jsx(pe,{path:"/products",element:r.jsx(fo,{})}),r.jsx(pe,{path:"/orders",element:r.jsx(Io,{})})]})})]})]})})}Kt(document.getElementById("root")).render(r.jsx(g.StrictMode,{children:r.jsx(Wo,{})}));
//# sourceMappingURL=index-DwgPintu.js.map
